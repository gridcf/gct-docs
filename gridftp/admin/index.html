<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>GCT 6.0 GridFTP : System Administrator&#8217;s Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body id="gridftpAdmin" class="book toc2 toc-left">
<div id="header">
<h1>GCT 6.0 GridFTP : System Administrator&#8217;s Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#gridftp-admin-installing">Building and Installing</a>
<ul class="sectlevel2">
<li><a href="#gridftp-building-installing">Building and Installing GridFTP</a></li>
<li><a href="#gridftp-admin-installing-static-gridftp">Building and Installing a static GridFTP server</a></li>
<li><a href="#gridftp-admin-installing-threaded">Enabling Threading in GridFTP</a></li>
</ul>
</li>
<li><a href="#gridftp-configuring">Configuring GridFTP</a>
<ul class="sectlevel2">
<li><a href="#gridftp-config-overview">GridFTP server configuration overview</a></li>
<li><a href="#gridftp-config-types">Typical configuration</a></li>
<li><a href="#gridftp-config-security-firewalls">Firewall requirements</a></li>
<li><a href="#gridftp-admin-config-security">Configuring Security for GridFTP</a></li>
<li><a href="#_strong_code_globus_gridftp_server_code_strong_quickstart"><strong><code>globus-gridftp-server</code></strong> quickstart</a></li>
<li><a href="#_enabling_file_sharing_with_globus_sharing_service">Enabling File Sharing with Globus Sharing Service</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-tuning">Key Admin Settings and Tuning Recommendations</a>
<ul class="sectlevel2">
<li><a href="#_concurrent_instances">Concurrent Instances</a></li>
<li><a href="#_disk_block_size">Disk Block Size</a></li>
<li><a href="#_host_tuning">Host Tuning</a></li>
<li><a href="#_data_interface">Data Interface</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-advanced">Advanced Configuration</a>
<ul class="sectlevel2">
<li><a href="#gridftp-config-udt">Configuring GridFTP to use UDT instead of TCP</a></li>
<li><a href="#gridftp-admin-separated">Separation of Processes (Split Process)</a></li>
<li><a href="#gridftp-admin-striped">Configuring GridFTP for Cluster-to-Cluster (or Striped) data movement</a></li>
<li><a href="#combo-striped-split">Combining Split Process and Striped configuration</a></li>
<li><a href="#chroot-gridftp">Configuring chrooted GridFTP server</a></li>
<li><a href="#gridftp-admin-server-gfork">Running with GFork Master Plugin</a></li>
<li><a href="#gridftp-user-access">Accessing data from other data interfaces</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-experimental">Experimental Features</a>
<ul class="sectlevel2">
<li><a href="#gridftp-config-netlogger">Configuring GridFTP to enable Netlogger&#8217;s bottleneck detection</a></li>
<li><a href="#gridftp-config-multi">Configuring multicasting/broadcasting</a></li>
<li><a href="#gridftp-admin-gwtftp">GridFTP Where There Is FTP (GWTFTP)</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-testing">Testing</a></li>
<li><a href="#gridftp-admin-debugging">Debugging</a>
<ul class="sectlevel2">
<li><a href="#gridftp-logging">Logging</a></li>
</ul>
</li>
<li><a href="#gridftp-troubleshooting">Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#gridftp-error-codes">Error Codes in GridFTP</a></li>
<li><a href="#_establish_control_channel_connection">Establish control channel connection</a></li>
<li><a href="#_try_running_globus_url_copy">Try running globus-url-copy</a></li>
<li><a href="#_if_your_server_starts">If your server starts&#8230;&#8203;</a></li>
<li><a href="#gridftp-troubleshooting-latency">High latency for GridFTP server connections</a></li>
</ul>
</li>
<li><a href="#gridftp-usage">Usage statistics collection by the Globus Alliance</a>
<ul class="sectlevel2">
<li><a href="#gridftp-usage-stats">GridFTP-specific usage statistics</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-command">Appendix A: GridFTP Admin Tool</a>
<ul class="sectlevel2">
<li><a href="#_globus_gridftp_server_8">GLOBUS-GRIDFTP-SERVER(8)</a></li>
<li><a href="#globus-gridftp-server-setup-chroot">GLOBUS-GRIDFTP-SERVER-SETUP-CHROOT(8)</a></li>
</ul>
</li>
<li><a href="#gridftp-SRB">Appendix B: GCT 6.0 GridFTP: Setting up Storage Resource Broker (SRB)</a>
<ul class="sectlevel2">
<li><a href="#gridftp-SRB-intro">Introduction</a></li>
<li><a href="#gridftp-SRB-architecture">Architecture</a></li>
<li><a href="#gridftp-SRB-software">Software</a></li>
<li><a href="#gridftp-SRB-building">Building</a></li>
<li><a href="#gridftp-SRB-administration">Administration</a></li>
<li><a href="#gridftp-SRB-running">Running</a></li>
<li><a href="#gridftp-SRB-seealso">See Also</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-gfork-master">Appendix C: Running the Globus GridFTP Server With GFork</a>
<ul class="sectlevel2">
<li><a href="#gridftp-gfork-master-intro">Introduction</a></li>
<li><a href="#gridftp-gfork-master-use-case">Use Cases</a></li>
<li><a href="#gridftp-gfork-config">Configuration</a></li>
<li><a href="#gridftp-gfork-striped">GFork and Striped Servers</a></li>
<li><a href="#gridftp-gfork-memory-mgt">GFork with Memory Management</a></li>
</ul>
</li>
<li><a href="#gridftp-admin-index">Index</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="../../index.html">GCT</a> &#8594; <a href="../index.html">GridFTP</a> &#8594; GCT 6.0 GridFTP : System Administrator&#8217;s Guide</p>
</div>
<div class="openblock">
<div class="title">Introduction</div>
<div class="content">
<div class="paragraph">
<p>This guide contains advanced configuration information for system
administrators working with GridFTP. It provides references to
information on procedures typically performed by system administrators,
including installation, configuring, deploying, and testing the
installation. This guide should help you configure and run the GridFTP
server in some standard configurations.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>This information is in addition to the basic Grid Community Toolkit prerequisite,
overview, installation, security configuration instructions in the
<a href="../../admin/install/index.html">Installing GCT 6.0</a>. Read through this guide
before continuing!</p>
</div>
<div class="openblock">
<div class="content">

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-installing">Building and Installing</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="sect2">
<h3 id="gridftp-building-installing">Building and Installing GridFTP</h3>
<div class="paragraph">
<p>GridFTP is built and installed as part of a default GCT 6.0 installation.
For basic installation instructions, see
<a href="../../admin/install/index.html">Installing GCT 6.0</a>. No extra installation
steps are
required for this component.</p>
</div>
<div class="paragraph">
<p>If you wish to install GridFTP without installing the rest of the Grid Community
Toolkit, follow the instructions in the above link but just use the
group install target <em>globus-gridftp</em> with Linux native packages and
make target <em>gridftp</em> (make gridftp) with source installer.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-installing-static-gridftp">Building and Installing a static GridFTP server</h3>
<div class="paragraph">
<p>[only a static GridFTP server]</p>
</div>
<div class="paragraph">
<p>If you wish to build and install a statically linked set of GridFTP
binaries from the source installer, follow the instructions on GCT
installation from the source installer in the link above but use the
following for configure and make:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% ./configure --prefix=</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% make gpt globus_gridftp_server</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-installing-threaded">Enabling Threading in GridFTP</h3>
<div class="paragraph">
<p>In GCT 6.0 the GridFTP server and the client <em>globus-url-copy</em> are
non-threaded by default. To enable threading, set the environment
variable <em>GLOBUS_THREAD_MODEL=pthread</em>. On the server, threading can be
enabled using command-line option <em>-threads 1</em> as well.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-configuring">Configuring GridFTP</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="sect2">
<h3 id="gridftp-config-overview">GridFTP server configuration overview</h3>
<div class="paragraph">
<p>[overview]</p>
</div>
<div class="paragraph">
<p>The configuration interface for GridFTP is the admin tool, , which can
be used with a configuration file and/or run-time options.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Command line options and configuration file options may both be used,
but the command line <strong>overrides</strong> the config file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration file for the GridFTP server is read from the following
locations, in the given order. Only the first file found will be loaded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Path specified with the <code>-c &lt;configfile&gt;</code> command line option.</p>
</li>
<li>
<p><code>$GLOBUS_LOCATION/etc/gridftp.conf</code></p>
</li>
<li>
<p><code>/etc/grid-security/gridftp.conf</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Options are one per line, with the format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;option&gt; &lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If the value contains spaces, they should be enclosed in double-quotes
("). Flags or boolean options should only have a value of 0 or 1. Blank
lines and lines beginning with # are ignored.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  port 5000
  allow_anonymous 1
  anonymous_user bob
  banner "Welcome!"</pre>
</div>
</div>
<div class="paragraph">
<p>For complete command documentation including all options, see .</p>
</div>
<div class="paragraph">
<p>This page includes information about general configuration of the
GridFTP server. Security options are discussed
<a href="../../gridftp/admin/index.html#gridftp-admin-config-security">here</a>,
and more advanced configuration is described
<a href="../../gridftp/admin/index.html#gridftp-admin-advanced">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-config-types">Typical configuration</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The following describes a typical GridFTP configuration of the front end
(control channel) and back end (data channels). For other alternatives
that provide greater levels of security, see
<a href="../../gridftp/admin/index.html#gridftp-admin-advanced">Advanced
Configuration</a>.</p>
</div>
<div class="paragraph">
<p>By default, the data channel and control channel are separate socket
connections within the same process. The client sends a command and
waits to finish before issuing the next command. This is good for a
single host, traditional-type user. If you have a single host and you
want an ultra-reliable and light weight file transfer service, this is a
good choice. This configuration is also good for testing purposes.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-config-security-firewalls">Firewall requirements</h3>
<div class="paragraph">
<p>If the GridFTP server is behind a firewall:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Contact your network administrator to open up port 2811 (for GridFTP
control channel connection) and a range of ports (for GridFTP data
channel connections) for the incoming connections. If the firewall
blocks the outgoing connections, open up a range of ports for outgoing
connections as well.</p>
</li>
<li>
<p>Set the environment variable GLOBUS_TCP_PORT_RANGE:</p>
<div class="listingblock">
<div class="content">
<pre>export GLOBUS_TCP_PORT_RANGE=min,max</pre>
</div>
</div>
<div class="paragraph">
<p>where <em>min</em>,<em>max</em> specify the port range that you have opened for the
incoming connections on the firewall. This restricts the listening ports
of the GridFTP server to this range. Recommended range is 1000 (e.g.,
50000-51000) but it really depends on how much use you expect.</p>
</div>
</li>
<li>
<p>If you have a firewall blocking the outgoing connections and you have
opened a range of ports, set the environment variable
GLOBUS_TCP_SOURCE_RANGE:</p>
<div class="listingblock">
<div class="content">
<pre>export GLOBUS_TCP_SOURCE_RANGE=min,max</pre>
</div>
</div>
<div class="paragraph">
<p>where <em>min</em>,<em>max</em> specify the port range that you have opened for the
outgoing connections on the firewall. This restricts the GridFTP server
to bind to a local port in this range for outbound connections.
Recommended range is twice the range used for GLOBUS_TCP_PORT_RANGE,
because if parallel TCP streams are used for transfers, the listening
port would remain the same for each connection but the connecting port
would be different for each connection.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If the server is behind NAT, the <code>--data-interface &lt;real ip/hostname&gt;</code>
option needs to be used on the server.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the GridFTP <strong>client</strong> is behind a firewall:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Contact your network administrator to open up a range of ports (for
GridFTP data channel connections) for the incoming connections. If the
firewall blocks the outgoing connections, open up a range of ports for
outgoing connections as well.</p>
</li>
<li>
<p>Set the environment variable GLOBUS_TCP_PORT_RANGE</p>
<div class="listingblock">
<div class="content">
<pre>export GLOBUS_TCP_PORT_RANGE=min,max</pre>
</div>
</div>
<div class="paragraph">
<p>where min,max specify the port range that you have opened for the
incoming connections on the firewall. This restricts the listening ports
of the GridFTP client to this range. Recommended range is 1000 (e.g.,
50000-51000) but it really depends on how much use you expect.</p>
</div>
</li>
<li>
<p>If you have a firewall blocking the outgoing connections and you have
opened a range of (local) ports, set the environment variable
GLOBUS_TCP_SOURCE_RANGE:</p>
<div class="listingblock">
<div class="content">
<pre>export GLOBUS_TCP_PORT_RANGE=min,max</pre>
</div>
</div>
<div class="paragraph">
<p>where min,max specify the port range that you have opened for the
outgoing connections on the firewall. This restricts the GridFTP client
to bind to a local port in this range for outbound connections.
Recommended range is twice the range used for GLOBUS_TCP_PORT_RANGE,
because if parallel TCP streams are used for transfers, the listening
port would remain the same for each connection but the connecting port
would be different for each connection.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Additional information on Grid Community Toolkit Firewall Requirements is
available <a href="http://www.globus.org/toolkit/security/firewalls/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-config-security">Configuring Security for GridFTP</h3>
<div class="paragraph">
<p>There are many security options in GridFTP ranging from no security to
higher security via GSI .</p>
</div>
<div class="sect3">
<h4 id="gridftp-admin-config-security-anonymous">Anonymous mode</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Anonymous mode (using the <em>-aa</em> option) allows any user with an FTP
client to read and write (and delete) files that the server process can
similarly access (it is also a quick way to test that your server
works).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server -aa
Server listening at 127.0.0.1:58806</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>When the server is run in this way, anyone who can connect to the server
will posses all the same rights as the user that the process is run as
(directly or via <em>-anonymous-user</em>). If using this mode intentionally
for open access, it is best to run under a dedicated account with
limited filesystem permissions. You can also use the option below to
disable FTP commands such as STOR, ESTO, DELE, RDEL, RNTO, etc to make
sure that users can only read from the server and not write to it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre> -disable-command-list &lt;string&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where &lt;string&gt; represents a comma separated list of client commands that
will be disabled. Default: not set.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-admin-config-security-userpw">Username/password</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If you trust your network and want a minimal amount of security, you can
run the globus-gridftp-server with clear text passwords. This security
model is the one originally introduced in RFC959.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>We do not recommend it for long running servers open to the internet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_create_password_file">Create password file</h5>
<div class="paragraph">
<p>To run the server in clear text password mode, we first need to create a
password file dedicated to it. The format of the password file is the
same as standard system password files; however, it is ill-advised to
use a system password file. To create an entry in a GridFTP password
file, run the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% touch pwfile
globus% gridftp-password.pl &gt;&gt; pwfile
Password:</pre>
</div>
</div>
<div class="paragraph">
<p>This will ask you for a password and then create an entry in the
password file for the current user name and the given password. Take a
look at the file created. You will notice that the password you typed in
is not in the file in a clear text form. We have run it though a one way
hash algorithm before storing it in the file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_run_the_server_in_password_mode">Run the server in password mode</h5>
<div class="paragraph">
<p>Simply start the server pointing it at the password file you just
created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server -password-file  /full/path/of/pwfile
Server listening at 127.0.0.1:5555</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_make_a_transfer">Make a transfer</h5>
<div class="paragraph">
<p>To run globus-url-copy with the password, use the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-url-copy file:///etc/group ftp://</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-admin-config-security-sshftp">SSHFTP (GridFTP-over-SSH)</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>This type of security introduces the sshftp control channel (frontend)
protocol. This is a very simple means of obtaining strong security on
the control channel only (the data channel is <strong>not</strong> authenticated).
With this approach, you can run a GridFTP transfer anywhere that you can
ssh. <code>sshftp://</code> leverages the ubiquitous ssh/sshd programs to form
control channel connections much in the same way that inetd forms
connections. leverages the ubiquitous ssh/sshd programs to form control
channel connections much in the same way that inetd forms connections.</p>
</div>
<div class="sect4">
<h5 id="_configure_server_for_ssh_gridftp_support">Configure Server for SSH GridFTP Support</h5>
<div class="paragraph">
<p>Every host that wishes to run a <strong><code>globus-gridftp-server</code></strong> which can
accept <code>sshftp://</code> connections must run the following command as root:
connections must run the following command as root:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server-enable-sshftp</pre>
</div>
</div>
<div class="paragraph">
<p>In the absence of root access, a user can configure the server to allow
<code>sshftp://</code> connections for that user only with the following command:
connections for that user only with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server-enable-sshftp -nonroot</pre>
</div>
</div>
<div class="paragraph">
<p>The above command creates a file named <em>sshftp</em> in <em>/etc/grid-security</em>
(if run as root) or in <em>$HOME/.globus</em> (if run as nonroot). You may edit
this file to set gridftp commandline options or environment variables
such as GLOBUS_TCP_PORT_RANGE, but you can also set those options in the
config file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_performing_code_sshftp_code_transfers_transfers">Performing <code>sshftp://</code> Transfers Transfers</h5>
<div class="paragraph">
<p>In this case, a <strong><code>globus-gridftp-server</code></strong> does not need to be
running. The server will be started via the sshd program. Therefore, the
hostname and port should be that of the sshd server. Run
<strong><code>globus-url-copy</code></strong> just as you have before; simply change
<code>ftp://</code> to  to <code>sshftp://</code>..</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-url-copy -v file:/etc/group sshftp://127.0.0.1/tmp/group
globus% globus-url-copy -list sshftp://127.0.0.1/tmp/</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-admin-gsiftp">GSIFTP</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>This security option can be the most involved to set up, but provides
the most security. It requires setting up GSI security as described in
the GCT Installation Guide here:
<a href="../../admin/install/index.html#gtadmin-basic-security">Basic Security
Configuration</a>.</p>
</div>
<div class="paragraph">
<p>Once GSI has been set up (host and user credentials are valid, the
gridmap file is updated and you&#8217;ve run grid-proxy-init to create a proxy
certificate), you simply run the GridFTP server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If run as <code>root</code>, it will pick up the host cert; if not, it will pick
up the user cert.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you are ready to perform a GSI-authenticated transfer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy &lt;-s subject&gt; src_url dst_url</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The subject option is only needed if the server was not started as root.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="gridftp-admin-daemon_mode">Running in daemon mode</h5>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The server should generally be run as root in daemon mode, although it
is possible to run it as a user (see below). When run as root you will
need to have a
<a href="../../admin/install/index.html#gtadmin-basic-host">host
certificate</a>.</p>
</div>
<div class="paragraph">
<p>Run the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server &lt; -s | -S &gt; &lt;args&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-s</strong></dt>
<dd>
<p>Runs in the foreground (this is the default mode).</p>
</dd>
<dt class="hdlist1"><strong>-S</strong></dt>
<dd>
<p>Detaches from the terminal and runs in the background.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following additional steps may be required when running as a user
other than root (for more details, review
<a href="../../admin/install/index.html#gtadmin-basic-security">Basic Security
Configuration</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a <code>~/.gridmap</code> file, containing the DNs of any clients you wish to allow, mapped to the current username. file, containing the DNs of any clients you wish to allow, mapped to the current username.</p>
</li>
<li>
<p>Create a proxy with <strong><code>grid-proxy-init</code></strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="gridftp-admin-inetd">Running under inetd or xinetd</h5>
<div class="paragraph">
<p></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>We also feature a user-configurable, super-server daemon plugin called
GFork. Click
<a href="../../gridftp/admin/index.html#gridftp-admin-gfork-master">here</a> for
more information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up xinetd/inetd config file</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The service name used (gsiftp in this case) should be defined in
<code>/etc/services</code> with the desired port.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is a sample GridFTP server xinetd config entry in
<code>/etc/xinetd.conf</code>: :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>service gsiftp
{
    instances               = 100
    socket_type             = stream
    wait                    = no
    user                    = root
    env                     += GLOBUS_LOCATION=(globus_location)
    env                     += LD_LIBRARY_PATH=(globus_location)/lib
    server                  = (globus_location)/sbin/globus-gridftp-server
    server_args             = -i
    log_on_success          += DURATION
    nice                    = 10
    disable                 = no
}</pre>
</div>
</div>
<div class="paragraph">
<p>Here is a sample gridftp server inetd config entry in
<code>/etc/inetd.conf</code> (read as a single line)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gsiftp   stream   tcp   nowait   root   /usr/bin/env env    \
GLOBUS_LOCATION=(globus_location)                           \
LD_LIBRARY_PATH=(globus_location)/lib                       \
(globus_location)/sbin/globus-gridftp-server -i</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>On Mac OS X, you must set DYLD_LIBRARY_PATH instead of LD_LIBRARY_PATH
in the above examples.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You should NOT include USERID in the log lines. See
<a href="../../gridftp/admin/index.html#gridftp-troubleshooting-latency">High
latency for GridFTP server connections</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>globus-gridftp-server -i</p>
<div class="paragraph">
<p>Use the <em>-i</em> commandline option with <strong><code>globus-gridftp-server</code></strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -i</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="gridftp-admin-launchd">Running under launchd</h5>
<div class="paragraph">
<p>launchd is used to start services in the system Mac OS X 10.4 (Tiger)
and newer, and is also available as a port to FreeBSD.</p>
</div>
<div class="paragraph">
<p>Here is a
<a href="http://www.globus.org/toolkit/docs/{$shortversion}/{$version}/gridftp/globus.gridftp.plist">sample</a>
configuration file for launchd to start the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
    &lt;dict&gt;
        &lt;key&gt;Disabled&lt;/key&gt;
        &lt;false/&gt;
        &lt;key&gt;Label&lt;/key&gt;
        &lt;string&gt;globus.gridftp&lt;/string&gt;
        &lt;key&gt;Program&lt;/key&gt;
        &lt;string&gt;(globus_location)/sbin/globus-gridftp-server&lt;/string&gt;
        &lt;key&gt;ProgramArguments&lt;/key&gt;
        &lt;array&gt;
            &lt;string&gt;globus-gridftp-server&lt;/string&gt;
            &lt;string&gt;-i&lt;/string&gt;
            &lt;string&gt;-d&lt;/string&gt;
            &lt;string&gt;ALL&lt;/string&gt;
            &lt;string&gt;-l&lt;/string&gt;
            &lt;string&gt;(globus_location)/var/gridftp.log&lt;/string&gt;
        &lt;/array&gt;
        &lt;key&gt;Sockets&lt;/key&gt;
        &lt;dict&gt;
            &lt;key&gt;Listeners&lt;/key&gt;
            &lt;dict&gt;
                &lt;key&gt;SockServiceName&lt;/key&gt;
                &lt;string&gt;gsiftp&lt;/string&gt;
            &lt;/dict&gt;
        &lt;/dict&gt;
        &lt;key&gt;inetdCompatibility&lt;/key&gt;
        &lt;dict&gt;
            &lt;key&gt;Wait&lt;/key&gt;
            &lt;false/&gt;
        &lt;/dict&gt;
        &lt;key&gt;StandardErrorPath&lt;/key&gt;
        &lt;string&gt;/dev/null&lt;/string&gt;
        &lt;key&gt;EnvironmentVariables&lt;/key&gt;
        &lt;dict&gt;
            &lt;key&gt;GLOBUS_LOCATION&lt;/key&gt;
            &lt;string&gt;(globus_location)&lt;/string&gt;
            &lt;key&gt;LD_LIBRARY_PATH&lt;/key&gt;
            &lt;string&gt;(globus_location)/lib&lt;/string&gt;
        &lt;/dict&gt;
    &lt;/dict&gt;
&lt;/plist&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Provided that the configuration file is stored in
<code>/System/Library/LaunchDaemons/globus.gridftp.plist</code>, the following
command starts the GridFTP server:, the following command starts the
GridFTP server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>launchctl load /System/Library/LaunchDaemons/globus.griftp.plist</pre>
</div>
</div>
<div class="paragraph">
<p>The server will be started automatically with a system, unless the value
of the key <em>Disabled</em> is changed from <strong><code>&lt;false/&gt;</code></strong> to
<strong><code>&lt;true/&gt;</code></strong>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-admin-user-pems">User permissions</h4>
<div class="paragraph">
<p>Users are mapped to a local account on the server machine and file
permissions are handled by the operating systems. In the anonymous mode,
users that connect to the server will posses all the same rights as the
user that the server process is run as (directly or via
-anonymous-user).</p>
</div>
<div class="paragraph">
<p>In case of username/password authentication, the users are mapped to the
uid corresponding to the username in the GridFTP password file and the
access permissions for the users is same as that of the UID that they
are mapped to. If SSH based authentication is used, upon successful
authentication, SSHD maps users to a local account and the GridFTP
server is run as the mapped local user. The access permissions are the
same as that of the mapped local user.</p>
</div>
<div class="paragraph">
<p>If GSI is used, upon successful authentication an authorization callout
is invoked to (a) verify authorization and (b) determine the local user
id as which the request should be executed. This callout is linked
dynamically. Globus GridFTP provides an implementation that supports a
Globus "gridmapfile". Sites can also provide alternative
implementations. Server does a setuid to the local user id as determined
by the authorization callout and the access permissions are the same as
that of the local user id.</p>
</div>
<div class="paragraph">
<p>GridFTP server provides an option to disable certain FTP commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> -disable-command-list &lt;string&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where &lt;string&gt; represents a comma separated list of client commands that
will be disabled. Default: not set.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_strong_code_globus_gridftp_server_code_strong_quickstart"><strong><code>globus-gridftp-server</code></strong> quickstart</h3>
<div class="paragraph">
<p>The following is a quick guide to running the server and using the
client:</p>
</div>
<div class="paragraph">
<p>Look through the list of options for globus-gridftp-server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server --help</pre>
</div>
</div>
<div class="paragraph">
<p>Start the server in anonymous mode (discussed more fully
<a href="../../gridftp/admin/index.html#gridftp-admin-config-security-anonymous">here</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -control-interface 127.0.0.1 -aa -p 5000</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>control-interface</strong></dt>
<dd>
<p>is the hostname or IP address of the interface to listen for control connections on . This option is only needed here as a rudimentary means of security for this simple example.</p>
</dd>
<dt class="hdlist1"><strong>aa</strong></dt>
<dd>
<p>enables anonymous mode</p>
</dd>
<dt class="hdlist1"><strong>p</strong></dt>
<dd>
<p>indicates on which port the server listens.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Run a two party transfer with client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -v file:///etc/group ftp://localhost:5000/tmp/group</pre>
</div>
</div>
<div class="paragraph">
<p>Run 3rd party transfer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -v ftp://localhost:port/etc/group ftp://localhost:port/tmp/group2</pre>
</div>
</div>
<div class="paragraph">
<p>Experiment with -dbg, and -vb options for debugging and checking the
performance of your setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -dbg file:///etc/group ftp://localhost:5000/tmp/group</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -vb file:///dev/zero ftp://localhost:5000/dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-dbg**::
     A useful option when something is not working. It results in a GridFTP
control channel protocol dump (along with other useful information) to
stderr. If you understand the GridFTP protocol, or you have ambition to
understand it, this can be a very useful tool to discover various
problems in your setup such as overloaded servers and firewalls. When
submitting a bug report or asking a question on the support email lists
one should always send along the -dbg output.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-vb</strong></dt>
<dd>
<p>     Provides a type of progress bar of the user to observe the rate at which
their transfer is progressing.</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ctrl-c - Kill the server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>There are many possible options and configurations with
<strong><code>globus-gridftp-server</code></strong>. For some guidelines on setting it up for
your situation, see
<a href="../../gridftp/admin/index.html#gridftp-admin-tuning">Key Admin Settings and
Tuning Recommendations</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_file_sharing_with_globus_sharing_service">Enabling File Sharing with Globus Sharing Service</h3>
<div class="paragraph">
<p>To enable file sharing using
<a href="https://www.globus.org/researchers/plus-plans">Globus Sharing</a>, you have
to add the <a href="../securityd2b.tar.gz">Globus Sharing CA certificates</a> to
your trusted certificates directory (/etc/grid-security/certificates)
and use <em>-sharing-dn</em> option in the server as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server -sharing-dn "/C=US/O=Globus Consortium/OU=Globus Online/OU=Transfer User/CN=__transfer__"</pre>
</div>
</div>
<div class="paragraph">
<p>and use <em>-sharing-rp</em> option to restrict the file paths allowed for
sharing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus% globus-gridftp-server -sharing-rp &lt;path&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-tuning">Key Admin Settings and Tuning Recommendations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong><code>globus-gridftp-server</code></strong> is a flexible and tunable piece of
software. It is easy for an admin to get lost in all of the options it
offers. This document intends to highlight some of the more commonly
important options related to performance and robustness. It does not
intend to account for all of the options but rather to give the system
administator a better perspective into how to set some of the less
obvious controls.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concurrent_instances">Concurrent Instances</h3>
<div class="paragraph">
<p>A very important option for a system administrator to set is the number
of simultaneous GridFTP transfers allowed. In other words, the number of
clients that are allowed to connect to the server at the same time.</p>
</div>
<div class="paragraph">
<p>GridFTP is designed to be a high performance, on-demand data transfer
service. Quite a bit of system resources (mainly memory) are allocated
to each client connection and this is with the assumption that the
session will consume even more system resources (CPU, net/disk
bandwidth) when performing a high speed data transfer. For this reason,
the system administrator must evaluate the resource their host machine
has to offer and set a reasonable limit to the number of client connects
allowed at one time.</p>
</div>
<div class="paragraph">
<p>When determining the instance concurrency level, there are two major
factors to consider: <strong>system memory</strong> helps determine the upper limit
of the instance range and <strong>available I/O bandwidth</strong> helps determine
the lower limit.</p>
</div>
<div class="sect3">
<h4 id="_system_memory_considerations">System memory considerations</h4>
<div class="paragraph">
<p>First and foremost is system memory. The recommended instance count
based on system memory is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>instance count = system memory / 34</pre>
</div>
</div>
<div class="paragraph">
<p>Each instance of a GridFTP server will require about 2MB of memory just
to handle the connection in a sane way. Beyond that is the amount of
memory required to handle a fast, TCP-based data transfer. A safe rule
of thumb here is 32MB. This allows for a TCP buffer size of 16MB (which
is a common client selection for high performance WAN bandwidth delay
products) and a user space buffer to match that value. 2MB + 16MB + 16MB
= 34MB, thus the denominator in the above formula.</p>
</div>
</div>
<div class="sect3">
<h4 id="_i_o_bandwidth_considerations">I/O bandwidth considerations</h4>
<div class="paragraph">
<p>Simultaneous clients share the available I/O resources. Most often it is
beneficial to allocate enough bandwidth so that each client can transfer
data at an acceptable rate. In a simple model, the higher the instance
count, the lower the transfer rates for each client. At some point it is
beneficial for the GridFTP server to reject connections in an attempt to
provide a higher level of service to its currently connected clients.
There is also a point where too many simultaneous clients can cause
thrashing and drop network packets. Obviously this situation should be
avoided.</p>
</div>
<div class="paragraph">
<p>While no client wants to be rejected, a higher level service can take
advantage of this by either trying again later at a more efficient time,
reordering its work load, or finding a replica. RFT provides some of
this functionality and other such services are being researched and
designed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_more_than_one">Why More Than One?</h4>
<div class="paragraph">
<p>When considering the right concurrent instance level it is helpful to
consider why there should ever be more than one at a time. There are
three major reasons for this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>The other side of the connection is the bottleneck.</strong></p>
<div class="paragraph">
<p>If we assume that each transfer moves as fast as our system can send it,
then, when considering overall throughput, having two connections going
at half speed is roughly the same thing as having 2 full speed
connections run one at a time. However, if the remote end of the
connection is the bottleneck, then there is unused local bandwidth from
which another simultaneous connection and thus the overall system can
benefit.</p>
</div>
</li>
<li>
<p><strong>Hide the overhead.</strong></p>
<div class="paragraph">
<p>Another important aspect of simultaneous connections is that the needed
overhead of control messaging can be overlapped with the payload of
another sessions data transfer. Hiding this processing and messaging
latency makes for a more efficient system with a higher overall
throughput.</p>
</div>
</li>
<li>
<p><strong>Provide an interactive service.</strong></p>
<div class="paragraph">
<p>In some case, users may find connection rejections unacceptable and
would prefer a slower overall system provided they could connect to it
immediately for the purpose of an interactive session.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the case of #3 the the highest safe level of instance count possible
is ideal. In the other two case the ideal number is less deterministic.
At least 10 instance is always recommended.</p>
</div>
</div>
<div class="sect3">
<h4 id="_setting_the_instance_cap">Setting the instance cap</h4>
<div class="paragraph">
<p>If using GFork or Xinetd, set the instance cap by adding the following
line to the configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>instance = &lt;integer&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If running the GridFTP server as a daemon, use the following option to
set the instance cap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> -connections-max &lt;integer&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_disk_block_size">Disk Block Size</h3>
<div class="paragraph">
<p>The <strong><code>globus-gridftp-server</code></strong> sits on top of various file systems.
Each file system has its own ideal access patterns and I/O buffer sizes.
To provide the user with some means of control, we offer the option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-blocksize &lt;number&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This number indicates the size of the read requests posted to the disk.</p>
</div>
</div>
<div class="sect2">
<h3 id="_host_tuning">Host Tuning</h3>
<div class="paragraph">
<p>We recommend that you update the kernel TCP buffer settings and TCP
congestion control algorithm as recommended
<a href="http://fasterdata.es.net/fasterdata/host-tuning/">here</a> for achieving
maximum performance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_interface">Data Interface</h3>
<div class="paragraph">
<p>On systems that have multiple network interfaces, the system admin
likely wants to associate data transfers with the fastest possible NIC
available. This can be done in the GridFTP server by using the option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--data-interface &lt;ip address&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-advanced">Advanced Configuration</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>It is assumed that the toolkit installation was successful. For more
information, see the <a href="../../admin/install/index.html">Installing GCT 6.0</a>.
Also be sure
to reference <a href="#gridftp-configuring">Configuring GridFTP</a> and
<a href="../../gridftp/admin/index.html#globus-gridftp-server"><strong><code>globus-gridftp-server</code></strong></a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-config-udt">Configuring GridFTP to use UDT instead of TCP</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>UDT is bundled with GCT starting with Globus v4.2, so downloading UDT
separately is no longer needed.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites">Prerequisites</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Threaded Globus GridFTP server. In GT6, the server is non-threaded by
default. Refer to
<a href="../../gridftp/admin/index.html#gridftp-admin-installing-threaded">Enabling
Threading in GridFTP</a>
for information on how to enable threading in GridFTP server.</p>
</li>
<li>
<p>For client-server transfers, threaded globus-url-copy. For third-party
(server-server) transfers, threaded globus-url-copy is not needed. Refer
to
<a href="../../gridftp/admin/index.html#gridftp-admin-installing-threaded">Enabling
Threading in GridFTP</a>
for information on how to enable threading in globus-url-copy.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_steps">Steps</h4>
<div class="paragraph">
<p>The steps to use UDT with globus-gridftp-server are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build and install UDT</p>
<div class="listingblock">
<div class="content">
<pre>globus$ make udt</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus$ make gridftp udt</pre>
</div>
</div>
<div class="paragraph">
<p>if gridftp is not built and installed already)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus$ make install</pre>
</div>
</div>
</li>
<li>
<p>Configure GridFTP server
If you run the GridFTP server from xinetd, add <code>-dc-whitelist
udt,gsi,tcp</code> to <code>server_args</code> in <code>/etc/xinetd.d/gsiftp</code></p>
<div class="paragraph">
<p>Alternatively, you can use the file
<code>$GLOBUS_LOCATION/etc/gridftp.conf</code> to configure this. Add the
following to that file:  to configure this. Add the following to that
file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dc_whitelist udt,gsi,tcp</pre>
</div>
</div>
<div class="paragraph">
<p>If you run the server from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$GLOBUS_LOCATION/sbin/globus-gridftp-server -dc-whitelist udt,gsi,tcp</pre>
</div>
</div>
</li>
<li>
<p>Run globus-url-copy with new command line option "-udt"</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-separated">Separation of Processes (Split Process)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The GridFTP server can be separated into front end and data node
processes. This is the architecture used to achieve a striped server,
but it can also be exploited to achieve a higher level of security.</p>
</div>
<div class="paragraph">
<p>Running the server as <code>root</code> is often desirable because it allows the
server to fork and setuid on a child process related to an authenticated
user. This allows the server to leverage the operating system&#8217;s file
system permissions and other security devices. However, it is not at all
desirable to have a <code>root</code>-running process listening on a port open to
the world. If an attacker were to compromise the process, they could
obtain root-level access to the machine.</p>
</div>
<div class="paragraph">
<p>To overcome this security risk, the GridFTP server can be run in a front
end/back end manner. The front end can be run as any user, say user
<code>globus</code>, that has very limited access to the machine. The front end
is the process open to the outside world. If it is compromised, an
attacker has only gained access to that limited account. The back end is
run as root, but configured to only allow connections from the front
end.</p>
</div>
<div class="paragraph">
<p>This does, however, require that a copy of the
<a href="../../admin/install/index.html#gtadmin-basic-host">host cert and
host key</a> be owned by the non-privileged user. If you use this
configuration, the non-privileged user should not have write permission
to executables, configuration files, etc. This provides greater security
and also allows for proxying and load balancing. Many backend data
movers can be behind a single point of client contact. Each client is
assigned a different backend in a round robin fashion.</p>
</div>
<div class="paragraph">
<p>To start the front end, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -p 7000 -r localhost:7001</pre>
</div>
</div>
<div class="paragraph">
<p>To start the back end, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -p 7001 -dn -allow-from 127.0.0.1</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-striped">Configuring GridFTP for Cluster-to-Cluster (or Striped) data movement</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The GridFTP server supports separate front end (client control
connection) and back end (data node) processes. In addition, a single
front end process may connect to multiple back end data nodes.</p>
</div>
<div class="paragraph">
<p>When multiple back end data nodes are available, the server is said to
be in a <strong>striped</strong> configuration, or simply, is a striped server. In
this mode, transfers are divided over all available data nodes, thus
allowing the combined bandwidth of all data nodes to be used.</p>
</div>
<div class="paragraph">
<p>This is recommended for improved performance of large (1GB+) file
transfers. This can also be useful if you want to use full data
encryption and need to tether together many hosts to handle the
processing load.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The connection between the front end and data nodes is referred to as
the <strong>IPC channel</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The ability to use inetd or daemon execution modes applies to both front
end servers and data nodes, and the same certificate and user
requirements apply.</p>
</div>
<div class="paragraph">
<p>To start the front end, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server &lt;args&gt; -r &lt;host:port&gt;[,&lt;host:port&gt;,...]</pre>
</div>
</div>
<div class="paragraph">
<p>To start the data-node, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -p &lt;port&gt; -dn</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-p &lt;port&gt;</code> option used on the data-node is the port that will be
used for IPC connections. This is the port that you will register with
the front end server.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>machineB&gt; globus-gridftp-server -p 6000 -dn
machineC&gt; globus-gridftp-server -p 7000 -dn
machineA&gt; globus-gridftp-server -p 5000 -r machineB:6000,machineC:7000</pre>
</div>
</div>
<div class="paragraph">
<p>The client would only connect to the front end at <code>machineA:5000</code>, for
example, using globus-url-copy with the <em>-stripe</em> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -stripe gsiftp://machineA:5000/file file:///destination
   or
globus-url-copy -stripe gsiftp://machineA:5000/file gsiftp://machineX/destination</pre>
</div>
</div>
<div class="paragraph">
<p>Where machineX may be another striped server or a standard GridFTP
server.</p>
</div>
</div>
<div class="sect2">
<h3 id="combo-striped-split">Combining Split Process and Striped configuration</h3>
<div class="paragraph">
<p>Furthermore striped servers and split process can be combined. You can
have an 8 node cluster that only uses 2 nodes at a time in a striped
server configuration and load balances across the rest of the nodes.
TODO: any other details here?</p>
</div>
</div>
<div class="sect2">
<h3 id="chroot-gridftp">Configuring chrooted GridFTP server</h3>
<div class="paragraph">
<p>GridFTP server can be configured to restrict access to specific path
using the command-line option <em>-chroot-path &lt;path&gt;</em> This path must
contain a valid certificate structure, /etc/passwd, and /etc/groups. A
helper script
<a href="#globus-gridftp-server-setup-chroot"><em>globus-gridftp-server-setup-chroot</em></a>
can help create a suitable directory structure.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-server-gfork">Running with GFork Master Plugin</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>GFork is a service like inetd that listens on a TCP port and runs a
configurable executable in a child process whenever a connection is
made. GFork also creates bi-directional pipes between the child
processes and the master service. These pipes are used for interprocess
communication between the child process executables and a master process
plugin. More information on GFork can be found
<a href="#gridftp-admin-gfork-master">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-user-access">Accessing data from other data interfaces</h3>
<div class="sect3">
<h4 id="_gridftp_and_dsis">GridFTP and DSIs</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>The following information is helpful if you want to use GridFTP to
access data in DSIs (such as HPSS and SRB), and non-POSIX data sources.</p>
</div>
<div class="paragraph">
<p>Architecturally, the Globus GridFTP server can be divided into 3
modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the GridFTP protocol module,</p>
</li>
<li>
<p>the (optional) data transform module, and</p>
</li>
<li>
<p>the Data Storage Interface (DSI).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the GCT 6.0 implementation, the data transform module and the DSI have
been merged, although we plan to have separate, chainable, data
transform modules in the future.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This architecture does NOT apply to the WU-FTPD implementation (GT3.2.1 and lower).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="gridftp-protocol">GridFTP Protocol Module</h5>
<div class="paragraph">
<p>The GridFTP protocol module is the module that reads and writes to the
network and implements the GridFTP protocol. This module should not need
to be modified since to do so would make the server non-protocol
compliant, and unable to communicate with other servers.</p>
</div>
</div>
<div class="sect4">
<h5 id="gridftp-data_transform">Data Transform Functionality</h5>
<div class="paragraph">
<p>The data transform functionality is invoked by using the ERET (extended
retrieve) and ESTO (extended store) commands. It is seldom used and
bears careful consideration before it is implemented, but in the right
circumstances can be very useful. In theory, any computation could be
invoked this way, but it was primarily intended for cases where some
simple pre-processing (such as a partial get or sub-sampling) can
greatly reduce the network load. The disadvantage to this is that you
remove any real option for planning, brokering, etc., and any
significant computation could adversely affect the data transfer
performance. Note that the client must also support the ESTO/ERET
functionality as well.</p>
</div>
</div>
<div class="sect4">
<h5 id="gridftp-dsi">Data Storage Interface (DSI) / Data Transform module</h5>
<div class="paragraph">
<p>The Data Storage Interface (DSI) / Data Transform module knows how to
read and write to the "local" storage system and can optionally
transform the data. We put local in quotes because in a complicated
storage system, the storage may not be directly attached, but for
performance reasons, it should be relatively close (for instance on the
same LAN).</p>
</div>
<div class="paragraph">
<p>The interface consists of functions to be implemented such as send
(get), receive (put), command (simple commands that simply succeed or
fail like mkdir), etc..</p>
</div>
<div class="paragraph">
<p>Once these functions have been implemented for a specific storage
system, a client should not need to know or care what is actually
providing the data. The server can either be configured specifically
with a specific DSI, i.e., it knows how to interact with a single class
of storage system, or one particularly useful function for the ESTO/ERET
functionality mentioned above is to load and configure a DSI on the fly.</p>
</div>
<div class="paragraph">
<p>See <a href="../../gridftp/developer/index.html#gridftp-developer-dsi">Developing
DSIs for GridFTP</a> for more information.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-admin-dsis">Plugging in a Data Storage Interface (DSI)</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>GridFTP can be used as a network interface to existing Data Storage
Interfaces (DSIs) using the <em>-dsi</em> option. With this option the DSI
plugs into the backend (compatible with striping) and is transparent to
the client or remote party. It can be used with either the GCT standard
DSI plugins or with
<a href="../../gridftp/developer/index.html#gridftp-developer-dsi">custom-built
DSI plugins</a>. The standard DSI plugins available in a default GCT
installation are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gridftp-SRB">Storage Resource Broker (SRB)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above link point to complete information about setting up and
running the GridFTP server with these DSIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-howto-access-posix">Accessing data in a non-POSIX file data source that has a POSIX interface</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If you want to access data in a non-POSIX file data source that has a
POSIX interface, the standard server will do just fine. Just make sure
it is really POSIX-like (out of order writes, contiguous byte writes,
etc).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-experimental">Experimental Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gridftp-config-netlogger">Configuring GridFTP to enable Netlogger&#8217;s bottleneck detection</h3>
<div class="paragraph">
<p>For information on enabling bottleneck detection via Netlogger, see the
<a href="http://www.cedps.net/index.php/Gridftp-netlogger">Gridftp-netlogger</a> page
on the CEDPS website.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-config-multi">Configuring multicasting/broadcasting</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>To enable
<a href="../../gridftp/user/index.html#gridftp-user-experimental-multicasting">multicasting</a>,
you must whitelist the <code>gridftp_multicast</code> driver with the
<em>-fs-whitelist file,gridftp_multicast</em> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -fs-whitelist file,gridftp_multicast</pre>
</div>
</div>
<div class="paragraph">
<p>The above command whitelists both the <code>file</code> driver and the
<code>gridftp_multicast</code> driver. [NOTE]</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>file</code> driver is the default <a href="../../xio/index.html">XIO</a> driver that
handles
reading and writing to file systems (disks). By default, this driver is
already whitelisted. However, if you use the <em>-fs-whitelist</em> option, you
must set <strong>all</strong> the drivers you want whitelisted (and the <code>file</code>
driver will still be needed to allow reads and writes to disk for
non-multicast users.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>For information about using multicasting, click
<a href="../../gridftp/user/index.html#gridftp-user-experimental-multicasting">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-admin-gwtftp">GridFTP Where There Is FTP (GWTFTP)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>GridFTP Where There Is FTP (GWTFTP) is an intermediate program that acts
as a proxy between existing FTP clients and GridFTP servers. Users can
connect to GWFTP with their favorite standard FTP client, and GWFTP will
then connect to a GridFTP server on the clients behalf. To clients,
GWFTP looks much like an FTP proxy server. When wishing to contact a
GridFTP server, FTP clients instead contact GWTFTP.</p>
</div>
<div class="paragraph">
<p>Clients tell GWFTP their ultimate destination via the FTP <strong><code>USER </code></strong>
command. Instead of entering their username, client users send the
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>USER &lt;GWTFTP username&gt;::&lt;GridFTP server URL&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This command tells GWTFTP the GridFTP endpoint with which the client
wants to communicate. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>USER bresnaha::gsiftp://wiggum.mcs.anl.gov:2811/</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Requires <a href="../../gsic/index.html">GSI C security</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-testing">Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the globus-ftp-client-test package has been installed, our standard
test suite may be run to verify functionality on your platform. Simply
set up the globus environment, chdir to
<code>$GLOBUS_LOCATION/test/globus_ftp_client_test/</code> and run
<code>./TESTS.pl</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-debugging">Debugging</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="sect2">
<h3 id="gridftp-logging">Logging</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>As of Globus 4.2.0, GridFTP server provides system administration logs
in 2 different formats. The CEDPS best practices compliant format is a
new format provided by GridFTP server available in Globus 6.0 and GCT. For more
details on the CEDPS Logging format, see
<a href="http://cedps.net/index.php/LoggingBestPractices">http://cedps.net/index.php/LoggingBestPractices</a>.</p>
</div>
<div class="sect3">
<h4 id="_configuring_cedps_format_system_administration_logs">Configuring CEDPS format system administration logs</h4>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -log-module stdio_ng -log-level info,warn,error -logfile /var/log/gridftp.log</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the logging options, see
<a href="../../gridftp/admin/index.html#globus-gridftp-server">globus-gridftp-server</a>.</p>
</div>
<div class="paragraph">
<p>Sample log file:
<a href="../../gridftp/gridftp.log1">gridftp.log1</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_traditional_format_system_administration_logs">Configuring traditional format system administration logs</h4>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -log-module stdio -log-level info,warn,error -logfile /var/log/gridftp.log</pre>
</div>
</div>
<div class="paragraph">
<p>which is the same as</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -log-level info,warn,error -logfile /var/log/gridftp.log</pre>
</div>
</div>
<div class="paragraph">
<p><strong><code>stdio</code></strong> is the default log-module.</p>
</div>
<div class="paragraph">
<p>Sample log file:
<a href="/toolkit/docs/{$shortversion}/{$version}/data/gridftp/gridftp.log2">gridftp.log2</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_netlogger_style_logging">Netlogger-style logging</h4>
<div class="paragraph">
<p>Apart from the 2 formats mentioned above, GridFTP server can log
netlogger style information for each transfer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-gridftp-server -log-transfer /var/log/gridftp.log</pre>
</div>
</div>
<div class="paragraph">
<p>Sample log file:
<a href="/toolkit/docs/{$shortversion}/{$version}/data/gridftp/gridftp.log3">gridftp.log3</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If you are having problems using the GridFTP server, try the steps
listed below. If you have an error, try checking the server logs if you
have access to them. By default, the server logs to stderr, unless it is
running from inetd, or its execution mode is detached, in which case
logging is disabled by default.</p>
</div>
<div class="paragraph">
<p>The command line options -d , -log-level, -L and -logdir can affect
where logs will be written, as can the configuration file options
log_single and log_unique. See
<a href="../../gridftp/pi/index.html#globus-gridftp-server">globus-gridftp-server</a>
for more
information on these and other configuration options.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-error-codes">Error Codes in GridFTP</h3>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. GridFTP Errors</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">Definition</th>
<th class="tableblock halign-left valign-top">Possible Solutions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>
    globus_ftp_client: the server responded with an error<br>
530 530-globus_xio: Authentication Error<br>
530-OpenSSL Error: s3_srvr.c:2525: in library: SSL routines, <br>
     function SSL3_GET_CLIENT_CERTIFICATE: no certificate returned<br>
530-globus_gsi_callback_module: Could not verify credential<br>
530-globus_gsi_callback_module: Can&#8217;t get the local trusted CA certificate: <br>
Untrusted self-signed certificate in chain with hash d1b603c3<br>
530 End.<br>
</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This error message indicates that the GridFTP server doesn&#8217;t trust the
  certificate authority (CA) that issued your certificate.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You need to ask the GridFTP server administrator to install your CA
certificate chain in the GridFTP server&#8217;s trusted certificates directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> globus_ftp_control: gss_init_sec_context failed<br>
OpenSSL Error: s3_clnt.c:951: in library: SSL routines, function <br>
SSL3_GET_SERVER_CERTIFICATE: certificate verify failed<br>
globus_gsi_callback_module: Could not verify credential<br>
globus_gsi_callback_module: Can&#8217;t get the local trusted CA certificate: <br>
Untrusted self-signed certificate in chain with hash d1b603c3 </code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This error message indicates that your local system doesn&#8217;t trust the
  certificate authority (CA) that issued the certificate on the resource you are
  connecting to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You need to ask the resource administrator which CA issued their certificate
  and  install the CA certificate in the local trusted certificates directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> 530-globus_xio: Authentication Error<br>
  530-globus_gsi_callback_module: Could not verify credential<br>
  530-globus_gsi_callback_module: Could not verify credential<br>
  530-globus_gsi_callback_module: Invalid CRL: The available CRL has expired<br>
  530 End. </code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This error message indicates one of the following:
  Certificate Revocation List (CRL) for the source or destination server CA at
  the client has expired or CRL for client CA has expired at source or
  destination server or CRL for source (destination) server CA has expired at
  destination (source) server. CRL is a file {CA_hash}.r0 in
  /etc/grid-security/certificates or ${USER_HOME}/.globus/certificates or
  ${X509_CERT_DIR}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The tool available at <a href="http://dist.eugridpma.info/distribution/util/fetch-crl/" class="bare">http://dist.eugridpma.info/distribution/util/fetch-crl/</a>
  can be run in a crontab to keep the CRLs up to date.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_establish_control_channel_connection">Establish control channel connection</h3>
<div class="paragraph">
<p>Verify that you can establish a control channel connection and that the
server has started successfully by telnetting to the port on which the
server is running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% telnet localhost 2811
                Trying 127.0.0.1...
                Connected to localhost.
                Escape character is '^]'.
                220 GridFTP Server mldev.mcs.anl.gov 2.0 (gcc32dbg, 1113865414-1) ready.</pre>
</div>
</div>
<div class="paragraph">
<p>If you see anything other than a 220 banner such as the one above, the
server has not started correctly.</p>
</div>
<div class="paragraph">
<p>Verify that there are no configuration files being unexpectedly loaded
from /etc/grid-security/gridftp.conf or
$GLOBUS_LOCATION/etc/gridftp.conf. If those files exist, and you did not
intend for them to be used, rename them to .save, or specify -c none on
the command line and try again.</p>
</div>
<div class="paragraph">
<p>If you can log into the machine where the server is, try running the
server from the command line with only the -s option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$GLOBUS_LOCATION/sbin/globus-gridftp-server -s</pre>
</div>
</div>
<div class="paragraph">
<p>The server will print the port it is listening on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Server listening at gridftp.mcs.anl.gov:57764</pre>
</div>
</div>
<div class="paragraph">
<p>Now try and telnet to that port. If you still do not get the banner
listed above, something is preventing the socket connection. Check
firewalls, tcp-wrapper, etc.</p>
</div>
<div class="paragraph">
<p>If you now get a correct banner, add -p 2811 (you will have to disable
(x)inetd on port 2811 if you are using them or you will get port already
in use):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$GLOBUS_LOCATION/sbin/globus-gridftp-server -s -p 2811</pre>
</div>
</div>
<div class="paragraph">
<p>Now telnet to port 2811. If this does not work, something is blocking
port 2811. Check firewalls, tcp-wrapper, etc.</p>
</div>
<div class="paragraph">
<p>If this works correctly then re-enable your normal server, but remove
all options but -i, -s, or -S.</p>
</div>
<div class="paragraph">
<p>Now telnet to port 2811. If this does not work, something is wrong with
your service configuration. Check /etc/services and (x)inetd config,
have (x)inetd restarted, etc.</p>
</div>
<div class="paragraph">
<p>If this works, begin adding options back one at a time, verifying that
you can telnet to the server after each option is added. Continue this
till you find the problem or get all the options you want.</p>
</div>
<div class="paragraph">
<p>At this point, you can establish a control connection. Now try running
globus-url-copy.</p>
</div>
</div>
<div class="sect2">
<h3 id="_try_running_globus_url_copy">Try running globus-url-copy</h3>
<div class="paragraph">
<p>Once you&#8217;ve verified that you can establish a control connection, try to
make a transfer using globus-url-copy.</p>
</div>
<div class="paragraph">
<p>If you are doing a client/server transfer (one of your URLs has
<code>file:</code> in it) then try: in it) then try:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -vb -dbg gsiftp://host.server.running.on/dev/zero file:///dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>This will run until you control-c the transfer. If that works, reverse
the direction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -vb -dbg file:///dev/zero gsiftp://host.server.running.on/dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>Again, this will run until you control-c the transfer.</p>
</div>
<div class="paragraph">
<p>If you are doing a third party
            transfer, run this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus-url-copy -vb -dbg gsiftp://host.server1.on/dev/zero gsiftp://host.server2.on/dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>Again, this will run until you control-c the transfer.</p>
</div>
<div class="paragraph">
<p>If the above transfers work, try your transfer again. If it fails, you
likely have some sort of file permissions problem, typo in a file name,
etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_if_your_server_starts">If your server starts&#8230;&#8203;</h3>
<div class="paragraph">
<p>If the server has started correctly, and your problem is with a security
failure or gridmap lookup failure, verify that you have security
configured properly
<a href="../../admin/install/index.html#gtadmin-basic-security">here</a>.</p>
</div>
<div class="paragraph">
<p>If the server is running and your client successfully authenticates but
has a problem at some other time during the session, please ask for help
on <a href="http://dev.globus.org/wiki/Mailing%5fLists">gt-user@globus.org</a>. When
you send mail or submit bugs, please always include as much of the
following information as possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specs on all hosts involved (OS, processor, RAM, etc).</p>
</li>
<li>
<p>globus-url-copy -version</p>
</li>
<li>
<p>globus-url-copy -versions</p>
</li>
<li>
<p>Output from the telnet test above.</p>
</li>
<li>
<p>The actual command line you ran with -dbg added. Don&#8217;t worry if the output gets long.</p>
</li>
<li>
<p>Check that you are getting a FQDN and /etc/hosts that is sane.</p>
</li>
<li>
<p>The server configuration and setup (/etc/services entries, (x)inetd configs, etc.).</p>
</li>
<li>
<p>Any relevant lines from the server logs (not the entire log please).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-troubleshooting-latency">High latency for GridFTP server connections</h3>
<div class="paragraph">
<p>If you run GridFTP servers via Xinetd and notice high latency for
connections and/or transfers, check if <code>/etc/xinetd.conf</code> or the
gsiftp service configuration inside  or the gsiftp service configuration
inside <code>/etc/xinetd.d</code> is set to log USERID as follows:  is set to log
USERID as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>log_on_success += USERID
log_on_failure += USERID</pre>
</div>
</div>
<div class="paragraph">
<p>Such a configuration tells Xinetd to log the remote user using the
method defined in RFC 1413, which causes an ident client to attempt to
query the machine that the connection is coming from before the service
will run. Even when this succeeds, the response can&#8217;t be trusted, and
more often than not it is rejected or simply dropped (which results in
the longest delays) by the remote firewall.</p>
</div>
<div class="paragraph">
<p>Latency can be reduced by making sure Xinetd does <strong>not</strong> log the
USERID.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-usage">Usage statistics collection by the Globus Alliance</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="sect2">
<h3 id="gridftp-usage-stats">GridFTP-specific usage statistics</h3>
<div class="paragraph">
<p>The following GridFTP-specific usage statistics are sent in a UDP packet
at the end of each transfer, in addition to the standard header
information described in the
<a href="/toolkit/docs/{$shortversion}/{$version}/Usage_Stats.html">Usage
Stats</a> section.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start time of the transfer</p>
</li>
<li>
<p>End time of the transfer</p>
</li>
<li>
<p>Version string of the server</p>
</li>
<li>
<p>TCP buffer size used for the transfer</p>
</li>
<li>
<p>Block size used for the transfer</p>
</li>
<li>
<p>Total number of bytes transferred</p>
</li>
<li>
<p>Number of parallel streams used for the transfer</p>
</li>
<li>
<p>Number of stripes used for the transfer</p>
</li>
<li>
<p>Type of transfer (STOR, RETR, LIST)</p>
</li>
<li>
<p>FTP response code&#8201;&#8212;&#8201;Success or failure of the transfer</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The client (globus-url-copy) does NOT send any data. It is the <strong>servers</strong> that send the usage statistics.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We have made a concerted effort to collect only data that is not too
intrusive or private and yet still provides us with information that
will help improve and gauge the usage of the GridFTP server.
Nevertheless, if you wish to disable this feature for GridFTP only, use
the <em>-disable-usage-stats</em> option of
<a href="../../gridftp/admin/index.html#globus-gridftp-server">globus-gridftp-server</a>.
Note that you can disable transmission of usage statistics globally for
all C components by setting "GLOBUS_USAGE_OPTOUT=1" in your environment.</p>
</div>
<div class="paragraph">
<p>Also, please see our
<a href="/toolkit/docs/latest-stable/Usage_Stats.html">policy statement</a> on
the collection of usage statistics.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-command">Appendix A: GridFTP Admin Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="sect2">
<h3 id="_globus_gridftp_server_8">GLOBUS-GRIDFTP-SERVER(8)</h3>
<div class="sect3">
<h4 id="_name">NAME</h4>
<div class="paragraph">
<p>globus-gridftp-server - The Globus GridFTP server daemon</p>
</div>
</div>
<div class="sect3">
<h4 id="_synopsis">SYNOPSIS</h4>
<div class="paragraph">
<p>globus-gridftp-server OPTIONS</p>
</div>
</div>
<div class="sect3">
<h4 id="_description">DESCRIPTION</h4>
<div class="paragraph">
<p>The <strong>globus-gridftp-server</strong> program is a ftp server with support for GridFTP
protocol extensions, including strong authentication, parallel data transfers,
and parallel data layouts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_options">OPTIONS</h4>
<div class="paragraph">
<p>The list below contains the command-line options for the server, and also the name of the configuration file entry that implements that option. Note that any boolean option can be negated on the command line by preceding the specified option with <em>-no-</em> or <em>-n</em>.  example: <code>-no-cas</code> or <code>-nf</code>.</p>
</div>
<div class="sect4">
<h5 id="_informational_options">Informational Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-h,-help</strong></dt>
<dd>
<p>Show usage information and exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>help</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-hh,-longhelp</strong></dt>
<dd>
<p>Show more usage information and exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>longhelp</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-v,-version</strong></dt>
<dd>
<p>Show version information for the server and exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>version</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-V,-versions</strong></dt>
<dd>
<p>Show version information for all loaded globus libraries and exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>versions</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_modes_of_operation">Modes of Operation</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-i,-inetd</strong></dt>
<dd>
<p>Run under an inetd service.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>inetd</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-s,-daemon</strong></dt>
<dd>
<p>Run as a daemon.  All connections will fork off a new process and setuid if allowed.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>daemon</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-S,-detach</strong></dt>
<dd>
<p>Run as a background daemon detached from any controlling terminals.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>detach</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ssh</strong></dt>
<dd>
<p>Run over a connected ssh session.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ssh</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-exec string</strong></dt>
<dd>
<p>For statically compiled or non-GLOBUS_LOCATION standard binary locations, specify the full path of the server binary here.  Only needed when run in daemon mode.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>exec</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-chdir</strong></dt>
<dd>
<p>Change directory when the server starts. This will change directory to the dir specified by the chdir_to option.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>chdir</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-chdir-to string</strong></dt>
<dd>
<p>Directory to chdir to after starting.  Will use / if not set.  Note that this is the directory of the process, not the client&#8217;s home directory.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>chdir_to</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-threads number</strong></dt>
<dd>
<p>Enable threaded operation and set the number of threads.  The default is 0, which is non-threaded.  When threading is required, a thread count of 1 or 2 should be sufficient.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>threads</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-f,-fork</strong></dt>
<dd>
<p>Server will fork for each new connection.  Disabling this option is only recommended when debugging. Note that non-forked servers running as <em>root</em> will only accept a single connection, and then exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>fork</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-1,-single</strong></dt>
<dd>
<p>Exit after a single connection.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>single</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-chroot-path string</strong></dt>
<dd>
<p>Path to become the new root after authentication.  This path must contain a valid certificate structure, /etc/passwd, and /etc/group.  The command globus-gridftp-server-setup-chroot can help create a suitable directory structure.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>chroot_path</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_authentication_authorization_and_security_options">Authentication, Authorization, and Security Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-auth-level number</strong></dt>
<dd>
<p>Add levels together to use more than one.</p>
<div class="ulist">
<ul>
<li>
<p>0 = Disables all authorization checks.</p>
</li>
<li>
<p>1 = Authorize identity.</p>
</li>
<li>
<p>2 = Authorize all file/resource accesses.</p>
</li>
<li>
<p>4 = Disable changing process uid to authenticated user (no setuid)&#8201;&#8212;&#8201;DO NOT use this when process is started as root.</p>
<div class="paragraph">
<p>If not set uses level 2 for front ends and level 1 for data nodes.  Note that levels 2 and 4 imply level 1 as well.</p>
</div>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>auth_level</code>.</p>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-allow-from string</strong></dt>
<dd>
<p>Only allow connections from these source ip addresses.  Specify a comma separated list of ip address fragments.  A match is any ip address that starts with the specified fragment.  Example: <em>192.168.1.</em> will match and allow a connection from 192.168.1.45.  Note that if this option is used any address not specifically allowed will be denied.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_allow_from</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-deny-from string</strong></dt>
<dd>
<p>Deny connections from these source ip addresses. Specify a comma separated list of ip address fragments.  A match is any ip address that starts with the specified fragment.  Example: <em>192.168.2.</em> will match and deny a connection from 192.168.2.45.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_deny_from</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-allow-from string</strong></dt>
<dd>
<p>Only allow connections from these source ip addresses.  Specify a comma separated list of ip address fragments.  A match is any ip address that starts with the specified fragment.  Example: <em>192.168.1.</em> will match and allow a connection from 192.168.1.45.  Note that if this option is used any address not specifically allowed will be denied.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allow_from</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-deny-from string</strong></dt>
<dd>
<p>Deny connections from these source ip addresses. Specify a comma separated list of ip address fragments.  A match is any ip address that starts with the specified fragment.  Example: <em>192.168.2.</em> will match and deny a connection from 192.168.2.45.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>deny_from</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-si,-secure-ipc</strong></dt>
<dd>
<p>Use GSI security on ipc channel.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>secure_ipc</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ia string,-ipc-auth-mode string</strong></dt>
<dd>
<p>Set GSI authorization mode for the ipc connection. Options are: none, host, self or subject:[subject].</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_auth_mode</code>.
    The default value of this option is <code>host</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-aa,-allow-anonymous</strong></dt>
<dd>
<p>Allow clear text anonymous access. If server is running as root anonymous_user must also be set.  Disables ipc security.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allow_anonymous</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-anonymous-names-allowed string</strong></dt>
<dd>
<p>Comma separated list of names to treat as anonymous users when allowing anonymous access.  If not set, the default names of <em>anonymous</em> and <em>ftp</em> will be allowed.  Use <em>*</em> to allow any username.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>anonymous_names_allowed</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-anonymous-user string</strong></dt>
<dd>
<p>User to setuid to for an anonymous connection. Only applies when running as root.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>anonymous_user</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-anonymous-group string</strong></dt>
<dd>
<p>Group to setgid to for an anonymous connection. If unset, the default group of anonymous_user will be used.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>anonymous_group</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-dn string</strong></dt>
<dd>
<p>Allow sharing when using the supplied DN.  A client connected with these credentials will be able to access any user for which sharing is enabled.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_dn</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-state-dir string</strong></dt>
<dd>
<p>Full path to a directory that will contain files used by GridFTP to control sharing access for individual local accounts. The special variables <em>$HOME</em> and <em>$USER</em> can be used to create a dynamic path that is unique to each local account.  This pathmust be writable by the associated account. The default path is <em>$HOME/.globus/sharing/</em>.  This must refer to a path on the filesystem, not a path that is only accessible via a DSI plugin.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_state_dir</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-control</strong></dt>
<dd>
<p>Allow a local user account to control its own sharing access via special GridFTP client commands.  The user account must have filesystem write access to the sharing state dir.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_control</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-rp string</strong></dt>
<dd>
<p>Sharing specific path restrictions.  This completely replaces the normal path restrictions (-rp) when an account is being shared by a sharing-dn login.Follows normal path restriction semantics.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_rp</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-users-allow string</strong></dt>
<dd>
<p>Comma separated list of usernames that are allowed to share unless matched in the user deny lists.  If this list is set, users that are not included will be denied unless matched in the group allow list.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_users_allow</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-users-deny string</strong></dt>
<dd>
<p>Comma separated list of usernames that are denied sharing even if matched in the user or group allow lists.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_users_deny</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-groups-allow string</strong></dt>
<dd>
<p>Comma separated list of groups whose members are allowed to share unless matched in the user or group deny lists.  If this list is set, groups that are not included will be denied unless matched in the user allow list.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_groups_allow</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sharing-groups-deny string</strong></dt>
<dd>
<p>Comma separated list of groups whose members will be denied sharing unless matched in the user allow list.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sharing_groups_deny</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-allow-root</strong></dt>
<dd>
<p>Allow clients to be mapped to the root account.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allow_root</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-allow-disabled-login</strong></dt>
<dd>
<p>Do not check if a user&#8217;s system account is disabled before allowing login.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allow_disabled_login</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-password-file string</strong></dt>
<dd>
<p>Enable clear text access and authenticate users against this /etc/passwd formatted file.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>pw_file</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-connections-max number</strong></dt>
<dd>
<p>Maximum concurrent connections allowed.  Only applies when running in daemon mode.  Unlimited if not set.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>connections_max</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-connections-disabled</strong></dt>
<dd>
<p>Disable all new connections.  For daemon mode, issue a SIGHUP to the server process after changing the config file in order to not affect ongoing connections.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>connections_disabled</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-offline-msg string</strong></dt>
<dd>
<p>Custom message to be displayed to clients when the server is offline via the connections_disabled or connections_max = 0 options.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>offline_msg</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-disable-command-list string</strong></dt>
<dd>
<p>A comma separated list of client commands that will be disabled.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>disable_command_list</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-authz-callouts,-cas</strong></dt>
<dd>
<p>Enable the GSI authorization callout framework, for callouts such as CAS.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>cas</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-use-home-dirs</strong></dt>
<dd>
<p>Set the starting directory to the authenticated users home dir.  Disabling this is the same as setting <em>-home-dir /</em>.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>use_home_dirs</code>.
    The default value of this option is <code>TRUE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-home-dir string</strong></dt>
<dd>
<p>Set a path to override the system defined home/starting directory for authenticated users.  The special variable strings <em>$USER</em> and <em>$HOME</em> may be used.  The authenticated username will be substituted for $USER, and the user&#8217;s real home dir will be substituted for $HOME.  Be sure to escape the $ character if using these on the command line.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>home_dir</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-rp string,-restrict-paths string</strong></dt>
<dd>
<p>A comma separated list of full paths that clients may access.  Each path may be prefixed by R and/or W, denoting read or write access, otherwise full access is granted.  If a given path is a directory, all contents and subdirectories will be given the same access.  Order of paths does not matter&#8201;&#8212;&#8201;the permissions on the longest matching path will apply.  The special character <em>\~</em> will be replaced by the authenticated user&#8217;s home directory, or the <em>-home-dir</em> option, if used. Note that if the home directory is not accessible, <em>\~</em> will be set to <em>/</em>.  By default all paths are allowed, and access control is handled by the OS. In a striped or split process configuration, this should be set on both the frontend and data nodes.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>restrict_paths</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-rp-follow-symlinks</strong></dt>
<dd>
<p>Do not verify that a symlink points to an allowed path before following.  By default, symlinks are followed only when they point to an allowed path.  By enabling this option, symlinks will be followed even if they point to a path that is otherwise restricted.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>rp_follow_symlinks</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-em string,-acl string</strong></dt>
<dd>
<p>A comma separated list of ACL or event modules to load.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>acl</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_logging_options">Logging Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-d string,-log-level string</strong></dt>
<dd>
<p>Log level. A comma separated list of levels from: <em>ERROR, WARN, INFO, TRANSFER, DUMP, ALL</em>. TRANSFER includes the same statistics that are sent to the separate transfer log when -log-transfer is used.  Example: error,warn,info. You may also specify a numeric level of 1-255.  The default level is ERROR.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_level</code>.
    The default value of this option is <code>ERROR</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-log-module string</strong></dt>
<dd>
<p>globus_logging module that will be loaded. If not set, the default <em>stdio</em> module will be used, and the logfile options apply.  Built in modules are <em>stdio</em> and <em>syslog</em>.  Log module options may be set by specifying module:opt1=val1:opt2=val2.  Available options for the built in modules are <em>interval</em> and <em>buffer</em>, for buffer flush interval and buffer size, respectively. The default options are a 64k buffer size and a 5 second flush interval.  A 0 second flush interval will disable periodic flushing, and the buffer will only flush when it is full.  A value of 0 for buffer will disable buffering and all messages will be written immediately.  Example: -log-module stdio:buffer=4096:interval=10</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_module</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-l string,-logfile string</strong></dt>
<dd>
<p>Path of a single file to log all activity to.  If neither this option or log_unique is set, logs will be written to stderr unless the execution mode is detached or inetd, in which case logging will be disabled.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_single</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-L string,-logdir string</strong></dt>
<dd>
<p>Partial path to which <em>gridftp.(pid).log</em> will be appended to construct the log filename. Example: -L /var/log/gridftp/ will create a separate log ( /var/log/gridftp/gridftp.xxxx.log ) for each process (which is normally each new client session).  If neither this option or log_single is set, logs will be written to stderr unless the execution mode is detached or inetd, in which case logging will be disabled.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_unique</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-Z string,-log-transfer string</strong></dt>
<dd>
<p>Log netlogger style info for each transfer into this file.  You may also use the log-level of TRANSFER to include this info in the standard log.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_transfer</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-log-filemode string</strong></dt>
<dd>
<p>File access permissions of log files. Should be an octal number such as 0644.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>log_filemode</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-disable-usage-stats</strong></dt>
<dd>
<p>Disable transmission of per-transfer usage statistics.  See the Usage Statistics section in the online documentation for more information.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>disable_usage_stats</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-usage-stats-target string</strong></dt>
<dd>
<p>Comma separated list of contact strings (host:port) for usage statistics receivers.  The usage stats sent to a particular receiver may be customized by configuring it with a taglist (host:port!taglist)  The taglist is a list of characters that each correspond to a usage stats tag.  When this option is unset, stats are reported to usage-stats.globus.org:4810.  If you set your own receiver, and wish to continue reporting to the Globus receiver, you will need to add it manually.  The list of available tags follow. Tags marked * are reported by default.</p>
<div class="literalblock">
<div class="content">
<pre>*(e) START - start time of transfer
*(E) END - end time of transfer
*(v) VER - version string of GridFTP server
*(b) BUFFER - tcp buffer size used for transfer
*(B) BLOCK - disk blocksize used for transfer
*(N) NBYTES - number of bytes transferred
*(s) STREAMS - number of parallel streams used
*(S) STRIPES - number of stripes used
*(t) TYPE - transfer command: RETR, STOR, LIST, etc
*(c) CODE - ftp result code (226 = success, 5xx = fail)
*(D) DSI - DSI module in use
*(A) EM - event modules in use
*(T) SCHEME - ftp, gsiftp, sshftp, etc. (client supplied)
*(a) APP - guc, rft, generic library app, etc. (client supplied)
*(V) APPVER - version string of above. (client supplied)
(f) FILE - name of file/data transferred
(i) CLIENTIP - ip address of host running client (control channel)
(I) DATAIP - ip address of source/dest host of data (data channel)
(u) USER - local user name the transfer was performed as
(d) USERDN - DN that was mapped to user id
(C) CONFID - ID defined by -usage-stats-id config option
(U) SESSID - unique id that can be used to match transfers in a session and
    transfers across source/dest of a third party transfer. (client supplied)</pre>
</div>
</div>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>usage_stats_target</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-usage-stats-id string</strong></dt>
<dd>
<p>Identifying tag to include in usage statistics data.  If this is set and usage-stats-target is unset, CONFID will be added to the default usage stats data.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>usage_stats_id</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_single_and_striped_remote_data_node_options">Single and Striped Remote Data Node Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-r string,-remote-nodes string</strong></dt>
<dd>
<p>Comma separated list of remote node contact strings.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>remote_nodes</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-hybrid</strong></dt>
<dd>
<p>When a server is configured for striped operation with the <em>remote_nodes</em> option, both a frontend and backend process are started even if the client does not request multiple stripes.  This option will start backend processes only when striped operation is requested by the client, while servicing non-striped requests with a single frontend process.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>hybrid</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-dn,-data-node</strong></dt>
<dd>
<p>This server is a backend data node.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>data_node</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sbs number,-stripe-blocksize number</strong></dt>
<dd>
<p>Size in bytes of sequential data that each stripe will transfer.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>stripe_blocksize</code>.
    The default value of this option is <code>1048576</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-stripe-count number</strong></dt>
<dd>
<p>Number of number stripes to use per transfer when this server controls that number.  If remote nodes are statically configured (via -r or remote_nodes), this will be set to that number of nodes, otherwise the default is 1.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>stripe_count</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sl number,-stripe-layout number</strong></dt>
<dd>
<p>Stripe layout.
    1 = Partitioned
   2 = Blocked.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>stripe_layout</code>.
    The default value of this option is <code>2</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-stripe-blocksize-locked</strong></dt>
<dd>
<p>Do not allow client to override stripe blocksize with the OPTS RETR command</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>stripe_blocksize_locked</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-stripe-layout-locked</strong></dt>
<dd>
<p>Do not allow client to override stripe layout with the OPTS RETR command</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>stripe_layout_locked</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_disk_options">Disk Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-bs number,-blocksize number</strong></dt>
<dd>
<p>Size in bytes of data blocks to read from disk before posting to the network.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>blocksize</code>.
    The default value of this option is <code>262144</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-sync-writes</strong></dt>
<dd>
<p>Flush disk writes before sending a restart marker.  This attempts to ensure that the range specified in the restart marker has actually been committed to disk. This option will probably impact performance, and may result in different behavior on different storage systems. See the manpage for sync() for more information.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>sync_writes</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-perms string</strong></dt>
<dd>
<p>Set the default permissions for created files. Should be an octal number such as 0644.  The default is 0644.  Note: If umask is set it will affect this setting&#8201;&#8212;&#8201;i.e. if the umask is 0002 and this setting is 0666, the resulting files will be created with permissions of 0664.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>perms</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-file-timeout number</strong></dt>
<dd>
<p>Timeout in seconds for all disk accesses.  A value of 0 disables the timeout.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>file_timeout</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_network_options">Network Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p number,-port number</strong></dt>
<dd>
<p>Port on which a frontend will listen for client control channel connections, or on which a data node will listen for connections from a frontend.  If not set a random port will be chosen and printed via the logging mechanism.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>port</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-control-interface string</strong></dt>
<dd>
<p>Hostname or IP address of the interface to listen for control connections on. If not set will listen on all interfaces.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>control_interface</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-data-interface string</strong></dt>
<dd>
<p>Hostname or IP address of the interface to use for data connections. If not set will use the current control interface.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>data_interface</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-interface string</strong></dt>
<dd>
<p>Hostname or IP address of the interface to use for ipc connections. If not set will listen on all interfaces.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_interface</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-hostname string</strong></dt>
<dd>
<p>Effectively sets the above control_interface, data_interface and ipc_interface options.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>hostname</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-port number</strong></dt>
<dd>
<p>Port on which the frontend will listen for data node connections.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_port</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-control-preauth-timeout number</strong></dt>
<dd>
<p>Time in seconds to allow a client to remain connected to the control channel without activity before authenticating.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>control_preauth_timeout</code>.
    The default value of this option is <code>120</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-control-idle-timeout number</strong></dt>
<dd>
<p>Time in seconds to allow a client to remain connected to the control channel without activity.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>control_idle_timeout</code>.
    The default value of this option is <code>600</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-idle-timeout number</strong></dt>
<dd>
<p>Idle time in seconds before an unused ipc connection will close.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_idle_timeout</code>.
    The default value of this option is <code>900</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-ipc-connect-timeout number</strong></dt>
<dd>
<p>Time in seconds before canceling an attempted ipc connection.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>ipc_connect_timeout</code>.
    The default value of this option is <code>60</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-allow-udt</strong></dt>
<dd>
<p>Enable protocol support for UDT with NAT traversal if the udt driver is available.  Requires threads.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allow_udt</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-port-range string</strong></dt>
<dd>
<p>Port range to use for incoming connections. The format is "startport,endport". This, along with -data-interface, can be used to enable operation behind a firewall and/or when NAT is involved. This is the same as setting the environment variable GLOBUS_TCP_PORT_RANGE.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>port_range</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_user_messages">User Messages</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-banner string</strong></dt>
<dd>
<p>Message to display to the client before authentication.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>banner</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-banner-file string</strong></dt>
<dd>
<p>File to read banner message from.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>banner_file</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-banner-terse</strong></dt>
<dd>
<p>When this is set, the minimum allowed banner message will be displayed to unauthenticated clients.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>banner_terse</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-banner-append</strong></dt>
<dd>
<p>When this is set, the message set in the <em>banner</em> or <em>banner_file</em> option will be appended to the default banner message rather than replacing it.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>banner_append</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-version-tag string</strong></dt>
<dd>
<p>Add an identifying string to the existing toolkit version.  This is displayed in the default banner message, the SITE VERSION command, and usage stats.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>version_tag</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-login-msg string</strong></dt>
<dd>
<p>Message to display to the client after authentication.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>login_msg</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-login-msg-file string</strong></dt>
<dd>
<p>File to read login message from.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>login_msg_file</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_module_options">Module Options</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-dsi string</strong></dt>
<dd>
<p>Data Storage Interface module to load. File and remote modules are defined by the server. If not set, the file module is loaded, unless the <em>remote</em> option is specified, in which case the remote module is loaded.  An additional configuration string can be passed to the DSI using the format [module name]:[configuration string] to this option.  The format of the configuration string is defined by the DSI being loaded.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>load_dsi_module</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-allowed-modules string</strong></dt>
<dd>
<p>Comma separated list of ERET/ESTO modules to allow, and optionally specify an alias for. Example: module1,alias2:module2,module3 (module2 will be loaded when a client asks for alias2).</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>allowed_modules</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-dc-whitelist string</strong></dt>
<dd>
<p>A comma separated list of drivers allowed on the network stack.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>dc_whitelist</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-fs-whitelist string</strong></dt>
<dd>
<p>A comma separated list of drivers allowed on the disk stack.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>fs_whitelist</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-popen-whitelist string</strong></dt>
<dd>
<p>A comma separated list of programs that the popen driver is allowed to execute, when used on the network or disk stack.  An alias may also be specified, so that a client does not need to specify the full path. Format is [alias:]prog,[alias:]prog. example: /bin/gzip,tar:/bin/tar</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>popen_whitelist</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-xnetmgr string</strong></dt>
<dd>
<p>An option string to pass to the XIO Network Manager Driver, which will then be loaded for all data channel connections.  This must be in the form "manager=module;option1=value;option2=value;".  See the Network Manager documentation for more info.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>xnetmgr</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-dc-default string</strong></dt>
<dd>
<p>A comma separated list of XIO drivers and options representing the default network stack. Format is of each driver entry is driver1[:opt1=val1;opt2=val2;&#8230;&#8203;]. The bottom of the stack, the transport driver, is always first.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>dc_default</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-fs-default string</strong></dt>
<dd>
<p>A comma separated list of XIO drivers and options representing the default disk stack. Format is of each driver entry is driver1[:opt1=val1;opt2=val2;&#8230;&#8203;]. The bottom of the stack, the transport driver, is always first.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>fs_default</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_other">Other</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-c string</strong></dt>
<dd>
<p>Path to main configuration file that should be loaded.  Otherwise will attempt to load $GLOBUS_LOCATION/etc/gridftp.conf and /etc/grid-security/gridftp.conf.</p>
</dd>
<dt class="hdlist1"><strong>-C string</strong></dt>
<dd>
<p>Path to directory holding configuration files that should be loaded. Files will be loaded in alphabetical order, and in the event of duplicate parameters the last loaded file will take precedence.  Files with a <em>.</em> in the name (file.bak, file.rpmsave, etc.) will be ignored.  Note that the main configuration file, if one exists, will always be loaded last.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>config_dir</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-config-base-path string</strong></dt>
<dd>
<p>Base path to use when config and log path options are not full paths. By default this is the current directory when the process is started.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>config_base_path</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-debug</strong></dt>
<dd>
<p>Sets options that make server easier to debug.  Forces no-fork, no-chdir, and allows core dumps on bad signals instead of exiting cleanly. Not recommended for production servers.  Note that non-forked servers running as <em>root</em> will only accept a single connection, and then exit.</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>debug</code>.
    The default value of this option is <code>FALSE</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-pidfile string</strong></dt>
<dd>
<p>Write PID of the GridFTP server to this path. May contain variable references to ${localstatedir}</p>
<div class="paragraph">
<p>This option can also be set in the configuration file as <code>pidfile</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exit_status">EXIT STATUS</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Successful program execution.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="globus-gridftp-server-setup-chroot">GLOBUS-GRIDFTP-SERVER-SETUP-CHROOT(8)</h3>
<div class="sect3">
<h4 id="_name_2">NAME</h4>
<div class="paragraph">
<p>globus-gridftp-server-setup-chroot - Set up a chroot for the Globus GridFTP server</p>
</div>
</div>
<div class="sect3">
<h4 id="_synopsis_2">SYNOPSIS</h4>
<div class="paragraph">
<p>globus-gridftp-server-setup-chroot [-h] [-c CERT-DIR] -r NEW-CHROOT</p>
</div>
</div>
<div class="sect3">
<h4 id="_description_2">DESCRIPTION</h4>
<div class="paragraph">
<p>The <strong>globus-gridftp-server-setup-chroot</strong> program creates a chroot directory
tree that can be used for the <strong>globus-gridftp-server</strong>(8). This chroot contains
a copy of essential POSIX devices in dev; hosts, group, passwd, and
grid-security configuration files in etc; and a temporary file directory in
tmp.</p>
</div>
<div class="paragraph">
<p>The <em>-c CERT-DIR</em> option copies certificate files from a different
directory than the default [/etc/grid-security/certificates].</p>
</div>
</div>
<div class="sect3">
<h4 id="_options_2">OPTIONS</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-h</strong></dt>
<dd>
<p>Print short usage and exit</p>
</dd>
<dt class="hdlist1"><strong>-r NEW-CHROOT</strong></dt>
<dd>
<p>Specify the new chroot directory to create.</p>
</dd>
<dt class="hdlist1"><strong>-c CERT-DIR</strong></dt>
<dd>
<p>Specify the trusted certificate dir source.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_exit_status_2">EXIT STATUS</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Successful program execution.</p>
</dd>
<dt class="hdlist1">1</dt>
<dd>
<p>Error</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_author">AUTHOR</h4>
<div class="paragraph">
<p>Copyright &#169; 1999-2015 University of Chicago</p>
</div>
</div>
<div class="sect3">
<h4 id="_see_also">SEE ALSO</h4>
<div class="paragraph">
<p><strong>globus-gridftp-server</strong>(8)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-SRB">Appendix B: GCT 6.0 GridFTP: Setting up Storage Resource Broker (SRB)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gridftp-SRB-intro">Introduction</h3>
<div class="paragraph">
<p>The Storage Resource Broker Data Storage Interface (SRB-DSI) is an
extension to the GridFTP server that allows it to interact with SRB.
Plugging this extension into a GridFTP server allows the GridFTP server
to access a SRB resource and serve it to any GridFTP client as though it
were a filesystem.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-architecture">Architecture</h3>
<div class="paragraph">
<p><span class="image"><img src="srb-dsi.png" alt="srb dsi"></span></p>
</div>
<div class="paragraph">
<p>The above image shows the architecture of the system. There are 4 major
components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SRB Server </strong>- This is where the data is stored. It is accessed by the GridFTP server via the standard SRB protocols using GSI_AUTH.</p>
</li>
<li>
<p><strong>SRB-DSI</strong> - This component is the bridge between GridFTP and SRB. All operation requests and data are routed through this component. The GridFTP server makes requests of it, then it translates these requests into SRB client commands.</p>
</li>
<li>
<p><strong>GridFTP Server</strong> - A standard GridFTP 6.0 server is loaded with the SRB-DSI. Clients contact this server to access data in a SRB resource. The server passes the request to the SRB-DSI which, as described above, passes the request on to the SRB server. The responses to the requests return along the same path.</p>
</li>
<li>
<p><strong>GridFTP Client </strong>- A stock GridFTP client (like <strong><code>globus-url-copy</code></strong>). No modifications to the client are needed.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-software">Software</h3>
<div class="paragraph">
<p>You need the following items to use the SRB-DSI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Grid Community Toolkit</strong> - You need the GridFTP distributed with GT or GCT (compatible with 4.0.1 or later). You can find that <a href="http://www.globus.org/toolkit/downloads/{$version}/">here</a>.</p>
</li>
<li>
<p><strong>SRB Client 3.4.0</strong> - You only need the client libraries to build the SRB-DSI, but you will need access to a running SRB server and resource. You can find the client libraries <a href="http://www.sdsc.edu/srb/tarfiles/main.html">here</a>.</p>
</li>
<li>
<p><strong>SRB-DSI </strong>- You can find the SRB-DSI <a href="http://www-unix.mcs.anl.gov/~bresnaha/SRB%5fDSI%5fDoc/globus%5fsrb%5fdsi-latest.tar.gz">here</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-building">Building</h3>
<div class="paragraph">
<p>Instructions for building <a href="../../admin/install/index.html">GCT</a>
and <a href="http://www.sdsc.edu/srb">SRB</a> are well documented in the above links.
The following sections describe one way of building these two packages.
However, if any questions or errors are discovered, the reader should
look to the above links for solutions.</p>
</div>
<div class="sect3">
<h4 id="gridftp-SRB-building-globus">Building GCT</h4>
<div class="paragraph">
<p>Download the source installer, choose a path on your filesystem for your
<code>GLOBUS_LOCATION</code>, and run the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% bunzip2 gtversion-all-source-installer.tar.bz2
% tar -xvf gtversion-all-source-installer.tar
% export GLOBUS_LOCATION=&lt;path you chose for your GLOBUS_LOCATION&gt;
% ./configure --prefix=$GLOBUS_LOCATION
% make gridftp globus_gridftp_server-thr
% source $GLOBUS_LOCATION/etc/globus-user-env.sh</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-SRB-building-SRB">Building SRB</h4>
<div class="listingblock">
<div class="content">
<pre>% ./configure  --enable-gsi-auth --enable-globus-location=$GLOBUS_LOCATION --enable-globus-flavor=&lt;a threaded globus flavor&gt;
% make</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-SRB-building-SRBDSI">Building SRB-DSI</h4>
<div class="paragraph">
<p>The SRB-DSI is a GPT package. More information about GPT package
installation can be found <a href="http://www.gridpackagingtools.org/">here</a>. Most
users should simply need:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpt-build -force CONFIGOPTS_GPTMACRO="--with-srb-path=&lt;location of SRB source tree&gt;"  globus_srb_dsi-0.13.tar.gz &lt;threaded flavor&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-administration">Administration</h3>
<div class="paragraph">
<p>Before you can run the GridFTP server with the SRB-DSI, you need to set
up some files.</p>
</div>
<div class="sect3">
<h4 id="gridftp-SRB-config-file">Creating and setting up the SRB configuration file</h4>
<div class="paragraph">
<p>A configuration file must be created at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$GLOBUS_LOCATION/etc/gridftp_srb.conf</pre>
</div>
</div>
<div class="paragraph">
<p>The following values must be set in this file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>srb_hostname &lt;host&gt;:&lt;port&gt;
srb_hostname_dn &lt;domain name to expect from SRB server&gt;
srb_default_resource &lt;default srb resource to use&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-SRB-gridmap-file">Setting up the gridmap file</h4>
<div class="paragraph">
<p>Additionally, the gridmap file must be special for this DSI. Along with
the subject name and username, the SRB-DSI needs to know the SRB domain
name for the user. This is handled by adding an additional value to the
gridmap file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"&lt;user security DN&gt;" &lt;srb user name&gt;@&lt;domain name&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-running">Running</h3>
<div class="paragraph">
<p>Once you have the configuration files in place, you can run the server.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>All options of the server apply, but the parameter <code>-dsi srb -auth-level 4</code><strong>must</strong> also be used.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on setting these values and running the GridFTP
server see <a href="../../gridftp/admin/index.html#gridftp-configuring">Configuring
GridFTP</a>.</p>
</div>
<div class="paragraph">
<p>Most users can run with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$GLOBUS_LOCATION/sbin/globus-gridftp-server -p &lt;port&gt; -dsi srb -auth-level 4</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-SRB-seealso">See Also</h3>
<div class="paragraph">
<p>See the
<a href="http://www-unix.mcs.anl.gov/~bresnaha/SRB%5fDSI%5fDoc/README.txt">README</a>
file for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-gfork-master">Appendix C: Running the Globus GridFTP Server With GFork</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gridftp-gfork-master-intro">Introduction</h3>
<div class="paragraph">
<p>GFork is a user-configurable super-server daemon very similar to xinetd
in that it listens on a TCP port. When clients connect to a port, it
runs an administrator-defined program which services that client
connection, just as xinetd does.</p>
</div>
<div class="paragraph">
<p>An unfortunate drawback to xinetd is that there is no way to maintain or
share long-term information. Every time a client connects, a new process
is created; and every time that client disconnects, the process is
destroyed. All of the information regarding the specific interactions
with a given client is lost with these transient processes. A further
disadvantage is that there is no way for these service instances to
share service-specific information with each other while they are
running.</p>
</div>
<div class="paragraph">
<p>There are times when it is useful for a service to maintain long-term
service-specific state, or for a service to share state across client
connections. GFork is designed to address this situation. GFork runs a
long term master program (that is user-defined) and forms communication
links via UNIX pipes between this process and all client connection
child processes. This allows long-term state to be maintained in memory
and allows for communication between all nodes.</p>
</div>
<div class="paragraph">
<p>Associated with a GFork instance is a master process. When GFork starts,
it runs a user-defined master program and opens up bi-directional pipes
to it. The master program runs for the lifetime of the GFork daemon. The
master is free to do whatever it wants; it is a user-defined program.
Some master programs listen on alternative TCP connections to have state
remotely injected. Others monitor system resources, such as memory, in
order to best share resources. As clients connect to the TCP listener,
child processes are forked which then service the client connection.
Bi-directional pipes are opened up to the child processes as well. These
pipes allow for communication between the master program and all child
processes. The master program and the child programs have their own
protocol for information exchange over these links. GFork is just a
framework for safely and quickly creating these links.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-gfork-master-use-case">Use Cases</h3>
<div class="paragraph">
<p>The creation of GFork was motivated by the Globus GridFTP server.
GridFTP can be run as a striped server where there is a frontend and
several backends. The backends run in tandem to transfer files faster by
tying together many NICs. The frontend is the contact point for the
client where transfer requests are made. When the frontend is run out of
inetd, the list of possible backends must be statically configured.
Unfortunately, backends tend to come and go. Sometimes backends fail,
and sometimes backends are added to a pool. We needed a way to have a
[fixme good synopsis: dynamic pool of backends for use in live
transfers]. To accomplish this we created GFork.</p>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-gfork-config">Configuration</h3>
<div class="paragraph">
<p>A major difference between GFork configuration and xinetd is that GFork
only runs one service per instance, where xinetd runs many services per
instance all associated with many different ports. GFork takes a single
configuration file and handles a single service. If there is demand,
GFork will be enhanced to handle many services in the way that xinetd
does.</p>
</div>
<div class="paragraph">
<p>Running the globus-gridftp-server under GFork is almost identical to
running it under xinetd. First, you need a configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>service gridftp2
{
env += GLOBUS_LOCATION=&lt;path to GL&gt;
env += LD_LIBRARY_PATH=&lt;path to GL&gt;/lib
server = &lt;path to GL&gt;/sbin/globus-gridftp-server
server_args = -i
server_args += -d ALL -l &lt;path to GL&gt;/var/gridftp.log
port = 5000
}</pre>
</div>
</div>
<div class="paragraph">
<p>That portion is identical to xinetd. In fact, an existing xinetd
configuration file should work.</p>
</div>
<div class="paragraph">
<p>When running GridFTP out of GFork, the server should be run with a
master program. The master program provides enhanced functionality such
as dynamic backend registration for striped servers, managed system
memory pools and internal data monitoring for both striped and
non-striped servers.</p>
</div>
<div class="paragraph">
<p>To run with a master program, the following two lines are needed in the
config file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>master = &lt;path to GL&gt;/libexec/gfs-gfork-master
master_args = &lt;options&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>These last two options relate to the master program and work in the same
way that <code>server</code> and <code>server_args</code> do. The first line tells GFork
what master program to use (for the GridFTP server, we use
<strong><code>gfs-gfork-master</code></strong>). The second line provides options to the
master program.</p>
</div>
<div class="paragraph">
<p>The full list of master options are as follows (this is to date only,
run the program with <em>--help</em> for newer options):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-b | --reg-cs &lt;contact string&gt;</strong></dt>
<dd>
<p>Contact to the frontend registry. This option makes it a data node.</p>
</dd>
<dt class="hdlist1"><strong>-df | --dn-file &lt;path&gt;</strong></dt>
<dd>
<p>     Path to a file containing the list of acceptable DNs. Default is system
gridmap file.</p>
</dd>
<dt class="hdlist1"><strong>-G | --gsi &lt;bool&gt;</strong></dt>
<dd>
<p>Enable or disable GSI. Default is on.</p>
</dd>
<dt class="hdlist1"><strong>-h | --help</strong></dt>
<dd>
<p>Print the help message.</p>
</dd>
<dt class="hdlist1"><strong>-l | --logfile &lt;path&gt;</strong></dt>
<dd>
<p>Path to the logfile.</p>
</dd>
<dt class="hdlist1"><strong>-p | --port &lt;int&gt;</strong></dt>
<dd>
<p>Port where the server listens for connections.</p>
</dd>
<dt class="hdlist1"><strong>-s | --stripe-count &lt;int&gt;</strong></dt>
<dd>
<p>     The maximum number of stripes to give to each server. A value of 0
indicates all stripes are available.</p>
</dd>
<dt class="hdlist1"><strong>-u | --update-interval &lt;int&gt;</strong></dt>
<dd>
<p>Number of seconds between registration updates.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following is an example GFork configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>service gridftp2
    {
    instances = 100
    env += GLOBUS_LOCATION=/home/bresnaha/Dev/Globus-gfork3/GL
    env += LD_LIBRARY_PATH=/home/bresnaha/Dev/Globus-gfork3/GL/lib
    server = /home/bresnaha/Dev/Globus-gfork3/GL/sbin/globus-gridftp-server
    server_args = -i -aa
    server_args += -d ALL -l /home/bresnaha/tst.log
    server_args += -dsi remote -repo-count 1
    nice = 10
    port = 5000
    master = /home/bresnaha/Dev/Globus-gfork3/GL/libexec/gfs-gfork-master
    master_args = -port 6065 -l /home/bresnaha/master.log -G n
    master_args += -dn /home/bresnaha/master_gridmap
    }</pre>
</div>
</div>
<div class="paragraph">
<p>Once you have a configuration file, run GFork with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% gfork -c &lt;path to config file&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-gfork-striped">GFork and Striped Servers</h3>
<div class="paragraph">
<p>As mentioned in <a href="#gridftp-admin-striped">Configuring GridFTP for
Cluster-to-Cluster (or Striped) data movement</a>, GridFTP offers a powerful
enhancement called striped servers. In this mode a GridFTP server is set
up with a single frontend and one or more backends. All of the backends
work in concert to transfer a single file and thereby achieve high
throughput rates. Here we describe how to configure one frontend and
multiple backends for use as a striped server with GFork.</p>
</div>
<div class="sect3">
<h4 id="gridftp-gfork-striped-frontend">Frontend Configuration</h4>
<div class="paragraph">
<p>The frontend server described here is run using dynamic backends. We
need additional options for both the GridFTP server and the master
program. The following lines are added to the config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>server_args += -dsi remote
master_args = -port 8588
master_args += -df &lt;path to gridmap file&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The first line is an additional argument to the GridFTP server. It tells
the server that it will be operating in split mode (separate frontend
and backend processes) and that it will be using the frontend.
(Specifically it tells the server to use the <em>remote</em> DSI).</p>
</div>
<div class="paragraph">
<p>The second line tells the master program on which port it should listen
for backend registrations. Backend services can then connect to this
port to notify the frontend of their existence. By default, a
registration is good for 10 minutes, but a backend is free to refresh
its registration. In this way, a frontend is provided with the list of
possible backends (stripes) which may be used for a transfer.</p>
</div>
<div class="paragraph">
<p>The third line provides the master program with a list of authorized
DNs. Each line in the file must contain a GSI DN (certificate subject).
In order to register, the backend must authenticate and provide its DN.
The provided DN is checked against this file. In other words, the file
is a list of DNs that may register with the frontend. If the master
program is not given a <em>-df</em> option and is given the <em>-G</em> option, then
there is no registration security at all.</p>
</div>
</div>
<div class="sect3">
<h4 id="gridftp-gfork-striped-backend">Backend Configuration</h4>
<div class="paragraph">
<p>Any striped server setup can have more than one backend service.
Furthermore, any one computer can run multiple backends. The following
explains how to set up a backend server. These steps should be repeated
for each needed backend instance.</p>
</div>
<div class="paragraph">
<p>A backend server may also be run with GFork, it just needs different
options for both the GridFTP server and the master program. A sample
backend config file is shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>service gridftp2
{
env += GLOBUS_LOCATION=&lt;path to GL&gt;
env += LD_LIBRARY_PATH=&lt;path to GL&gt;/lib

server = &lt;path to GL&gt;/sbin/globus-gridftp-server
server_args = -i
server_args += -dn
master = &lt;path to GL&gt;/libexec/gfs-gfork-master
master_args = -b localhost:8588
}</pre>
</div>
</div>
<div class="paragraph">
<p>Notable additions to this file are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>server_args += -dn
master_args = -b localhost:8588</pre>
</div>
</div>
<div class="paragraph">
<p>The first line tells the GridFTP server that it will be a <em>data node</em>,
which is another name for a backend.</p>
</div>
<div class="paragraph">
<p>The second line tells the master program two things, first that it will
be a master of a data node, and second what the frontend&#8217;s registration
contact point is. Note that in our example we have a hostname of
<em>localhost</em> and a port of <em>8588</em>. 8588 is (and must be) the same port
that was provided to the frontend&#8217;s master program in the previous step.</p>
</div>
<div class="paragraph">
<p>Once the configuration file is complete, run GFork again as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>% gfork -c &lt;conf file&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This will start up the data node and the master program will register
itself to the frontend and refresh its registration every 5 minutes
(default setting).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gridftp-gfork-memory-mgt">GFork with Memory Management</h3>
<div class="paragraph">
<p>Another feature of the GridFTP GFork plugin is memory usage limiting.
Under extreme client loads, it is possible that GridFTP servers require
more memory than the system has available. Due to a common kernel memory
allocation scheme known as optimistic provisioning, this situation can
lead to a full consumption of memory resources and thus trigger the out
of memory handler. The OOM handler will kill processes in a
difficult-to-predict way in order to free up memory. This will leave the
system in an unpredicatable and unstable state; obviously, this is a
situation that we want to avoid.</p>
</div>
<div class="paragraph">
<p>To control this situation, the GridFTP GFork plugin has a memory
limiting option. This will attempt to limit memory usage to a given
value or to the maximum amount of RAM in the system. Most of the memory
is given to the first few connections, but when the plugin detects that
it is overloaded, each session is limited to half the available memory.</p>
</div>
<div class="paragraph">
<p>To enable this feature, one of two options must be passed to the master
program via the <em>master_args</em> in the config file:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-m</strong></dt>
<dd>
<p>Limits memory consumption to amount of RAM in the system.</p>
</dd>
<dt class="hdlist1"><strong>-M &lt;formated int&gt;</strong></dt>
<dd>
<p>Limits memory to the given value.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Another important option should be provided in the GFork config file:
<em>instance</em>. When a client connects to GFork, a GridFTP server instance
is executed. This instance requires a certain amount of RAM. If
connections are coming in too fast, this can act as a DOS attack.
Limiting the number of allowed simultaneous connections will help the
memory management algorithm do its job. This limit is set with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>instance = &lt;int&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>We recommend a value of 100 or <em>RAM</em>/2M, whichever is smaller.</p>
</div>
<div class="paragraph">
<p>The following is an example of a GFork configuration file with memory
limiting enabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>service gridftp2
{
instance = 100
env += GLOBUS_LOCATION=&lt;path to GL&gt;
env += LD_LIBRARY_PATH=&lt;path to GL&gt;/lib
server = &lt;path to GL&gt;/sbin/globus-gridftp-server
server_args = -i
server_args += -dn
master = &lt;path to GL&gt;/libexec/gfs-gfork-master
master_args = -M 512M
}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gridftp-admin-index">Index</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
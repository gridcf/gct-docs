<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>GCT 6.0 GRAM5: Developer&#8217;s Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body id="gram5Developer" class="book toc2 toc-left">
<div id="header">
<h1>GCT 6.0 GRAM5: Developer&#8217;s Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="#gram5-developer-beforeyoubegin">Before you begin</a>
<ul class="sectlevel2">
<li><a href="#gram5-features">Feature summary</a></li>
<li><a href="#gram5-platforms">Tested platforms</a></li>
<li><a href="#gram5-compatibility">Backward compatibility summary</a></li>
<li><a href="#gram5-dependencies">Technology dependencies</a></li>
<li><a href="#gram5-security-considerations">Security Considerations</a></li>
</ul>
</li>
<li><a href="#gram5-developer-concepts">GRAM5 Concepts for Developers</a>
<ul class="sectlevel2">
<li><a href="#gram5-developer-concepts-blocking">Blocking and Nonblocking Function Variants</a></li>
<li><a href="#_service_contact_strings">Service Contact Strings</a></li>
<li><a href="#gram5-developer-jobstatecallbacks">Job State Callbacks and Polling</a></li>
<li><a href="#_credential_management">Credential Management</a></li>
<li><a href="#_rsl">RSL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_gram_client_developer_s_guide">GRAM Client Developer&#8217;s Guide</a>
<ul class="sectlevel1">
<li><a href="#gram5-developer-scenarios">Basic GRAM Client Scenarios</a>
<ul class="sectlevel2">
<li><a href="#_ping_a_job_manager">"Ping" a Job Manager</a></li>
<li><a href="#_check_a_job_manager_version">Check a Job Manager Version</a></li>
<li><a href="#_submitting_a_job">Submitting a Job</a></li>
<li><a href="#_submitting_a_job_and_processing_job_state_callbacks">Submitting a Job and Processing Job State Callbacks</a></li>
<li><a href="#_polling_job_status">Polling Job Status</a></li>
<li><a href="#_canceling_a_job">Canceling a Job</a></li>
<li><a href="#_refreshing_job_credential">Refreshing Job Credential</a></li>
</ul>
</li>
<li><a href="#gram5-developer-scenarios-advanced">Advanced GRAM Client Scenarios</a>
<ul class="sectlevel2">
<li><a href="#_non_blocking_job_submission">Non-blocking Job Submission</a></li>
<li><a href="#_custom_security_attributes">Custom Security Attributes</a></li>
<li><a href="#_modifying_rsl">Modifying RSL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_gram_server_developer_s_guide">GRAM Server Developer&#8217;s Guide</a>
<ul class="sectlevel1">
<li><a href="#gram5-developer-lrm-adapter-tutorial">LRM Adapter Tutorial</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">Introduction</a></li>
<li><a href="#_parts_of_a_gram5_lrm_adapter">Parts of a GRAM5 LRM Adapter</a></li>
<li><a href="#gram5-lrma-tutorial-rvf">RSL Validation File</a></li>
<li><a href="#_configuration_file">Configuration File</a></li>
<li><a href="#gram5-lrma-tutorial-perl">LRM Adapter Perl Module</a></li>
<li><a href="#gram5-developer-lrm-adapter-tutorial-seg">LRM SEG Module</a></li>
<li><a href="#gram5-lrma-tutorial-perl-changes">Changes from Previous Versions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_gram5_developer_s_reference">GRAM5 Developer&#8217;s Reference</a>
<ul class="sectlevel1">
<li><a href="#gram5-apis">APIs</a>
<ul class="sectlevel2">
<li><a href="#_c_api_documentation_links">C API Documentation Links</a></li>
<li><a href="#_gram5_perl_api_reference">GRAM5 Perl API Reference</a></li>
</ul>
</li>
<li><a href="#gram5-rsl">RSL Specification v1.1</a>
<ul class="sectlevel2">
<li><a href="#gram5-rsl-syntax-overview">RSL Syntax Overview</a></li>
<li><a href="#gram5-rsl-tokenization-overview">RSL Tokenization Overview</a></li>
<li><a href="#gram5-rsl-substitution-semantics">RSL Substitution Semantics</a></li>
<li><a href="#gram5-rsl-attribute-summary">RSL Attribute Summary</a></li>
<li><a href="#gram5-rsl-examples">Simple RSL Examples</a></li>
<li><a href="#gram5-rsl-grammar-and-tokenization-rules">RSL grammar and tokenization rules</a></li>
</ul>
</li>
<li><a href="#gram5-debugging">Debugging</a>
<ul class="sectlevel2">
<li><a href="#_basic_debugging_methods">Basic Debugging Methods</a></li>
<li><a href="#_advanced_debugging_methods">Advanced Debugging Methods</a></li>
</ul>
</li>
<li><a href="#gram5-troubleshooting">Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#gram5-troubleshooting-client">GRAM Client Troubleshooting</a></li>
<li><a href="#gram5-troubleshooting-admin">Admin Troubleshooting</a></li>
<li><a href="#gram5-error-codes">Errors</a></li>
</ul>
</li>
<li><a href="#gram5-developer-protocols">Semantics and syntax of protocols</a>
<ul class="sectlevel2">
<li><a href="#gram5-interface-protocol">GRAM5 Protocol</a></li>
</ul>
</li>
<li><a href="#gram5-developer-relateddocs">Related Documentation</a></li>
<li><a href="#gram5-developer-internal-components">Internal Components</a></li>
</ul>
</li>
<li><a href="#gram5-developer-index">Index</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The Grid Community Toolkit documentation was taken from the Globus Toolkit 6.0 documentation.
As a result, there may be inaccuracies and outdated information.
Please report any problems to the Grid Community Forums as <a href="https://github.com/gridcf/gct-docs/issues">GitHub issues</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="../../index.html">GCT</a> &#8594; <a href="../index.html">GRAM 5</a> &#8594; GCT 6.0 GRAM5: Developer&#8217;s Guide</p>
</div>
<div class="openblock">
<div class="title">Introduction</div>
<div class="content">
<div class="paragraph">
<p>This guide is intended to help a developer interact with GRAM5. It
includes sections on implementing clients in C and implementing a Local
Resource Manager interface, as well as an overview of concepts and APIs
used to interact with GRAM.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="_introduction" class="sect0">Introduction</h1>
<div class="sect1">
<h2 id="gram5-developer-beforeyoubegin">Before you begin</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gram5-features">Feature summary</h3>
<div class="paragraph">
<p>
New Features new since 5.2:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bug fixes and improved testing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other Standard Supported Features</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remote job execution and management</p>
</li>
<li>
<p>Uniform and flexible interface to local resource managers, including Condor,
LSF, and SLURM, and GridEngine</p>
</li>
<li>
<p>File staging before and after job execution</p>
</li>
<li>
<p>File and directory clean up after job termination</p>
</li>
<li>
<p>Service auditing for each submitted</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Removed Features</p>
</div>
<div class="ulist">
<ul>
<li>
<p>None.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gram5-platforms">Tested platforms</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>GRAM5 has been tested extensively on the following platforms:</p>
</div>
<table id="tested-platforms" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Tested Platforms</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operating System</th>
<th class="tableblock halign-left valign-top">Distribution</th>
<th class="tableblock halign-left valign-top">Version(s)</th>
<th class="tableblock halign-left valign-top">Architecture(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="10"><p class="tableblock">Linux</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">CentOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5, 6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fedora</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20, 21, 22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Red Hat Enterprise Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5, 6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Scientific Linux</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5, 6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Linux Enterprise Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11SP3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6, 7, 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, amd64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12.04LTS, 14.04LTS, 14.10, 15.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, amd64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Mac OS X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.6-10.10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solaris</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OmniOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">r151006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Windows 7</p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">Cygwin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock">MingW64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i386, x86_64</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="gram5-compatibility">Backward compatibility summary</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Protocol changes in GRAM since GT4 series:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The GRAM5 service uses a superset of the GRAM2 protocol for communciation
between the client and service. The extensions supported in GRAM5 are
implemented in such a way that they are ignored by GRAM2 services or clients.
These extensions provide improved error messages and version detection.</p>
</li>
<li>
<p>GRAM5 does not support task coallocation using DUROC and its related
protocols. Jobs submitted using DUROC directives will fail.</p>
</li>
<li>
<p>GRAM5 does not support file streaming. The standard output and standard error
streams are sent after the job completes instead of during execution. As a
special case, support for the Condor grid monitor program implements a small
subset of the streaming capabilities of GRAM2 in GT 4.2.x.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="gram5-dependencies">Technology dependencies</h3>
<div class="paragraph">
<p>
GRAM depends on the following GCT components:
* Globus Common
* GSI C
* GridFTP server</p>
</div>
</div>
<div class="sect2">
<h3 id="gram5-security-considerations">Security Considerations</h3>
<div class="sect3">
<h4 id="_gatekeeper_security_considerations">Gatekeeper Security Considerations</h4>
<div class="paragraph">
<p>GRAM5 runs different parts of itself under different privilege levels.
The <strong><code>globus-gatekeeper</code></strong> runs as root, and uses its root privilege
to access the host&#8217;s private key. It uses the grid map file to map Grid
Certificates to local user ids and then uses the <strong><code>setuid()</code></strong>
function to change to that user and execute the
<strong><code>globus-job-manager</code></strong> program</p>
</div>
</div>
<div class="sect3">
<h4 id="_job_manager_security_considerations">Job Manager Security Considerations</h4>
<div class="paragraph">
<p>The <strong><code>globus-job-manager</code></strong> program runs as a local non-root account.
It receives a delegated limited proxy certificate from the GRAM5 client
which it uses to access Grid storage resources via GridFTP and to
authenticate job signals (such as client cancel requests), and send job
state callbacks to registered clients. This proxy is generally
short-lived, and is automatically removed by the job manager when the
job completes.</p>
</div>
<div class="paragraph">
<p>The <strong><code>globus-job-manager</code></strong> program uses a publicly-writable
directory for job state files. This directory has the <strong>sticky</strong> bit
set, so users may not remove other users files. Each file is named by a
UUID, so it should be unique.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fork_seg_module_security_considerations">Fork SEG Module Security Considerations</h4>
<div class="paragraph">
<p>The Fork Scheduler Event Generator module uses a globally writable file
for job state change events. This is not recommended for production use.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-concepts">GRAM5 Concepts for Developers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gram5-developer-concepts-blocking">Blocking and Nonblocking Function Variants</h3>
<div class="paragraph">
<p>In the GRAM Client API, all functions that involve sending messages over
the network have both blocking and nonblocking variants. These are
useful in different programming situations.</p>
</div>
<div class="paragraph">
<p>The blocking variants, such as the
<strong><code>globus_gram_client_job_request</code></strong> function require less application
code, but will prevent subsequent instructions from executing until the
request has been sent and the reply parsed. In a non-threaded
environment, other callback functions registered with the GCT event
driver may be invoked while the blocking function is running. In a
threaded environment, other events may occur in other threads while the
function is blocking, but the current thread will be blocked until the
response is parsed.</p>
</div>
<div class="paragraph">
<p>The nonblocking variants, such as
<strong><code>globus_gram_client_register_job_request</code></strong> require the application
to include a callback function which will be called by the GCT event
driver when the reply has been parsed. In a non-threaded environment,
applications must poll the event driver using functions from the
<strong><code>globus_poll</code></strong> or <strong><code>globus_cond_wait</code></strong> families of functions.
In a threaded environment, the callback function may be invoked in
another thread than the one calling the non-blocking function, even
before the non-blocking function has returned. Application writers must
be careful in using synchronization primitives such as
<strong><code>globus_mutex_t</code></strong> and <strong><code>globus_cond_t</code></strong> when using non-blocking
functions.</p>
</div>
<div class="paragraph">
<p>An application writer should use the non-blocking variants if the
application will be submitting many jobs concurrently or requires custom
network or security attributes. Using the non-blocking variants allows
the GCT event driver to better schedule network I/O in these cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_contact_strings">Service Contact Strings</h3>
<div class="paragraph">
<p>GRAM uses three types of <strong>contact strings</strong> to describe how to contact
different services. These service contacts are:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. GRAM Contact String Types</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Gatekeeper Service Contact</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">This string describes how to contact a
gatekeeper service. It is used to submit jobs, send
"ping" requests to determine if a service is properly
deployed, and version requests to determine what
version of the software is deployed. Full details of
the syntax of this contact is located in the next
section.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Callback Contact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This string is an HTTPS URL that
is an endpoint for GRAM job state callbacks. An https
message is posted to this address when the Job Manager
detects a job state change.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="gram5-developer-resource-names">Resource Names</h4>
<div class="paragraph">
<p>In GRAM5, a Gatekeeper Service Contact contains the host, port, service
name, and service identity required to contact a particular GRAM
service. For convenience, default values are used when parts of the
contact are omitted. An example of a full gatekeeper service contact is
<code>grid.example.org:2119/jobmanager:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code>.</p>
</div>
<div class="paragraph">
<p>The various forms of the resource name using default values follow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>HOST</em></p>
</li>
<li>
<p><em>HOST</em><code>:</code><em>PORT</em></p>
</li>
<li>
<p><em>HOST</em><code>:</code><em>PORT</em><code>/</code><em>SERVICE</em></p>
</li>
<li>
<p><em>HOST</em><code>/</code><em>SERVICE</em></p>
</li>
<li>
<p><em>HOST</em><code>:/</code><em>SERVICE</em></p>
</li>
<li>
<p><em>HOST</em><code>:</code><em>PORT</em><code>:</code><em>SUBJECT</em></p>
</li>
<li>
<p><em>HOST</em><code>/</code><em>SERVICE</em><code>:</code><em>SUBJECT</em></p>
</li>
<li>
<p><em>HOST</em><code>:/</code><em>SERVICE</em><code>:</code><em>SUBJECT</em></p>
</li>
<li>
<p><em>HOST</em><code>:</code><em>PORT</em><code>/</code><em>SERVICE</em><code>:</code><em>SUBJECT</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where the various values have the following meaning:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>HOST</em></strong></dt>
<dd>
<p>Network name of the machine hosting the service.</p>
</dd>
<dt class="hdlist1"><strong><em>PORT</em></strong></dt>
<dd>
<p>Network port number that the service is listening on. If not specified, the default of <code>2119</code> is used.</p>
</dd>
<dt class="hdlist1"><strong><em>SERVICE</em></strong></dt>
<dd>
<p>Path of the service entry in <code>$GLOBUS_LOCATION/etc/grid-services</code>. If not specified, the default of . If not specified, the default of <code>jobmanager</code> is used.</p>
</dd>
<dt class="hdlist1"><strong><em>SUBJECT</em></strong></dt>
<dd>
<p>X.509 identity of the credential used by the service. If not specified, the default of <code>host@</code><em>HOST</em> is used.</p>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title">Example 1. Gatekeeper Service Contact Examples</div>
<div class="content">
<div class="paragraph">
<p>The following strings all name the service
<code>grid.example.org:2119/jobmanager:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code>
using the formats with the various defaults described above.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>grid.example.org</code></p>
</li>
<li>
<p><code>grid.example.org:2119</code></p>
</li>
<li>
<p><code>grid.example.org:2119/jobmanager</code></p>
</li>
<li>
<p><code>grid.example.org/jobmanager</code></p>
</li>
<li>
<p><code>grid.example.org:/jobmanager</code></p>
</li>
<li>
<p><code>grid.example.org:2119:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code></p>
</li>
<li>
<p><code>grid.example.org/jobmanager:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code></p>
</li>
<li>
<p><code>grid.example.org:/jobmanager:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code></p>
</li>
<li>
<p><code>grid.example.org:2119/jobmanager:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-developer-jobstatecallbacks">Job State Callbacks and Polling</h3>
<div class="paragraph">
<p>GRAM clients and learn about a job&#8217;s state in two ways: by registering
for job state callbacks and by polling for status. These two methods
have different performance characteristics and costs.</p>
</div>
<div class="paragraph">
<p>In order to receive job state callbacks, a client application must
create an HTTPS listener using the
<strong><code>globus_gram_client_callback_allow</code></strong> or
<strong><code>globus_gram_client_info_callback_allow</code></strong> functions. A non-threaded
application must then periodically call a function from either the
<strong><code>globus_cond_wait</code></strong> or <strong><code>globus_poll</code></strong> families in order to
process the job state callbacks. Additionally, the network must be
configured to allow the GRAM job manager to send messages to the port
that the client is listening on. This may be difficult if there is a
firewall between the client and service.</p>
</div>
<div class="paragraph">
<p>The GRAM service initiates the job state callbacks, and thus they are
usually sent very shortly after the job state changes, so clients can be
notified about the state changes quickly.</p>
</div>
<div class="paragraph">
<p>In order to poll for job states, a client can call either the blocking
or nonblocking variant of the <strong><code>globus_gram_client_job_status</code></strong> or
<strong><code>globus_gram_client_job_status_with_info</code></strong> functions. These
functions require that the network be configured to allow the client to
contact the network port that the GRAM service is listening on (the Job
Contact).</p>
</div>
<div class="paragraph">
<p>The client intiates these polling operations, so they are only as
accurate as the polling frequence of the client. If the client polls
very often, it will receive job state changes more quickly, at the risk
of increasing the computing and network cost of both the client and
service.</p>
</div>
</div>
<div class="sect2">
<h3 id="_credential_management">Credential Management</h3>
<div class="paragraph">
<p>The GRAM5 protocols all use GSSAPIv2 abstractions to provide
authentication and authorization. By default, GRAM uses an SSL-based
GSSAPI for its security.</p>
</div>
<div class="paragraph">
<p>The client delegates a credential to the gatekeeper service after
authentication, and the GRAM job manager service uses this delegated
credential as both a job-specific credential and for subsequent
communication with GRAM clients.</p>
</div>
<div class="paragraph">
<p>If a client or clients submit multiple jobs to a gatekeeper service,
they will eventually all be handled by a single job manager process.
This process will use whichever delegated credential will remain valid
the longest for accepting new connections and connecting to clients to
send job state callbacks. When a client delegates a new credential to a
job, this credential may also be used as the job manager&#8217;s credential
for future connections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rsl">RSL</h3>
<div class="paragraph">
<p>GRAM5 jobs are described using the RSL language. The GRAM client API
submits jobs using the string representation of the RSL, rather than the
RSL parse tree. Clients can, if they need to modify of construct RSL at
runtime, use the functions in the RSL API to do so.</p>
</div>
</div>
</div>
</div>
<h1 id="_gram_client_developer_s_guide" class="sect0">GRAM Client Developer&#8217;s Guide</h1>
<div class="sect1">
<h2 id="gram5-developer-scenarios">Basic GRAM Client Scenarios</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This chapter contains a series of examples demonstrating how to use
different features of the GRAM APIs to interact with the GRAM service.
These examples can be compiled by using GNU make with the makefile from
<a href="Makefile.examples">Makefile.examples</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ping_a_job_manager">"Ping" a Job Manager</h3>
<div class="paragraph">
<p>This example shows how to use a gatekeeper "ping" request to determine
if a service is running and if the client is authorized to contact it.
It takes a gatekeeper service contact as its only command-line option.
The <a href="gram_ping_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int rc;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT\n", argv[0]);
        rc = 1;

        goto out;
    }

    printf("Pinging GRAM resource: %s\n", argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Ping the service passed as our first command-line option. If successful,
     * this function will return GLOBUS_SUCCESS, otherwise an integer
     * error code.
     */
    rc = globus_gram_client_ping(argv[1]);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to ping service at %s because %s (Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
    }
    else
    {
        printf("Ping successful\n");
    }
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_ping_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_a_job_manager_version">Check a Job Manager Version</h3>
<div class="paragraph">
<p>This example shows how to use the "version" command to determine what
software version a gatekeeper service is running. The
<a href="gram_version_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"
#include "globus_gram_protocol.h"

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int
main(int argc, char *argv[])
{
    int rc;
    globus_hashtable_t extensions = NULL;
    globus_gram_protocol_extension_t * extension_value;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT\n", argv[0]);
        rc = 1;

        goto out;
    }

    printf("Checking version of GRAM resource: %s\n", argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Contact the service passed as our first command-line option and perform
     * a version check. If successful,
     * this function will return GLOBUS_SUCCESS, otherwise an integer
     * error code. Old versions of the job manager will return
     * GLOBUS_GRAM_PROTOCOL_ERROR_HTTP_UNPACK_FAILED as they do not support
     * the version operation.
     */
    rc = globus_gram_client_get_jobmanager_version(argv[1], &amp;extensions);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to get service version from %s because %s "
                "(Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
    }
    else
    {
        /* The version information is returned in the extensions hash table */
        extension_value = globus_hashtable_lookup(
                &amp;extensions,
                "toolkit-version");

        if (extension_value == NULL)
        {
            printf("Unknown toolkit version\n");
        }
        else
        {
            printf("Toolkit Version: %s\n", extension_value-&gt;value);
        }

        extension_value = globus_hashtable_lookup(
                &amp;extensions,
                "version");
        if (extension_value == NULL)
        {
            printf("Unknown package version\n");
        }
        else
        {
            printf("Package Version: %s\n", extension_value-&gt;value);
        }
        /* Free the extensions hash and its values */
        globus_gram_protocol_hash_destroy(&amp;extensions);
    }

    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_version_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_a_job">Submitting a Job</h3>
<div class="paragraph">
<p>This example shows how to submit a job to a GRAM service. The
<a href="gram_submit_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int rc;
    char * job_contact = NULL;

    if (argc != 3)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT RSL\n", argv[0]);
        rc = 1;

        goto out;
    }

    printf("Submitting job to GRAM resource: %s\n", argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Submit the job request to the service passed as our first command-line
     * option. If successful, this function will return GLOBUS_SUCCESS,
     * otherwise an integer error code.
     */
    rc = globus_gram_client_job_request(
            argv[1], argv[2], 0, NULL, &amp;job_contact);

    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to submit job to %s because %s (Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
        if (job_contact != NULL)
        {
            printf("Job Contact: %s\n", job_contact);
        }
    }
    else
    {
        /* Display job contact string */
        printf("Job submit successful: %s\n", job_contact);
    }

    if (job_contact != NULL)
    {
        free(job_contact);
    }
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_submit_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_a_job_and_processing_job_state_callbacks">Submitting a Job and Processing Job State Callbacks</h3>
<div class="paragraph">
<p>This example shows how to submit a job to a GRAM service and then wait
until the job reaches the FAILED or DONE state. The
<a href="gram_submit_and_wait_example.c">source to this example</a> can be
downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

struct monitor_t
{
    globus_mutex_t mutex;
    globus_cond_t cond;
    globus_gram_protocol_job_state_t state;
};

/*
 * Job State Callback Function
 *
 * This function is called when the job manager sends job states.
 */
static
void
example_callback(void * callback_arg, char * job_contact, int state,
        int errorcode)
{
    struct monitor_t * monitor = callback_arg;

    globus_mutex_lock(&amp;monitor-&gt;mutex);

    printf("Old Job State: %d\nNew Job State: %d\n", monitor-&gt;state, state);

    monitor-&gt;state = state;

    if (state == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED ||
        state == GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE)
    {
        globus_cond_signal(&amp;monitor-&gt;cond);
    }
    globus_mutex_unlock(&amp;monitor-&gt;mutex);
}

int
main(int argc, char *argv[])
{
    int rc;
    char * callback_contact = NULL;
    char * job_contact = NULL;
    struct monitor_t monitor;

    if (argc != 3)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT RSL\n", argv[0]);
        rc = 1;

        goto out;
    }

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }

    rc = globus_mutex_init(&amp;monitor.mutex, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing mutex\n");
        goto deactivate;
    }
    rc = globus_cond_init(&amp;monitor.cond, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing condition variable\n");
        goto destroy_mutex;
    }

    monitor.state = GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED;

    globus_mutex_lock(&amp;monitor.mutex);

    /*
     * Allow GRAM state change callbacks
     */
    rc = globus_gram_client_callback_allow(
            example_callback, &amp;monitor, &amp;callback_contact);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error allowing callbacks because %s (Error %d)\n",
                globus_gram_client_error_string(rc), rc);
        goto destroy_cond;
    }
    /*
     * Submit the job request to the service passed as our first command-line
     * option.
     */
    rc = globus_gram_client_job_request(
            argv[1], argv[2],
            GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED|
            GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE,
            callback_contact, &amp;job_contact);

    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to submit job to %s because %s (Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
        /* Job submit failed. Short circuit the while loop below by setting
         * the job state to failed
         */
        monitor.state = GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED;
    }
    else
    {
        /* Display job contact string */
        printf("Job submit successful: %s\n", job_contact);
    }

    /* Wait for job state callback to let us know the job has completed */
    while (monitor.state != GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE &amp;&amp;
           monitor.state != GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED)
    {
        globus_cond_wait(&amp;monitor.cond, &amp;monitor.mutex);
    }
    rc = globus_gram_client_callback_disallow(callback_contact);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error disabling callbacks because %s (Error %d)\n",
                globus_gram_client_error_string(rc), rc);
    }
    globus_mutex_unlock(&amp;monitor.mutex);

    if (job_contact != NULL)
    {
        free(job_contact);
    }

destroy_cond:
    globus_cond_destroy(&amp;monitor.cond);
destroy_mutex:
    globus_mutex_destroy(&amp;monitor.mutex);
deactivate:
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_submit_and_wait_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_polling_job_status">Polling Job Status</h3>
<div class="paragraph">
<p>This example shows how to submit a job to a GRAM service and then wait
until the job reaches the FAILED or DONE state. The
<a href="gram_poll_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int rc;
    int status = 0;
    int failure_code = 0;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s JOB-CONTACT\n", argv[0]);
        rc = 1;

        goto out;
    }

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Check the job status of the job named by the first argument to
     * this program.
     */
    rc = globus_gram_client_job_status(argv[1], &amp;status, &amp;failure_code);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to check job status because %s (Error %d)\n",
                globus_gram_client_error_string(rc), rc);
    }
    else
    {
        switch (status)
        {
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED:
                printf("Unsubmitted\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_IN:
                printf("StageIn\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING:
                printf("Pending\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE:
                printf("Active\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_SUSPENDED:
                printf("Suspended\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_OUT:
                printf("StageOut\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE:
                printf("Done\n");
                break;
            case GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED:
                printf("Failed (%d)\n", failure_code);
                break;
            default:
                printf("Unknown job state\n");
                break;
        }
    }
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_poll_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_canceling_a_job">Canceling a Job</h3>
<div class="paragraph">
<p>This example shows how to cancel a job being run by a GRAM service. The
<a href="gram_cancel_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int rc;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s JOB-CONTACT\n", argv[0]);
        rc = 1;

        goto out;
    }

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Cancel the job named by the first argument to
     * this program.
     */
    rc = globus_gram_client_job_cancel(argv[1]);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to cancel job because %s (Error %d)\n",
                globus_gram_client_error_string(rc), rc);
    }
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_cancel_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_refreshing_job_credential">Refreshing Job Credential</h3>
<div class="paragraph">
<p>This example shows how to refresh a GRAM job&#8217;s credential after the job
has been submitted by some other means. The
<a href="gram_refresh_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int rc;

    if (argc != 2)
    {
        fprintf(stderr, "Usage: %s JOB-CONTACT\n", argv[0]);
        rc = 1;

        goto out;
    }

    printf("Refreshing Credential for GRAM Job: %s\n", argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }
    /*
     * Refresh the credential of the job running at the contact named
     * by the first command-line argument to this program. We'll use the
     * process's default credential by passing in GSS_C_NO_CREDENTIAL.
     */
    rc = globus_gram_client_job_refresh_credentials(
            argv[1], GSS_C_NO_CREDENTIAL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to refresh credential for job %s because %s (Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
    }
    else
    {
        printf("Refresh successful\n");
    }
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_refresh_example.c */</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-scenarios-advanced">Advanced GRAM Client Scenarios</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_non_blocking_job_submission">Non-blocking Job Submission</h3>
<div class="paragraph">
<p>This example shows how to submit a series of GRAM jobs using the
non-blocking function <strong><code>globus_gram_client_register_job_request</code></strong>
and wait until all submissions have completed. This example throttles
the number of concurrent job submissions to reduce the load on the
service node. The <a href="gram_nonblocking_submit_example.c">source to this
example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

struct monitor_t
{
    globus_mutex_t mutex;
    globus_cond_t cond;
    int submit_pending;
    int successful_submits;
};

#define CONCURRENT_SUBMITS 5

static
void
example_submit_callback(
    void * user_callback_arg,
    globus_gram_protocol_error_t operation_failure_code,
    const char * job_contact,
    globus_gram_protocol_job_state_t job_state,
    globus_gram_protocol_error_t job_failure_code)
{
    struct monitor_t * monitor = user_callback_arg;

    globus_mutex_lock(&amp;monitor-&gt;mutex);
    monitor-&gt;submit_pending--;
    if (monitor-&gt;submit_pending &lt; CONCURRENT_SUBMITS)
    {
        globus_cond_signal(&amp;monitor-&gt;cond);
    }
    printf("Submitted job %s\n",
            job_contact ? job_contact : "UNKNOWN");
    if (operation_failure_code == GLOBUS_SUCCESS)
    {
        monitor-&gt;successful_submits++;
    }
    else
    {
        printf("submit failed because %s (Error %d)\n",
                globus_gram_client_error_string(operation_failure_code),
                operation_failure_code);
    }
    globus_mutex_unlock(&amp;monitor-&gt;mutex);
}

int
main(int argc, char *argv[])
{
    int rc;
    int i;
    struct monitor_t monitor;

    if (argc &lt; 3)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT RSL-SPEC...\n",
                argv[0]);
        rc = 1;

        goto out;
    }

    printf("Submiting %d jobs to %s\n", argc-2, argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }

    rc = globus_mutex_init(&amp;monitor.mutex, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing mutex %d\n", rc);

        goto deactivate;
    }

    rc = globus_cond_init(&amp;monitor.cond, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing condition variable %d\n", rc);

        goto destroy_mutex;
    }
    monitor.submit_pending = 0;

    /* Submits jobs from argv[2] until end of the argv array. At most
     * CONCURRENT_SUBMITS will be pending at any given time.
     */
    globus_mutex_lock(&amp;monitor.mutex);
    for (i = 2; i &lt; argc; i++)
    {
        /* This throttles the number of concurrent job submissions */
        while (monitor.submit_pending &gt;= CONCURRENT_SUBMITS)
        {
            globus_cond_wait(&amp;monitor.cond, &amp;monitor.mutex);
        }

        /* When the job has been submitted, the example_submit_callback
         * will be called, either from another thread or from a
         * globus_cond_wait in a nonthreaded build
         */
        rc = globus_gram_client_register_job_request(
                argv[1], argv[i], 0, NULL, NULL, example_submit_callback,
                &amp;monitor);
        if (rc != GLOBUS_SUCCESS)
        {
            fprintf(stderr, "Unable to submit job %s because %s (Error %d)\n",
                    argv[i], globus_gram_client_error_string(rc), rc);
        }
        else
        {
            monitor.submit_pending++;
        }
    }

    /* Wait until the example_submit_callback function has been called for
     * each job submission
     */
    while (monitor.submit_pending &gt; 0)
    {
        globus_cond_wait(&amp;monitor.cond, &amp;monitor.mutex);
    }
    globus_mutex_unlock(&amp;monitor.mutex);

    printf("Submitted %d jobs (%d successfully)\n",
            argc-2, monitor.successful_submits);

    globus_cond_destroy(&amp;monitor.cond);
destroy_mutex:
    globus_mutex_destroy(&amp;monitor.mutex);
deactivate:
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_nonblocking_submit_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_security_attributes">Custom Security Attributes</h3>
<div class="paragraph">
<p>This example shows how to submit a job and delegate a full credential to
the job. The <a href="gram_attr_example.c">source to this example</a> can be
downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module functions
 * and GRAM Client API functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"

#include &lt;stdio.h&gt;

struct monitor_t
{
    globus_mutex_t mutex;
    globus_cond_t cond;
    globus_bool_t done;
};

static
void
example_submit_callback(
    void * user_callback_arg,
    globus_gram_protocol_error_t operation_failure_code,
    const char * job_contact,
    globus_gram_protocol_job_state_t job_state,
    globus_gram_protocol_error_t job_failure_code)
{
    struct monitor_t * monitor = user_callback_arg;

    globus_mutex_lock(&amp;monitor-&gt;mutex);
    monitor-&gt;done = GLOBUS_TRUE;
    globus_cond_signal(&amp;monitor-&gt;cond);
    if (operation_failure_code == GLOBUS_SUCCESS)
    {
        printf("Submitted job %s\n",
            job_contact ? job_contact : "UNKNOWN");
    }
    else
    {
        printf("submit failed because %s (Error %d)\n",
                globus_gram_client_error_string(operation_failure_code),
                operation_failure_code);
    }
    globus_mutex_unlock(&amp;monitor-&gt;mutex);
}

int
main(int argc, char *argv[])
{
    int rc;
    globus_gram_client_attr_t attr;
    struct monitor_t monitor;

    if (argc &lt; 3)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT RSL-SPEC...\n",
                argv[0]);
        rc = 1;

        goto out;
    }

    printf("Submiting job to %s with full proxy\n", argv[1]);

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }

    rc = globus_mutex_init(&amp;monitor.mutex, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing mutex %d\n", rc);

        goto deactivate;
    }

    rc = globus_cond_init(&amp;monitor.cond, NULL);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error initializing condition variable %d\n", rc);

        goto destroy_mutex;
    }
    monitor.done = GLOBUS_FALSE;

    /* Initialize attribute so that we can set the delegation attribute */
    rc = globus_gram_client_attr_init(&amp;attr);

    /* Set the proxy attribute */
    rc = globus_gram_client_attr_set_delegation_mode(
        attr,
        GLOBUS_IO_SECURE_DELEGATION_MODE_FULL_PROXY);

    /* Submit the job rsl from argv[2]
     */
    globus_mutex_lock(&amp;monitor.mutex);
    /* When the job has been submitted, the example_submit_callback
     * will be called, either from another thread or from a
     * globus_cond_wait in a nonthreaded build
     */
    rc = globus_gram_client_register_job_request(
            argv[1], argv[2], 0, NULL, attr, example_submit_callback,
            &amp;monitor);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to submit job %s because %s (Error %d)\n",
                argv[2], globus_gram_client_error_string(rc), rc);
    }

    /* Wait until the example_submit_callback function has been called for
     * the job submission
     */
    while (!monitor.done)
    {
        globus_cond_wait(&amp;monitor.cond, &amp;monitor.mutex);
    }
    globus_mutex_unlock(&amp;monitor.mutex);

    globus_cond_destroy(&amp;monitor.cond);
destroy_mutex:
    globus_mutex_destroy(&amp;monitor.mutex);
deactivate:
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_attr_example.c */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modifying_rsl">Modifying RSL</h3>
<div class="paragraph">
<p>This example shows how to programmatically add environment variable
definitions to an RSL prior to submitting a job. The
<a href="gram_rsl_example.c">source to this example</a> can be downloaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/*
 * These headers contain declarations for the globus_module,
 * the GRAM Client, RSL, and protocol functions
 */
#include "globus_common.h"
#include "globus_gram_client.h"
#include "globus_rsl.h"
#include "globus_gram_protocol.h"

#include &lt;stdio.h&gt;
#include &lt;strings.h&gt;

static
int
example_rsl_attribute_match(void * datum, void * arg)
{
    const char * relation_attribute = globus_rsl_relation_get_attribute(datum);
    const char * attribute = arg;

    /* RSL attributes are case-insensitive */
    return (relation_attribute &amp;&amp;
            strcasecmp(relation_attribute, attribute) == 0);
}

int
main(int argc, char *argv[])
{
    int rc;
    globus_rsl_t *rsl, *environment_relation;
    globus_rsl_value_t *new_env_pair = NULL;
    globus_list_t *environment_relation_node;
    char * rsl_string;
    char * job_contact;

    if (argc != 3)
    {
        fprintf(stderr, "Usage: %s RESOURCE-MANAGER-CONTACT RSL\n", argv[0]);
        rc = 1;

        goto out;
    }

    /*
     * Always activate the GLOBUS_GRAM_CLIENT_MODULE prior to using any
     * functions from the GRAM Client API or behavior is undefined.
     */
    rc = globus_module_activate(GLOBUS_GRAM_CLIENT_MODULE);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Error activating %s because %s (Error %d)\n",
                GLOBUS_GRAM_CLIENT_MODULE-&gt;module_name,
                globus_gram_client_error_string(rc),
                rc);
        goto out;
    }

    /* Parse the RSL string into a syntax tree */
    rsl = globus_rsl_parse(argv[2]);
    if (rsl == NULL)
    {
        rc = 1;
        fprintf(stderr, "Error parsing RSL string\n");
        goto deactivate;
    }

    /* Create the new environment variable pair that we'll insert
     * into the RSL. We'll start by making an empty sequence
     */
    new_env_pair = globus_rsl_value_make_sequence(NULL);
    if (new_env_pair == NULL)
    {
        fprintf(stderr, "Error creating value sequence\n");
        rc = 1;

        goto free_rsl;
    }
    /* Then insert the name-value pair in reverse order */
    rc = globus_list_insert(
            globus_rsl_value_sequence_get_list_ref(new_env_pair),
            globus_rsl_value_make_literal(
                strdup("itsvalue")));
    if (rc != GLOBUS_SUCCESS)
    {
        goto free_env_pair;
    }

    rc = globus_list_insert(
            globus_rsl_value_sequence_get_list_ref(new_env_pair),
            globus_rsl_value_make_literal(
                strdup("EXAMPLE_ENVIRONMENT_VARIABLE")));
    if (rc != GLOBUS_SUCCESS)
    {
        goto free_env_pair;
    }
    /* Now, check to see if the RSL already contains an environment
     * attribute.
     */
    environment_relation_node = globus_list_search_pred(
            globus_rsl_boolean_get_operand_list(rsl),
            example_rsl_attribute_match,
            GLOBUS_GRAM_PROTOCOL_ENVIRONMENT_PARAM);

    if (environment_relation_node == NULL)
    {
        /* Not present yet, create a new relation and insert it into
         * the RSL.
         */
        environment_relation = globus_rsl_make_relation(
                GLOBUS_RSL_EQ,
                strdup(GLOBUS_GRAM_PROTOCOL_ENVIRONMENT_PARAM),
                globus_rsl_value_make_sequence(NULL));
        rc = globus_list_insert(
                globus_rsl_boolean_get_operand_list_ref(rsl),
                environment_relation);
        if (rc != GLOBUS_SUCCESS)
        {
            globus_rsl_free_recursive(environment_relation);
            goto free_env_pair;
        }
    }
    else
    {
        /* Pull the environment relation out of the node returned from the
         * search function
         */
        environment_relation = globus_list_first(environment_relation_node);
    }

    /* Add the new environment binding to the value sequence associated with
     * the environment relation
     */
    rc = globus_list_insert(
        globus_rsl_value_sequence_get_list_ref(
                globus_rsl_relation_get_value_sequence(environment_relation)),
        new_env_pair);
    if (rc != GLOBUS_SUCCESS)
    {
        goto free_env_pair;
    }
    new_env_pair = NULL;

    /* Convert the RSL parse tree to a string */
    rsl_string = globus_rsl_unparse(rsl);

    /*
     * Submit the augmented RSL to the service passed as our first command-line
     * option. If successful, this function will return GLOBUS_SUCCESS,
     * otherwise an integer error code.
     */
    rc = globus_gram_client_job_request(
            argv[1],
            rsl_string,
            0,
            NULL,
            &amp;job_contact);
    if (rc != GLOBUS_SUCCESS)
    {
        fprintf(stderr, "Unable to submit job to %s because %s (Error %d)\n",
                argv[1], globus_gram_client_error_string(rc), rc);
    }
    else
    {
        printf("Job submitted successfully: %s\n", job_contact);
    }

    free(rsl_string);

    if (job_contact)
    {
        free(job_contact);
    }
free_env_pair:
    if (new_env_pair != NULL)
    {
        globus_rsl_value_free_recursive(new_env_pair);
    }
free_rsl:
    globus_rsl_free_recursive(rsl);
deactivate:
    /*
     * Deactivating the module allows it to free memory and close network
     * connections.
     */
    rc = globus_module_deactivate(GLOBUS_GRAM_CLIENT_MODULE);
out:
    return rc;
}
/* End of gram_rsl_example.c */</pre>
</div>
</div>
</div>
</div>
</div>
<h1 id="_gram_server_developer_s_guide" class="sect0">GRAM Server Developer&#8217;s Guide</h1>
<div class="sect1">
<h2 id="gram5-developer-lrm-adapter-tutorial">LRM Adapter Tutorial</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">Introduction</h3>
<div class="paragraph">
<p>GRAM5 provides a resource-independent abstraction to remote job
management. The resource abstraction contains methods for job submission
and cancelling, and a method for monitoring job state changes. This set
of tutorials describes how to implement and bundle all packages needed
for a complete LRM Adapter interface for GRAM5.</p>
</div>
<div class="paragraph">
<p>For purposes of this tutorial, we will create a fake LRM adapter that
pretends to run jobs, but in fact just keeps track of jobs and expires
them after the job&#8217;s <code>max_wall_time</code> expires. We&#8217;ll call this LRM the
<code>fake</code> LRM adapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parts_of_a_gram5_lrm_adapter">Parts of a GRAM5 LRM Adapter</h3>
<div class="paragraph">
<p>A GRAM5 LRM Adapter consists of a few parts which work together to
provide a full interface between the GRAM5 Job Manager and the Local
Resource Manager. These parts include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>RSL Validation File</strong></dt>
<dd>
<p>An option file which defines any custom RSL attributes which the LRM Adapter implements, or sets any custom defaults for RSL attributes that the LRM processes. Defining new RSL attributes in this file allows the GRAM5 service to detect some sets of RSL errors without invoking the Perl LRM Adapter Module. For this example, the file will be called <code>fake.rvf</code>..</p>
</dd>
<dt class="hdlist1"><strong>Perl LRM Adapter Module</strong></dt>
<dd>
<p>A Perl module which implements the execution interface to the LRM. This module translates the Resource Specification Language description of a job&#8217;s requirements to a concrete way of starting the job on a particular LRM. For this example, this file will be called <code>fake.pm</code>..</p>
</dd>
<dt class="hdlist1"><strong>Configuration File</strong></dt>
<dd>
<p>The GRAM5 service implements a simple configuration file parser which can be used to provide a way to add site customizations to LRM Adapters. These files are usually shared between the Perl LRM Adapter Module and the Scheduler Event Generator Module. For this example, this file will be called <code>fake.conf</code>..</p>
</dd>
<dt class="hdlist1"><strong>Gatekeeper Service File</strong></dt>
<dd>
<p>The Gatekeeper is a privileged service which authenticates and authorizes clients and then starts a Job Manager process on their behalf. The Gatekeeper Service File contains the LRM-specific command-line options to the job manager. For this example, this file will be called <code>jobmanager-fork</code>..</p>
</dd>
<dt class="hdlist1"><strong>Scheduler Event Generator Module</strong></dt>
<dd>
<p>A dynamic object which parses LRM state and generates job state change events in a generic format for GRAM5 to consume. For this example, the SEG module will be called <code>libglobus_seg_fake.so</code>..</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="gram5-lrma-tutorial-rvf">RSL Validation File</h3>
<div class="paragraph">
<p>Each LRM Adapter can have a custom RSL validation file (RVF) which
indicates which RSL attributes are valid for that LRM, what their
default values are, and when they can be used during a job lifecycle.</p>
</div>
<div class="paragraph">
<p>The RVF entries consist of a set of records containing attribute-value
pairs, with a blank line separating records. Each attribute-value pair
is separated by the colon character. The value may be quoted with the
double-quote character, in which case, the value continues until a
second quote character is found; otherwise, the value terminates at end
of line.</p>
</div>
<div class="sect3">
<h4 id="_rvf_attributes">RVF Attributes</h4>
<div class="paragraph">
<p>The attribute names understood by the GRAM5 RVF parser are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Attribute</strong></dt>
<dd>
<p>The name of an RSL attribute.</p>
</dd>
<dt class="hdlist1"><strong>Description</strong></dt>
<dd>
<p>A textual description of the attribute.</p>
</dd>
<dt class="hdlist1"><strong>RequiredWhen</strong></dt>
<dd>
<p>A sequence of <a href="#gram5-lrma-tutorial-rvf-when-values">WHEN-VALUES</a> describing when this RSL attribute must be present.</p>
</dd>
<dt class="hdlist1"><strong>DefaultWhen</strong></dt>
<dd>
<p>A sequence of <a href="#gram5-lrma-tutorial-rvf-when-values">WHEN-VALUES</a> describing when the default RSL value will be applied if it&#8217;s not present in the RSL.</p>
</dd>
<dt class="hdlist1"><strong>ValidWhen</strong></dt>
<dd>
<p>A sequence of <a href="#gram5-lrma-tutorial-rvf-when-values">WHEN-VALUES</a> describing when the RSL attribute may be present.</p>
</dd>
<dt class="hdlist1"><strong>Default</strong></dt>
<dd>
<p>A literal RSL value sequence containing the default value of the attribute, applied to the RSL when the attribute is not present, but the RSL use matches the <code>DefaultWhen</code> value.</p>
</dd>
<dt class="hdlist1"><strong>Values</strong></dt>
<dd>
<p>A sequence of strings enumerating the legal values for the RSL attribute.</p>
</dd>
<dt class="hdlist1"><strong>Publish</strong></dt>
<dd>
<p>When set to <code>true</code>, the RSL attribute will be added to the documentation for the LRM Adapter if the RVF is processed by the <strong><code>create_rsl_documentation.pl</code></strong> script. Otherwise, it will not be mentioned.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="gram5-lrma-tutorial-rvf-when-values">RVF When Values</h5>
<div class="paragraph">
<p>The <em>WHEN-VALUES</em> used by the RVF parser are described in this list:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><code>GLOBUS_GRAM_JOB_SUBMIT</code></strong></dt>
<dd>
<p>RSL Attribute used in a GRAM5 job request to submit a job to an LRM Adapter.</p>
</dd>
<dt class="hdlist1"><strong><code>GLOBUS_GRAM_JOB_RESTART</code></strong></dt>
<dd>
<p>RSL Attribute used in a GRAM5 job request to restart a job which was stopped due to a two-phase commit timeout.</p>
</dd>
<dt class="hdlist1"><strong><code>GLOBUS_GRAM_JOB_STDIO_UPDATE</code></strong></dt>
<dd>
<p>RSL Attribute used in a GRAM5 STDIO_UPDATE signal, which may be sent to a job during the two-phase end state.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_common_rsl_attributes">Common RSL Attributes</h5>
<div class="paragraph">
<p>The GRAM5 service by default implements a common set of RSL attributes
for all jobs. Not all of these may be relevant to all LRM types, but are
included in the common set so that the same concept will be processed by
the same attribute for each LRM. LRM Adapters can disable particular RSL
attributes if they want by adding the attribute to their RVF file with</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Attribute: AttributeName
ValidWhen: ""</pre>
</div>
</div>
<div class="paragraph">
<p>The common list of attributes is described in
<a href="../../gram5/pi/index.html#gram5-rsl-attribute-summary">RSL Attribute
Summary</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_rsl_validation_file_for_the_fake_lrm">Creating a RSL Validation File for the Fake LRM</h4>
<div class="paragraph">
<p>Normally, the RVF for a new LRM Adapter will add any LRM-specific RSL
attributes and perhaps change the DefaultValue for some. For the
<code>fake</code> LRM, we&#8217;ll be a bit more complicated and disable most of the
GRAM common RSL attributes and reduce things to indicate the queue and
execution time for the fake jobs. The <code>fake.rvf</code> will do the
following:  will do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove <code>executable</code>, <code>arguments</code>, <code>directory</code>, <code>environment</code>, <code>file_clean_up</code>, <code>file_stage_in</code>, <code>file_stage_out</code>, <code>file_stage_in_shared</code>, <code>gass_cache</code>, <code>gram_my_job</code>, <code>host_count</code>, <code>library_path</code>, <code>max_cpu_time</code>, <code>min_memory</code>, <code>project</code>, <code>queue</code>, <code>remote_io_url</code>, <code>scratch_dir</code>, <code>stdin</code>, <code>stdout</code>, and <code>stderr</code> attributes.</p>
</li>
<li>
<p>Add a <code>max_queue_time</code> attribute, which will be the maximum time a particular fake job will be in the <code>PENDING</code> state. This will have a default of 20 minutes.</p>
</li>
<li>
<p>Add a default value to the <code>max_wall_time</code> attribute of 5 minutes.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 2. fake.rvf</div>
<div class="content">
<div class="paragraph">
<p>Here is the <a href="fake.rvf">complete RVF</a> for the <code>fake</code> LRM Adapter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Disable a large number of RSL attributes
Attribute: executable
ValidWhen: ""
RequiredWhen: ""

Attribute: directory
ValidWhen: ""
RequiredWhen: ""

Attribute: environment
ValidWhen: ""
RequiredWhen: ""

Attribute: file_clean_up
ValidWhen: ""
RequiredWhen: ""

Attribute: file_stage_in
ValidWhen: ""
RequiredWhen: ""

Attribute: file_stage_out
ValidWhen: ""
RequiredWhen: ""

Attribute: file_stage_in_shared
ValidWhen: ""
RequiredWhen: ""

Attribute: gass_cache
ValidWhen: ""
RequiredWhen: ""

Attribute: gram_my_job
ValidWhen: ""
RequiredWhen: ""

Attribute: host_count
ValidWhen: ""
RequiredWhen: ""

Attribute: library_path
ValidWhen: ""
RequiredWhen: ""

Attribute: max_cpu_time
ValidWhen: ""
RequiredWhen: ""

Attribute: min_memory
ValidWhen: ""
RequiredWhen: ""

Attribute: project
ValidWhen: ""
RequiredWhen: ""

Attribute: queue
ValidWhen: ""
RequiredWhen: ""

Attribute: remote_io_url
ValidWhen: ""
RequiredWhen: ""

Attribute: scratch_dir
ValidWhen: ""
RequiredWhen: ""

Attribute: stdin
ValidWhen: ""
RequiredWhen: ""

Attribute: stdout
ValidWhen: ""
RequiredWhen: ""

Attribute: stderr
ValidWhen: ""
RequiredWhen: ""

# Add a new attribute max_queue_time
Attribute: max_queue_time
ValidWhen: GLOBUS_GRAM_JOB_SUBMIT
DefaultWhen: GLOBUS_GRAM_JOB_SUBMIT
RequiredWhen: GLOBUS_GRAM_JOB_SUBMIT
Description: "Maximum time a fake job will be in pending, in seconds. The
              default value is 1200 seconds (20 minutes)"
Default: 1200

# Add a default value and requirement for max_wall_time
Attribute: max_wall_time
DefaultWhen: GLOBUS_GRAM_JOB_SUBMIT
RequiredWhen: GLOBUS_GRAM_JOB_SUBMIT
Default: 300
Description: "Maximum time a fake job will be in the ACTIVE state"</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_file">Configuration File</h3>
<div class="paragraph">
<p>For the fake LRM, there&#8217;s not much to configure: a path to a file where
the LRM should write its job files. For real LRMs, there are other
things which might belong there: paths to LRM-specific executables such
as <strong><code>qsub</code></strong>, tuning parameters fo the LRM adapter script such as the
number of available cores per execution node, or the host to contact
when using a remote submit protocol between GRAM the the LRM. The
configuation parameters used by the LRM adapters included in GRAM5 are
described in <a href="../../gram5/admin/index.html#gram5-configuring-lrm">LRM
Adapter Configuration</a>.</p>
</div>
<div class="paragraph">
<p>The LRM adapter configuration files consist of attribute="value" pairs,
which comment lines beginning with the <code>#</code> character. For the example
fake LRM, the configuration file looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># log_path is the path to log file that the  fake LRM generates. This file is
# updated each time a job is submitted or cancelled. The default if it is not
# present is ${localstatedir}/fake, which is typically /var/fake
log_path="/tmp"</pre>
</div>
</div>
<div class="sect3">
<h4 id="_parsing_the_configuration_file">Parsing the Configuration File</h4>
<div class="paragraph">
<p>The Globus Toolkit contains API functions for parsing files in the
format used by the LRM configuration files. In Perl, use the
<code>Globus::Core::Config</code> class. In C, use the
<strong><code>globus_common_get_attribute_from_config_file()</code></strong> function.</p>
</div>
<div class="sect4">
<h5 id="_perl_api">Perl API</h5>
<div class="paragraph">
<p>The <code>Globus::Core::Config</code> API is quite simple. The <strong><code>new()</code></strong>
constructor parses the configuration file and returns an object
containing the attribute=value pairs. The <strong><code>get_attribute()</code></strong> method
returns the value of the named attribute. These functions are used in
<a href="#gram5-LRM-Adapter-Perl-Config">the fake LRM Perl Module</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_c_api">C API</h5>
<div class="paragraph">
<p>The <strong><code>globus_common_get_attribute_from_config_file()</code></strong> function will
load the configuration file and return the value of the attribute passed
to it. This function is ued in the SEG module below. Note that this
function returns a pointer to a copy of the string value in the location
pointed to by the <em>value</em> parameter. The caller must free this value.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-lrma-tutorial-perl">LRM Adapter Perl Module</h3>
<div class="paragraph">
<p>The Perl-language LRM module provides the job submission and cancelling
interface between GRAM5 and the underlying scheduler. Very little has
been added to this part of the scheduler interface since Globus Toolkit
2---if you have a version for an older Globus Toolkit release, you can
ignore most of this tutorial and jump to the
<a href="#gram5-lrma-tutorial-perl-changes">Changes from Previous Versions</a> section
of this tutorial. The
module annotated below is available from link:fake.pm.</p>
</div>
<div class="sect3">
<h4 id="_perl_lrm_adapter_module">Perl LRM Adapter Module</h4>
<div class="paragraph">
<p>The LRM Adapter interface is implemented as a Perl module which is a
subclass of the <code>Globus::GRAM::JobManager</code> module. Its name must match
the type string used when the job manager is started, but in all lower
case: for the fake LRM, the module name is
<code>Globus::GRAM::JobManager::fake</code> and it is stored in the file
<code>fake.pm</code>. Though there are several methods in the . Though there are
several methods in the
<a href="#Globus::GRAM::JobManager"><code>Globus::GRAM::JobManager interface</code></a>,
the only ones which absolutely need to be implemented in a scheduler
module are <strong><code>submit</code></strong> and <strong><code>cancel</code></strong>. The <strong><code>poll</code></strong> can be
used if there is no SEG module for your LRM Adapter, but using polling
can be resource intensive and slow. We&#8217;ll present the methods in the
module one by one, but the entire module can be downloaded from here:
<a href="fake.pm">fake.pm</a>.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll begin by looking at the start of the <code>fake.pm</code> source module To
begin the script, we import the GRAM support modules into the LRM
adapter module&#8217;s namespace, declare the module&#8217;s package, and declare
this module as a subclass of the  source module To begin the script, we
import the GRAM support modules into the LRM adapter module&#8217;s namespace,
declare the module&#8217;s package, and declare this module as a subclass of
the <code>Globus::GRAM::JobManager</code> module. All LRM adapter packages will
need to do this, substituting the name of the LRM type being implemented
where we see <code>fake</code> below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>use Globus::GRAM::Error;
use Globus::GRAM::JobState;
use Globus::GRAM::JobManager;
use Globus::Core::Paths;
use Globus::Core::Config;
use File::Path;
use strict;
use warnings;

package Globus::GRAM::JobManager::fake;

our @ISA = ('Globus::GRAM::JobManager');</pre>
</div>
</div>
<div class="paragraph">
<p>Next, we declare any system-specific values which will be read from the
configuration file. In the fake case, we will declare a module-global
directory for job information and for SEG log entries. In real LRM
Adapters, there are often variables which are loaded from the
configuration file for such things as the list of available queues,
paths to executables such as <strong><code>mpiexec</code></strong>, and any other
site-specific configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>our($job_dir, $fake_seg_dir);

BEGIN
{
    my $config = new Globus::Core::Config(
        '${sysconfdir}/globus/globus-fake.conf');

    $job_dir = $fake_seg_dir = "";

    if ($config)
    {
        $job_dir = $config-&gt;get_attribute("log_path") || "";
    }
    if ($job_dir eq '')
    {
        $job_dir = Globus::Core::Paths::eval_path('${localstatedir}/fake');
    }
}</pre>
</div>
</div>
<div class="sect4">
<h5 id="_writing_a_constructor">Writing a Constructor</h5>
<div class="paragraph">
<p>For LRM Adapter interfaces which need to setup some data before calling
their other methods, they can overload the <strong><code>new</code></strong> method which acts
as a constructor. Scheduler scripts which don&#8217;t need any per-instance
initialization will not need to provide a constructor, the default
<strong><code>Globus::GRAM::JobManager::new</code></strong> constructor will do the job.</p>
</div>
<div class="paragraph">
<p>If you do need to overloaded this method, be sure to call the parent
module&#8217;s constructor to allow it to do its initialization. In this
example, we create an object which includes a sequence number to ensure
that the job ids returned from the LRM script is unique.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sub new
{
    my $proto = shift;
    my $class = ref($proto) || $proto;
    my $self = $class-&gt;SUPER::new(@_);
    $self-&gt;{sequence} = 0;

    return $self;
}</pre>
</div>
</div>
<div class="paragraph">
<p>The job interface methods are called with only one argument: the LRM
Adapter object itself. That object contains a
<code>Globus::GRAM::JobDescription</code> object
(<strong><code>$self&#8594;{JobDescription}</code></strong>) which includes the values from the RSL
associated with the request, as well as a few extra values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>job_id</strong></dt>
<dd>
<p>The string returned as the value of JOB_ID in the eturn hash from submit. This won&#8217;t be present for methods called before the job is submitted.</p>
</dd>
<dt class="hdlist1"><strong>uniq_id</strong></dt>
<dd>
<p>A string associated with this job request by the job manager program. It will be unique for all jobs on a host for all time and might be useful in creating temporary files or LRM-specific processing.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Now, let&#8217;s look at the methods which will interface to the LRM.</p>
</div>
</div>
<div class="sect4">
<h5 id="_submitting_jobs">Submitting Jobs</h5>
<div class="paragraph">
<p>All LRM adapter modules must implement the <strong><code>submit</code></strong> method. This
method is called when the job manager wishes to submit the job to the
LRM. The information in the original job request RSL string is available
to the LRM adapter interface through the <code>JobDescription</code> data member
of its hash.</p>
</div>
<div class="paragraph">
<p>For most LRM Adapters, this is the longest method to be implemented, as
it must decide what to do with the job description, and convert RSL
elements to something which the LRM can understand.</p>
</div>
<div class="paragraph">
<p>For our fake adapter, we will validate that the two RSL attributes we
process are integers, and if so generate a new unique LRM ID and return
it and the state <strong><code>Globus::GRAM::JobState::PENDING</code></strong>. Note the call
to <strong><code>respond</code></strong> with <code>GT3_FAILURE_MESSAGE</code>. This allows the GRAM5
client application to see the context-sensitive error message along with
the general failure code from GRAM5.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sub submit
{
    my $self = shift;
    my $description = $self-&gt;{JobDescription};
    my $now = time();
    my $jobid;
    my $fh;
    my $pending_time;
    my $active_time;
    my $done_time;
    my $failed_time = 0;

    if ($description-&gt;max_wall_time() != int($description-&gt;max_wall_time()))
    {
        return Globus::GRAM::Error::INVALID_MAX_WALL_TIME;
    }
    elsif ($description-&gt;max_queue_time() !=
        int($description-&gt;max_queue_time()))
    {
        $self-&gt;respond({GT3_FAILURE_MESSAGE =&gt; "Invalid max_queue_time"});

        return Globus::GRAM::Error::INVALID_ATTR;
    }
    $self-&gt;{sequence}++;
    $pending_time = $now;
    $active_time = $pending_time + int($description-&gt;max_queue_time);
    $done_time = $active_time + int($description-&gt;max_wall_time);

    $jobid = sprintf("%.63s", "$$".$self-&gt;{sequence}.".$now");

    if (!open($fh, "&gt;&gt;$job_dir/fakejob.log"))
    {
        $self-&gt;respond({GT3_FAILURE_MESSAGE =&gt; "Unable to write job file"});
        return Globus::GRAM::Error::INVALID_SCRIPT_STATUS;
    }
    print $fh "$jobid;$pending_time;$active_time;$done_time;$failed_time\n";
    close($fh);

    return { JOB_STATE =&gt; Globus::GRAM::JobState::PENDING,
             JOB_ID =&gt; $jobid };
}</pre>
</div>
</div>
<div class="paragraph">
<p>That finishes the submit method. Most of the functionality for the
scheduler interface is now written.</p>
</div>
</div>
<div class="sect4">
<h5 id="_polling_job_state">Polling Job State</h5>
<div class="paragraph">
<p>GRAM5 requires some way to determine the state of a job. In most
systems, writing a Scheduler Event Generator module will provide the
best performance and lowest resource overhead. However, when developing
an LRM adapter, it is helpful to implement the polling interface so that
the submission and cancel mechanism can be tested independent of having
the SEG module completed. For the <code>fake</code> LRM Adapter, we&#8217;ll write a
simple <strong><code>poll</code></strong> method which will compare the current time with the
time when the job was originally submitted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sub poll
{
    my $self = shift;
    my $description = $self-&gt;{JobDescription};
    my $state;
    my $pid;
    my $now;
    my $fh;
    my $pending_time = 0;
    my $active_time;
    my $done_time;
    my $failed_time;
    my $seqno;

    my $jobid = $description-&gt;jobid();

    if(!defined $jobid)
    {
        $self-&gt;log("poll: job id undefined!");
        return { JOB_STATE =&gt; Globus::GRAM::JobState::FAILED };
    }

    open($fh, "&lt;$job_dir/fakejob.log");

    # Multiple matches might occur if the job is cancelled, so we keep looping
    # until EOF
    while (&lt;$fh&gt;)
    {
        chomp;

        my @fields = split(/;/);

        if ($fields[0] ne $jobid)
        {
            next;
        }

        $pending_time = $fields[1];
        $active_time = $fields[2];
        $done_time = $fields[3];
        $failed_time = $fields[4];
    }
    close($fh);

    $now = time();

    if ($pending_time == 0)
    {
        # not found
        $state = Globus::GRAM::JobState::FAILED;
    }
    elsif (int($failed_time) != 0)
    {
        $state = Globus::GRAM::JobState::FAILED;
    }
    elsif ($now &lt; int($active_time))
    {
        $state = Globus::GRAM::JobState::PENDING;
        return
    }
    elsif ($now &lt; int($done_time))
    {
        $state = Globus::GRAM::JobState::ACTIVE;
    }
    else
    {
        $state = Globus::GRAM::JobState::DONE;
    }

    return { JOB_STATE =&gt; $state };
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_cancelling_jobs">Cancelling Jobs</h5>
<div class="paragraph">
<p>All LRM Adapter modules must also implement the <strong><code>cancel</code></strong> method.
The purpose of this method is to cancel a job, whether it&#8217;s already
running or waiting in a queue.</p>
</div>
<div class="paragraph">
<p>This method will be given the job ID as part of the JobDescription
object in the manager object. If the LRM interface provides feedback
that the job was cancelled successfully, then we can return a JOB_STATE
change to the FAILED state. Otherwise we can return an empty hash
reference, and let either the Scheduler Event Generator or a subsequent
call to poll determine when the state change occurs.</p>
</div>
<div class="paragraph">
<p>For the <code>fake</code> LRM adapter, we will update the job file with a
cancellation time and return the <code>Globus::GRAM::JobState::FAILED</code>
state change.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sub cancel
{
    my $self = shift;
    my $description = $self-&gt;{JobDescription};
    my $pgid;
    my $jobid = $description-&gt;jobid();
    my $fh;
    my $pending_time = 0;
    my $active_time;
    my $done_time;
    my $failed_time ;
    my $now = time();

    if(!defined $jobid)
    {
        $self-&gt;log("cancel: no jobid defined!");
        return { JOB_STATE =&gt; Globus::GRAM::JobState::FAILED };
    }

    open($fh, "&lt;$job_dir/fakejob.log");

    # Multiple matches might occur if the job is cancelled, so we keep looping
    # until EOF
    while (&lt;$fh&gt;)
    {
        chomp;

        my @fields = split(/;/);

        if ($fields[0] ne $jobid)
        {
            next;
        }

        $pending_time = $fields[1];
        $active_time = $fields[2];
        $done_time = $fields[3];
        $failed_time = $fields[4];
    }
    close($fh);

    $self-&gt;log("cancel job " . $jobid);
    if ($now &lt; int($done_time) &amp;&amp; int($failed_time) == 0)
    {
        $failed_time = $now;
        $done_time = 0;
        if (!open($fh, "&gt;&gt;$job_dir/fakejob.log"))
        {
            $self-&gt;respond({GT3_FAILURE_MESSAGE =&gt; "Unable to write job file"});
            return Globus::GRAM::Error::INVALID_SCRIPT_STATUS;
        }
        print $fh "$jobid;$pending_time;$active_time;$done_time;$failed_time\n";
        close($fh);
    }

    return { JOB_STATE =&gt; Globus::GRAM::JobState::FAILED };
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_end_of_the_script">End of the script</h5>
<div class="paragraph">
<p>It is required that all perl modules return a non-zero value when they
are parsed. To do this, make sure the last line of your module consists
of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-developer-lrm-adapter-tutorial-seg">LRM SEG Module</h3>
<div class="sect3">
<h4 id="_intro">Intro</h4>
<div class="paragraph">
<p>The Scheduler Event Generator (SEG) module provides an efficient job
monitoring interface between GRAM5 and the underlying local resource
manager. In most cases, the SEG module parses a log generated by the
local resource manager which contains information about job state
changes and then uses the
<a href="http://toolkit.globus.org/api/c-globus-6.0/group%5f%5fglobus%5f%5fscheduler%5f%5fevent%5f%5fgenerator.html">SEG
API</a> to signal job state changes as they occur.</p>
</div>
<div class="paragraph">
<p>A SEG module is implemented as a shared library which is loaded as a
globus extension. This means that the only entry point to the library is
a globus_module_descriptor, which defines activation and deactivation
functions for the library. For this tutorial, we will build up the SEG
module piecewise, but the <a href="seg_fake_module.c">entire fake SEG module
source</a> can be downloaded as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_outline">Outline</h4>
<div class="paragraph">
<p>The outline for our SEG module is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-seg-module-headers">Include Headers</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-specific-data">Module Specific Data</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-prototypes">Module Specific Prototypes</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-descriptor">Extension Module Descriptor</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-activation">Module Activation</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-deactivation">Module Deactivation</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-process">Process Events</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-utils">Utility Functions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From this outline, we&#8217;ll explain the various sections of the source file
below.</p>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-depdendencies">LRM Module Dependencies</h4>
<div class="paragraph">
<p>The LRM module uses the globus_common API from Globus for its linked
list, mutual exclusion, timed events, and module dependency tracking. It
also uses the Scheduler Event Generator APIs, which provide functions
for defining and emitting LRM events.</p>
</div>
<div id="gram5-lrm-seg-module-headers" class="paragraph">
<div class="title">Include Headers</div>
<p>For our implementation, we&#8217;ll need to include the headers for the
Globus
modules we&#8217;ll be using. In this case we&#8217;ll be using
<code>globus_common.h</code>,
, <code>globus_scheduler_event_generator.h</code> (which
includes the API for
emitting SEG events), and  (which includes the API
for emitting SEG
events), and <code>globus_scheduler_event_generator_app.h</code>
(which includes
the SEG event type definitions).  (which includes the
SEG event type
definitions).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#include "globus_common.h"
#include "globus_scheduler_event_generator.h"
#include "globus_scheduler_event_generator_app.h"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-specific-data">Module Specific Data</h4>
<div class="paragraph">
<p>For the fake LRM, we need to keep some global state to keep track of
what we&#8217;ve parsed from our LRM&#8217;s log file, and what events are we should
be sending in the future. To do this, we define two data structures, a
<code>fake_job_info_t</code> which defines the set of event timestamps associated
with a job, and <code>fake_state_t</code> which contains the state of the fake
SEG parser.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-seg-fake-job-info">Fake Job Info</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-fake-state">Parser State</a></p>
</li>
</ul>
</div>
<div id="gram5-lrm-seg-fake-job-info" class="paragraph">
<div class="title">Fake Job Info</div>
<p>For the <code>fake_job_info_t</code> structure, we will want to keep track of the LRM id
(an up to 64-character long string), and the timestamps for the pending,
active, failed, and done events for the job. We use the timestamp value of
<code>0</code> to indicate an event which will not happen or has already been processed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>typedef struct
{
    char  jobid[64];
    time_t pending;
    time_t active;
    time_t failed;
    time_t done;
}
fake_job_info_t;</pre>
</div>
</div>
<div class="paragraph">
<p>In addition, we will keep a null initializer for the <code>fake_job_info_t</code>
structure so that we can simply initialize dynamically allocated data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/* A statically-initialized empty job info which is used to initialize
 * dynamically allocated fake_job_info_t structs
 */
static fake_job_info_t fake_job_info_initializer;</pre>
</div>
</div>
<div id="gram5-lrm-seg-fake-state" class="paragraph">
<div class="title">LRM Parser State</div>
<p>For the LRM parser state, we will keep track of the start time for which we
will emit events, the path to the fake job log, a file pointer open to that
log, and a list of <code>fake_job_info_t</code> structs for each job we have data for.
We also use a mutex/condition variable combination to block deactivation until
all callback functions have completed. The data in this struct is initialized
in the module&#8217;s activation function below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/**
 * State of the FAKE log file parser.
 */
static struct
{
    /** Timestamp of when to start generating events from */

    time_t                              start_timestamp;
    /** Log file path */
    char *                              log_path;
    /** Log file pointer */
    FILE *                              log;
    /** List of job info containing future info we might need to
      * turn into job state changes
      */
    globus_list_t *                     jobs;
    /**
     * shutdown mutex
     */
    globus_mutex_t                      mutex;
    /**
     * shutdown condition
     */
    globus_cond_t                       cond;
    /**
     * shutdown flag
     */
    globus_bool_t                       shutdown_called;
    /**
     * callback count
     */
    int                                 callback_count;
} globus_l_fake_state;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-prototypes">Module Specific Prototypes</h4>
<div class="paragraph">
<p>For our SEG, we define a small number of static functions to process the
fake job log. These include our activation and deactivation functions,
and our event callback which is called periodically to process the fake
job log. We also have a couple of utility functions to look up entries
in the job list and a predicate used to sort a list of SEG events by
timestamp and jobid.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
int
globus_l_fake_module_activate(void);

static
int
globus_l_fake_module_deactivate(void);

static
void
globus_l_fake_read_callback(void *user_arg);

static
int
globus_l_fake_find_by_job_id(void * datum, void * arg);

static
int
globus_l_fake_compare_events(void * low_datum, void * high_datum, void * relation_args);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-descriptor">Extension Module Descriptor</h4>
<div class="paragraph">
<p>The SEG dynamically loads our code using the Globus Extension API. To
implement the interface it needs, we must define an extension descriptor
so that it can find the entry point to our library. This module
descriptor contains pointers to the activation and deactivation
functions we prototyped above. It can contain other pointers but they
aren&#8217;t needed for our module implementation so we leave them as NULL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GlobusExtensionDefineModule(globus_seg_fake) =
{
    "globus_seg_fake",
    globus_l_fake_module_activate,
    globus_l_fake_module_deactivate,
    NULL,
    NULL,
    NULL
};</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-activation">Module Activation</h4>
<div class="paragraph">
<p>The entry point to our LRM-specific module is the activation function.
This function is invoked by the <strong><code>globus-scheduler-event-generator</code></strong>
program when it starts and dynamically loads the LRM-specific module. It
is not passed any parameters, and is expected to return
<code>GLOBUS_SUCCESS</code> if it is able to activate itself. Typically the
activation function will do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
int
globus_l_fake_module_activate(void)
{</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-module-activate-declare-vars">Declare Variables</a></p>
</li>
<li>
<p><a href="#gram5-lrm-module-activate-dependencies">Activate Dependencies</a></p>
</li>
<li>
<p><a href="#gram5-lrm-module-activate-prepare-shutdown-handler">Prepare Shutdown
Handler</a></p>
</li>
<li>
<p><a href="#gram5-lrm-module-activate-read-configuration">Read Configuration</a></p>
</li>
<li>
<p><a href="#gram5-lrm-module-activate-register-event">Register Event</a></p>
</li>
<li>
<p><a href="#gram5-lrm-module-activate-cleanup-on-failure">Cleanup on Failure</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>    return result;
} /* globus_l_fake_module_activate() */</pre>
</div>
</div>
<div id="gram5-lrm-module-activate-declare-vars" class="paragraph">
<div class="title">Declare Variables</div>
<p>For our activation function, we&#8217;ll use variables to store the path to the
configuration file as well as return values from functions we call.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>char *                              config_path = NULL;
char *                              log_dir;
int                                 rc;
globus_result_t                     result = GLOBUS_SUCCESS;</pre>
</div>
</div>
<div id="gram5-lrm-module-activate-dependencies" class="paragraph">
<div class="title">Activate Dependencies</div>
<p>The headers we&#8217;ve just included contain the module descriptors which we will
activate in our LRM-specific activation function, so that we are able to use
the APIs in those modules. Our module is only ever activated by the SEG module,
so we shouldn&#8217;t activate it. In the activation function for our module, we&#8217;ll
include this fragment</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rc = globus_module_activate(GLOBUS_COMMON_MODULE);
if (rc != GLOBUS_SUCCESS)
{
    fprintf(stderr, "Fatal error activating GLOBUS_COMMON_MODULE\n");

    result = GLOBUS_FAILURE;
    goto activation_failure;
}</pre>
</div>
</div>
<div id="gram5-lrm-module-activate-prepare-shutdown-handler" class="paragraph">
<div class="title">Prepare Shutdown Handler</div>
<p>To handling deactivation safely, we&#8217;ll create a mutex and condition variable to
handle the case of when a shutdown is called while our event handler is
running. In that case, we&#8217;ll set the <strong><code>shutdown_called</code></strong> variable to
<code>GLOBUS_TRUE</code> and then wait until the callback has terminated. Here we just
set the variables to their non-shutdown values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rc = globus_mutex_init(&amp;globus_l_fake_state.mutex, NULL);
if (rc != GLOBUS_SUCCESS)
{
    result = GLOBUS_FAILURE;
    goto mutex_init_failed;
}

rc = globus_cond_init(&amp;globus_l_fake_state.cond, NULL);
if (rc != GLOBUS_SUCCESS)
{
    result = GLOBUS_FAILURE;
    goto cond_init_failed;
}
globus_l_fake_state.shutdown_called = GLOBUS_FALSE;
globus_l_fake_state.callback_count = 0;</pre>
</div>
</div>
<div class="sect4">
<h5 id="gram5-lrm-module-activate-read-configuration">LRM SEG Module Configuration</h5>
<div id="gram5-lrm-module-activate-prepare-read-configuration" class="paragraph">
<div class="title">Read Configuration</div>
<p>There are two main pieces of configuation information we&#8217;ll need to process SEG
events: the earliest timestamp we care about (which we get from the SEG module)
and the path to our fake job log file (which we get from our configuration file
as in the perl module).</p>
</div>
<div class="paragraph">
<p>So first, to get the timestamp, we&#8217;ll use the
<strong><code>globus_scheduler_event_generator_get_timestamp()</code></strong> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>result = globus_scheduler_event_generator_get_timestamp(
        &amp;globus_l_fake_state.start_timestamp);
if (result != GLOBUS_SUCCESS)
{
    goto get_timestamp_failed;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Then, to get the configuration file data, we first construct the path to
the configuration file and then pull out the configuration attribute
<code>log_path</code>, falling back to the default (<code>${localstatedir}/fake</code> if
it is not found.  if it is not found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>result = globus_eval_path(
        "${sysconfdir}/globus/globus-fake.conf",
        &amp;config_path);
if (result != GLOBUS_SUCCESS || config_path == NULL)
{
    goto get_config_path_failed;
}
result = globus_common_get_attribute_from_config_file(
        "",
        config_path,
        "log_path",
        &amp;log_dir);

/* This default must match fake.pm's default for things to work */
if (result != GLOBUS_SUCCESS)
{
    result = globus_eval_path("${localstatedir}/fake", &amp;log_dir);
}

if (result != GLOBUS_SUCCESS)
{
    goto get_log_dir_failed;
}

globus_l_fake_state.log_path =
    globus_common_create_string("%s/fakejob.log", log_dir);
if (globus_l_fake_state.log_path == NULL)
{
    result = GLOBUS_FAILURE;

    goto get_log_path_failed;
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="gram5-lrm-module-activate-register-event">Register Event</h5>
<div class="paragraph">
<p>The next main action the activation function does is to register an
event to happen later to process the events in the LRM log. For this, we
use the <strong><code>globus_callback_register_oneshot()</code></strong> function to register
an event handler to execute as soon as possible within the
<strong><code>globus-scheduduler-event-generator</code></strong> program. The callback
function in this case is the globus_l_fake_read_callback() function
defined later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>result = globus_callback_register_oneshot(
        NULL,
        NULL,
        globus_l_fake_read_callback,
        &amp;globus_l_fake_state);
if (result != GLOBUS_SUCCESS)
{
    goto register_oneshot_failed;
}
globus_l_fake_state.callback_count++;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="gram5-lrm-module-activate-cleanup-on-failure">Cleanup on Failure</h5>
<div class="paragraph">
<p>Here we handle the errors that might have occurred above and free
temporarily used memory. In case of a failure, <strong><code>result</code></strong> is set to
something other than <code>GLOBUS_SUCCESS</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>register_oneshot_failed:
get_log_path_failed:
    if (result != GLOBUS_SUCCESS)
    {
        free(globus_l_fake_state.log_path);
    }
    free(log_dir);
get_log_dir_failed:
    free(config_path);
get_config_path_failed:
get_timestamp_failed:
    if (result != GLOBUS_SUCCESS)
    {
malloc_state_failed:
        globus_cond_destroy(&amp;globus_l_fake_state.cond);
cond_init_failed:
        globus_mutex_destroy(&amp;globus_l_fake_state.mutex);
mutex_init_failed:
        globus_module_deactivate(GLOBUS_COMMON_MODULE);
    }
activation_failure:</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-deactivation">Module Deactivation</h4>
<div class="paragraph">
<p>For our deactivation function, we will wait use the shutdown handling
variables in the state structure to wait until all outstanding callback
have terminated and then free memory associated with the state.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
int
globus_l_fake_module_deactivate(void)
{</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-seg-deactivate-shutdown">Shutdown Handling</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-deactivate-free-state">Cleanup State</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>} /* globus_l_fake_module_deactivate() */</pre>
</div>
</div>
<div id="gram5-lrm-seg-deactivate-shutdown" class="paragraph">
<div class="title">Shutdown Handling</div>
<p>To handle shutdown safely, we must wait until pending callbacks have
terminated. To do this, we set the <code>shutdown_called</code> field in the state
structure and wait until the <code>callback_count</code> field is <code>0</code>.  Inside the
callback function, if we see that the <code>shutdown_called</code> field is
<code>GLOBUS_TRUE</code> then it will not reregister itself and will signal when it
terminates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus_mutex_lock(&amp;globus_l_fake_state.mutex);
globus_l_fake_state.shutdown_called = GLOBUS_TRUE;
while (globus_l_fake_state.callback_count &gt; 0)
{
    globus_cond_wait(&amp;globus_l_fake_state.cond, &amp;globus_l_fake_state.mutex);
}
globus_mutex_unlock(&amp;globus_l_fake_state.mutex);</pre>
</div>
</div>
<div id="gram5-lrm-seg-deactivate-free-state" class="paragraph">
<div class="title">Cleanup State</div>
<p>Finally, we&#8217;ll free data we allocated in the activation function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus_mutex_destroy(&amp;globus_l_fake_state.mutex);
globus_cond_destroy(&amp;globus_l_fake_state.cond);
free(globus_l_fake_state.log_path);
if (globus_l_fake_state.log)
{
    fclose(globus_l_fake_state.log);
}
while (!globus_list_empty(globus_l_fake_state.jobs))
{
    fake_job_info_t *info;

    info = globus_list_remove(
            &amp;globus_l_fake_state.jobs,
            globus_l_fake_state.jobs);

    free(info);
}

globus_module_deactivate(GLOBUS_COMMON_MODULE);

return GLOBUS_SUCCESS;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-process">Process Events</h4>
<div class="paragraph">
<p>The main activity of our LRM module is to generate SEG events so that a
job manager will be able to efficient manage its jobs. In this code, we
will parse our log file periodically, and fire off any events which are
to have occurred for the jobs in the fake job log. The structure of the
processing function is this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
void
globus_l_fake_read_callback(void * arg)
{</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-seg-read-declare-vars">Declare Variables</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-check-for-shutdown">Check for Shutdown</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-open-log">Open Log</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-read-log">Read Log</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-create-events">Create Events</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-emit-events">Emit Events</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-reregister">Reregister Callback</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-read-error-handling">Error Handling</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>} /* globus_l_fake_read_callback() */</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-declare-vars" class="listingblock">
<div class="title">Declare Variables</div>
<div class="content">
<pre>char                                jobid[64];
globus_list_t                      *l, *events;
fake_job_info_t                     *info;
globus_reltime_t                    delay = {0};
time_t                              now;
unsigned long                       pending_time, active_time, done_time,
                                    failed_time;
globus_scheduler_event_t            *e;
time_t                              last_timestamp;
globus_result_t                     result = GLOBUS_SUCCESS;</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-check-for-shutdown" class="paragraph">
<div class="title">Check for Shutdown</div>
<p>To check for shutdown, we&#8217;ll first lock the mutex associated with the state
structure and check if the <code>shutdown_called</code> field is set to true. If so,
we&#8217;ll jump to our error handling code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>globus_mutex_lock(&amp;globus_l_fake_state.mutex);
if (globus_l_fake_state.shutdown_called)
{
    result = GLOBUS_FAILURE;

    goto error;
}</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-open-log" class="paragraph">
<div class="title">Open Log</div>
<p>In general, we&#8217;ll keep a file open to parse the log, but the first time around,
or before any events have been written, the log file might not exist. So we&#8217;ll
check to see if we have a <code>NULL</code> file pointer, and if so, try to open the
file. Once opened, we&#8217;ll use line buffering while we process the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if (globus_l_fake_state.log == NULL)
{
    globus_l_fake_state.log = fopen(globus_l_fake_state.log_path, "r");

    if (globus_l_fake_state.log != NULL)
    {
        /* Enable line buffering */
        setvbuf(globus_l_fake_state.log, NULL, _IOLBF, 0);

    }
}
if (globus_l_fake_state.log == NULL)
{
    result = GLOBUS_FAILURE;

    GlobusTimeReltimeSet(delay, 30, 0);
    goto reregister;
}</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-read-log" class="paragraph">
<div class="title">Read Log</div>
<p>Now we will read all of the log entries from our current position until the end
of file. If we&#8217;ve already parsed an entry for a particular job, we will zero
out its timestamps and replace with the new timestamps to handle cancel events
in the fake job log.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/* previous read might have hit EOF, so clear it before trying to read */
clearerr(globus_l_fake_state.log);

/* Read any new job info from the log */
    while (fscanf(globus_l_fake_state.log,
                "%63[^;];%ld;%ld;%ld;%ld\n",
                jobid, &amp;pending_time, &amp;active_time, &amp;done_time, &amp;failed_time)
        == 5)
{
    l = globus_list_search_pred(globus_l_fake_state.jobs,
            globus_l_fake_find_by_job_id, jobid);
    if (l != NULL)
    {
        info = globus_list_first(l);
        /* If there's a second entry for the same job, it was cancelled, so
         * clear done/failed timestamps and copy them below
         */
        info-&gt;done = info-&gt;failed = 0;
    }
    else
    {
        /* First time we've seen this job, set jobid and insert*/
        info = malloc(sizeof(fake_job_info_t));
        *info = fake_job_info_initializer;
        strcpy(info-&gt;jobid, jobid);

        globus_list_insert(&amp;globus_l_fake_state.jobs, info);
    }
    /* set timestamps */
    info-&gt;pending = pending_time;
    info-&gt;active = active_time;
    info-&gt;done = done_time;
    info-&gt;failed = failed_time;
}</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-create-events" class="paragraph">
<div class="title">Create Events</div>
<p>Now, we&#8217;ll walk our list of jobs and create SEG events for each state
transition which has occurred since our last timestamp and the current time.
These events will be out of order in our events list, because they are created
in order of job IDs in the jobs list, and not in timestamp list. We&#8217;ll deal
with this later. Note that we set the timestamp values in the job info to 0
after we create an event. This keeps us from generating an event multiple
times.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/* Create set of events that we'll emit this time through: jobs which will
 * changed state since our last event update
 */
now = time(NULL);

events = NULL;
for (l = globus_l_fake_state.jobs; l != NULL; l = globus_list_rest(l))
{
    info = globus_list_first(l);

    if (info-&gt;pending &gt;= globus_l_fake_state.start_timestamp &amp;&amp;
        info-&gt;pending &lt; now)
    {
        e = malloc(sizeof(globus_scheduler_event_t));
        e-&gt;event_type = GLOBUS_SCHEDULER_EVENT_PENDING;
        e-&gt;job_id = info-&gt;jobid;
        e-&gt;timestamp = info-&gt;pending;
        e-&gt;exit_code = 0;
        e-&gt;failure_code = 0;
        e-&gt;raw_event = NULL;

        info-&gt;pending = 0;

        globus_list_insert(&amp;events, e);
    }
    if (info-&gt;active &gt;= globus_l_fake_state.start_timestamp &amp;&amp;
        info-&gt;active &lt; now)
    {
        e = malloc(sizeof(globus_scheduler_event_t));
        e-&gt;event_type = GLOBUS_SCHEDULER_EVENT_ACTIVE;
        e-&gt;job_id = info-&gt;jobid;
        e-&gt;timestamp = info-&gt;active;
        e-&gt;exit_code = 0;
        e-&gt;failure_code = 0;
        e-&gt;raw_event = NULL;

        info-&gt;active = 0;

        globus_list_insert(&amp;events, e);
    }
    if (info-&gt;done != 0 &amp;&amp; info-&gt;done &gt;= globus_l_fake_state.start_timestamp &amp;&amp;
        info-&gt;done &lt; now)
    {
        e = malloc(sizeof(globus_scheduler_event_t));
        e-&gt;event_type = GLOBUS_SCHEDULER_EVENT_DONE;
        e-&gt;job_id = info-&gt;jobid;
        e-&gt;timestamp = info-&gt;done;
        e-&gt;exit_code = 0;
        e-&gt;failure_code = 0;
        e-&gt;raw_event = NULL;

        info-&gt;done = 0;

        globus_list_insert(&amp;events, e);
    }
    if (info-&gt;failed != 0 &amp;&amp;
        info-&gt;failed &gt;= globus_l_fake_state.start_timestamp &amp;&amp;
        info-&gt;failed &lt; now)
    {
        e = malloc(sizeof(globus_scheduler_event_t));
        e-&gt;event_type = GLOBUS_SCHEDULER_EVENT_FAILED;
        e-&gt;job_id = info-&gt;jobid;
        e-&gt;timestamp = info-&gt;failed;
        e-&gt;exit_code = 0;
        e-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_USER_CANCELLED;
        e-&gt;raw_event = NULL;

        info-&gt;failed = 0;
        globus_list_insert(&amp;events, e);
    }
}</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-emit-events" class="paragraph">
<div class="title">Emit Events</div>
<p>Now we have a set of events, we will sort them by timestamp and then use the
SEG API to emit them. After we&#8217;ve emitted an event, we have to free it. If the
event is a terminal one (DONE or FAILED) we&#8217;ll remove the job from the list of
jobs in the state structure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/* Sort the events so that they're in timestamp order */
events = globus_list_sort_destructive(
        events, globus_l_fake_compare_events, NULL);

/* Emit events in proper order */
while (! globus_list_empty(events))
{
    e = globus_list_remove(&amp;events, events);
    last_timestamp = e-&gt;timestamp;

    switch (e-&gt;event_type)
    {
        case GLOBUS_SCHEDULER_EVENT_PENDING:
            globus_scheduler_event_pending(e-&gt;timestamp, e-&gt;job_id);
            break;
        case GLOBUS_SCHEDULER_EVENT_ACTIVE:
            globus_scheduler_event_active(e-&gt;timestamp, e-&gt;job_id);
            break;
        case GLOBUS_SCHEDULER_EVENT_FAILED:
            globus_scheduler_event_failed(e-&gt;timestamp, e-&gt;job_id,
                    e-&gt;failure_code);
            break;
        case GLOBUS_SCHEDULER_EVENT_DONE:
            globus_scheduler_event_done(e-&gt;timestamp, e-&gt;job_id, e-&gt;exit_code);
            break;
    }
    /* If this is a terminal event, we can remove the job from the list */
    if (e-&gt;event_type == GLOBUS_SCHEDULER_EVENT_FAILED ||
        e-&gt;event_type == GLOBUS_SCHEDULER_EVENT_DONE)
    {
        l = globus_list_search_pred(globus_l_fake_state.jobs,
                globus_l_fake_find_by_job_id, e-&gt;job_id);
        info = globus_list_remove(&amp;globus_l_fake_state.jobs, l);
        free(info);
    }

    free(e);
}
globus_l_fake_state.start_timestamp = last_timestamp;</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-reregister" class="paragraph">
<div class="title">Reregister Callback</div>
<p>We&#8217;ll register a new callback instance now (provided we haven&#8217;t had
an error occur) so that we can continue to process jobs later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    GlobusTimeReltimeSet(delay, 1, 0);
reregister:
    result = globus_callback_register_oneshot(
            NULL,
            &amp;delay,

    globus_l_fake_read_callback, &amp;globus_l_fake_state);
    if (result != GLOBUS_SUCCESS)
    {
        goto error;
    }
    globus_mutex_unlock(&amp;globus_l_fake_state.mutex);
return;</pre>
</div>
</div>
<div id="gram5-lrm-seg-read-error-handling" class="paragraph">
<div class="title">Error Handling</div>
<p>If an error occurred registering the event or the shutdown handler is invoked,
we&#8217;ll exit this function without registering a new event.  In the case the
shutdown handling is in place, we&#8217;ll signal that as well</p>
</div>
<div class="listingblock">
<div class="content">
<pre>error:
    if (globus_l_fake_state.shutdown_called)
    {
        globus_l_fake_state.callback_count--;

        if (globus_l_fake_state.callback_count == 0)
        {
            globus_cond_signal(&amp;globus_l_fake_state.cond);
        }
    }
    else
    {
        fprintf(stderr,
            "FATAL: Unable to register callback. FAKE SEG exiting\n");

        exit(EXIT_FAILURE);
    }
    globus_mutex_unlock(&amp;globus_l_fake_state.mutex);

    return;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-lrm-seg-module-utils">Utility Functions</h4>
<div class="paragraph">
<p>We have two utility functions to implement for this module to manage our
lists of pending events and jobs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gram5-lrm-seg-module-find-job">Find By Job ID</a></p>
</li>
<li>
<p><a href="#gram5-lrm-seg-module-compare-events">Sort Events</a></p>
</li>
</ul>
</div>
<div id="gram5-lrm-seg-module-find-job" class="paragraph">
<div class="title">Find By Job ID</div>
<p>The <strong><code>globus_l_fake_find_by_job_id()</code></strong> function is used to search the
<code>jobs</code> field of the state structure for a <code>fake_job_info_t</code> containing info
about a particular job. This predicate returns a non-zero value if the <em>datum</em>
passed to the function has the same job ID as the <em>arg</em> parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
int
globus_l_fake_find_by_job_id(void * datum, void * arg)
{
    fake_job_info_t * info = datum;

    return (strcmp(info-&gt;jobid, arg) == 0);
} /* globus_l_fake_find_by_job_id() */</pre>
</div>
</div>
<div id="gram5-lrm-seg-module-compare-events" class="paragraph">
<div class="title">Sort Events</div>
<p>The <strong><code>globus_l_fake_compare_events()</code></strong> function is used as a predicate to
compare the timestamps and job ids of a pair of events.  If the <em>log_datum</em>
points to an event which happens earlier in the job lifecycle than the
<em>high_datum</em>, this function returns <code>GLOBUS_TRUE</code>; otherwise it returns
<code>GLOBUS_FALSE</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>static
int
globus_l_fake_compare_events(void * low_datum, void * high_datum,
        void * relation_args)
{
    globus_scheduler_event_t *low_event = low_datum, *high_event = high_datum;

    if (low_event-&gt;timestamp &lt; high_event-&gt;timestamp)
    {
        return GLOBUS_TRUE;
    }
    else if (low_event-&gt;timestamp == high_event-&gt;timestamp)
    {
        if (low_event-&gt;event_type == GLOBUS_SCHEDULER_EVENT_PENDING)
        {
            return GLOBUS_TRUE;
        }
        else if (low_event-&gt;event_type == GLOBUS_SCHEDULER_EVENT_ACTIVE &amp;&amp;
                high_event-&gt;event_type != GLOBUS_SCHEDULER_EVENT_PENDING)
        {
            return GLOBUS_TRUE;
        }
        else if (high_event-&gt;event_type != GLOBUS_SCHEDULER_EVENT_PENDING &amp;&amp;
            high_event-&gt;event_type != GLOBUS_SCHEDULER_EVENT_ACTIVE)
        {
            return GLOBUS_TRUE;
        }
    }
    return GLOBUS_FALSE;
} /*
globus_l_fake_compare_events() */</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-lrma-tutorial-perl-changes">Changes from Previous Versions</h3>
<div class="sect3">
<h4 id="_changes_in_gt_5_2">Changes in GT 5.2</h4>
<div class="paragraph">
<p>GRAM5 is now designed to work as a native debian or RPM package, with
default configuration being done at configuration time, so the setup
script description has been removed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_changes_in_gt_5_0">Changes in GT 5.0</h4>
<div class="paragraph">
<p>GRAM5 is based again on the C code base used for GRAM2 (also known as
Pre-WS GRAM). The SEG module interface from GRAM4 is retained and
optionally used by GRAM5. The GRAM job manager will avoid reloading the
GRAM LRM Adapter script for each operation, so all variables not
intended to be global state in the Perl LRM Adapter module must be
lexically scoped, or state will leak between jobs and cause potentially
cause problems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_changes_in_gt_4_0">Changes in GT 4.0</h4>
<div class="sect4">
<h5 id="_module_methods">Module Methods</h5>
<div class="paragraph">
<p>The GT-4.0 ws-GRAM service only calls a subset of the Perl methods which
were used by the pre-ws GRAM services. Most importantly for script
implementors, the polling method is no longer used. Instead, the
scheduler-event-generator monitors jobs to signal the service when job
change changes occur. Staging is now done via the Reliable File Transfer
service, so the file_stage_in and file_stage_out methods are no longer
called. Schedulers typically did not implement the staging methods, so
this shouldn&#8217;t affect most scheduler modules.</p>
</div>
<div class="paragraph">
<p>That being said, scheduler implementers which would like to have their
scheduler both with pre-ws GRAM and WS-GRAM should definitely implement
the poll() method described in the pre-WS version of this tutorial.</p>
</div>
</div>
<div class="sect4">
<h5 id="_gass_cache">GASS Cache</h5>
<div class="paragraph">
<p>The GT-4.0 ws-GRAM service does not use the GASS cache for storing
temporary files or for staging files.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_changes_in_gt_3_2">Changes in GT 3.2</h4>
<div class="paragraph">
<p>In GT 3.2, additional error message context info was added. Scripts can
optionally add one of these fields to the return hash from an operation
to provide extra error information to the client:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>GT3_FAILURE_MESSAGE</strong></dt>
<dd>
<p>Error message from underlying script processing indicating what caused a job request to fail</p>
</dd>
<dt class="hdlist1"><strong>GT3_FAILURE_TYPE</strong></dt>
<dd>
<p>One of <code>filestagein</code>, <code>filestageout</code>, <code>filestageinshared</code>, <code>executable</code>, or <code>stdin</code> indicating what job request element caused a staging fault.</p>
</dd>
<dt class="hdlist1"><strong>GT3_FAILURE_SOURCE</strong></dt>
<dd>
<p>Source URL or file for a failed staging operation</p>
</dd>
<dt class="hdlist1"><strong>GT3_FAILURE_DESTINATION</strong></dt>
<dd>
<p>Destination URL or file for a failed staging operation</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<h1 id="_gram5_developer_s_reference" class="sect0">GRAM5 Developer&#8217;s Reference</h1>
<div class="sect1">
<h2 id="gram5-apis">APIs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_c_api_documentation_links">C API Documentation Links</h3>
<div class="paragraph">
<p>
<strong><a href="http://toolkit.globus.org/api/c-globus-6.0/group%5f%5fglobus%5f%5fgram%5f%5fprotocol.html">GRAM Protocol</a></strong>::
     Low-level functions for processing GRAM protocol messages. Symbolic constants for RSL attributes, signals, and job states.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><a href="http://toolkit.globus.org/api/c-globus-6.0/group%5f%5fglobus%5f%5fgram%5f%5fclient.html">GRAM Client</a></strong></dt>
<dd>
<p>Functions for submitting job requests, sending signals, and listening for job state updates.</p>
</dd>
<dt class="hdlist1"><strong><a href="http://toolkit.globus.org/api/c-globus-6.0/group%5f%5fglobus%5f%5frsl.html">RSL</a></strong></dt>
<dd>
<p>Functions for parsing and manipulating job specifications in the RSL language.</p>
</dd>
<dt class="hdlist1"><strong><a href="http://toolkit.globus.org/api/c-globus-6.0/group%5f%5fglobus%5f%5fscheduler%5f%5fevent%5f%5fgenerator.html">Scheduler Event Generator</a></strong></dt>
<dd>
<p>Functions for generating and parsing LRM-independent job state change events.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_gram5_perl_api_reference">GRAM5 Perl API Reference</h3>
<div class="paragraph">
<p>GRAM5 also provides a Perl API for creating LRM interface implementations.</p>
</div>
<div class="sect3">
<h4 id="Globus::GRAM::Error">GLOBUS::GRAM::ERROR(3pm)</h4>
<div class="sect4">
<h5 id="_name">NAME</h5>
<div class="paragraph">
<p>Globus::GRAM::Error - GRAM Protocol Error Constants</p>
</div>
</div>
<div class="sect4">
<h5 id="ID-c60796a234d35f578606676c401dfc40">DESCRIPTION</h5>
<div class="paragraph">
<p>The Globus::GRAM::Error module defines symbolic names for the Error
constants in the GRAM Protocol.</p>
</div>
<div class="paragraph">
<p>The Globus::GRAM::Error module methods return an object consisting of an
integer erorr code, and (optionally) a string explaining the error.</p>
</div>
<div class="sect5">
<h6 id="ID-e31d1ff6b6a89fcd7541fdba326160a1">Methods</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>$error = new Globus::GRAM::Error($number, $string);</strong></dt>
<dd>
<p>     Create a new error object with the given error number and string
description. This is called by the error-specific factory methods
described below.</p>
</dd>
<dt class="hdlist1"><strong>$error&#8594;string()</strong></dt>
<dd>
<p>Return the error string associated with a Globus::GRAM::Error object.</p>
</dd>
<dt class="hdlist1"><strong>$error&#8594;value()</strong></dt>
<dd>
<p>     Return the integer error code associated with a Globus::GRAM::Error
object.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::PARAMETER_NOT_SUPPORTED()</strong></dt>
<dd>
<p>Create a new PARAMETER_NOT_SUPPORTED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_REQUEST()</strong></dt>
<dd>
<p>Create a new INVALID_REQUEST GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::NO_RESOURCES()</strong></dt>
<dd>
<p>Create a new NO_RESOURCES GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_DIRECTORY()</strong></dt>
<dd>
<p>Create a new BAD_DIRECTORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::EXECUTABLE_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new EXECUTABLE_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INSUFFICIENT_FUNDS()</strong></dt>
<dd>
<p>Create a new INSUFFICIENT_FUNDS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::AUTHORIZATION()</strong></dt>
<dd>
<p>Create a new AUTHORIZATION GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::USER_CANCELLED()</strong></dt>
<dd>
<p>Create a new USER_CANCELLED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::SYSTEM_CANCELLED()</strong></dt>
<dd>
<p>Create a new SYSTEM_CANCELLED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::PROTOCOL_FAILED()</strong></dt>
<dd>
<p>Create a new PROTOCOL_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STDIN_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new STDIN_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CONNECTION_FAILED()</strong></dt>
<dd>
<p>Create a new CONNECTION_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_MAXTIME()</strong></dt>
<dd>
<p>Create a new INVALID_MAXTIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_COUNT()</strong></dt>
<dd>
<p>Create a new INVALID_COUNT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::NULL_SPECIFICATION_TREE()</strong></dt>
<dd>
<p>Create a new NULL_SPECIFICATION_TREE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JM_FAILED_ALLOW_ATTACH()</strong></dt>
<dd>
<p>Create a new JM_FAILED_ALLOW_ATTACH GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOB_EXECUTION_FAILED()</strong></dt>
<dd>
<p>Create a new JOB_EXECUTION_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_PARADYN()</strong></dt>
<dd>
<p>Create a new INVALID_PARADYN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_JOBTYPE()</strong></dt>
<dd>
<p>Create a new INVALID_JOBTYPE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_GRAM_MYJOB()</strong></dt>
<dd>
<p>Create a new INVALID_GRAM_MYJOB GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_SCRIPT_ARG_FILE()</strong></dt>
<dd>
<p>Create a new BAD_SCRIPT_ARG_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::ARG_FILE_CREATION_FAILED()</strong></dt>
<dd>
<p>Create a new ARG_FILE_CREATION_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_JOBSTATE()</strong></dt>
<dd>
<p>Create a new INVALID_JOBSTATE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SCRIPT_REPLY()</strong></dt>
<dd>
<p>Create a new INVALID_SCRIPT_REPLY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SCRIPT_STATUS()</strong></dt>
<dd>
<p>Create a new INVALID_SCRIPT_STATUS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOBTYPE_NOT_SUPPORTED()</strong></dt>
<dd>
<p>Create a new JOBTYPE_NOT_SUPPORTED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::UNIMPLEMENTED()</strong></dt>
<dd>
<p>Create a new UNIMPLEMENTED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::TEMP_SCRIPT_FILE_FAILED()</strong></dt>
<dd>
<p>Create a new TEMP_SCRIPT_FILE_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::USER_PROXY_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new USER_PROXY_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_USER_PROXY()</strong></dt>
<dd>
<p>Create a new OPENING_USER_PROXY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOB_CANCEL_FAILED()</strong></dt>
<dd>
<p>Create a new JOB_CANCEL_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::MALLOC_FAILED()</strong></dt>
<dd>
<p>Create a new MALLOC_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::DUCT_INIT_FAILED()</strong></dt>
<dd>
<p>Create a new DUCT_INIT_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::DUCT_LSP_FAILED()</strong></dt>
<dd>
<p>Create a new DUCT_LSP_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_HOST_COUNT()</strong></dt>
<dd>
<p>Create a new INVALID_HOST_COUNT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::UNSUPPORTED_PARAMETER()</strong></dt>
<dd>
<p>Create a new UNSUPPORTED_PARAMETER GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_QUEUE()</strong></dt>
<dd>
<p>Create a new INVALID_QUEUE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_PROJECT()</strong></dt>
<dd>
<p>Create a new INVALID_PROJECT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_EVALUATION_FAILED()</strong></dt>
<dd>
<p>Create a new RSL_EVALUATION_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_RSL_ENVIRONMENT()</strong></dt>
<dd>
<p>Create a new BAD_RSL_ENVIRONMENT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::DRYRUN()</strong></dt>
<dd>
<p>Create a new DRYRUN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::ZERO_LENGTH_RSL()</strong></dt>
<dd>
<p>Create a new ZERO_LENGTH_RSL GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STAGING_EXECUTABLE()</strong></dt>
<dd>
<p>Create a new STAGING_EXECUTABLE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STAGING_STDIN()</strong></dt>
<dd>
<p>Create a new STAGING_STDIN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_JOB_MANAGER_TYPE()</strong></dt>
<dd>
<p>Create a new INVALID_JOB_MANAGER_TYPE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_ARGUMENTS()</strong></dt>
<dd>
<p>Create a new BAD_ARGUMENTS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::GATEKEEPER_MISCONFIGURED()</strong></dt>
<dd>
<p>Create a new GATEKEEPER_MISCONFIGURED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_RSL()</strong></dt>
<dd>
<p>Create a new BAD_RSL GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::VERSION_MISMATCH()</strong></dt>
<dd>
<p>Create a new VERSION_MISMATCH GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_ARGUMENTS()</strong></dt>
<dd>
<p>Create a new RSL_ARGUMENTS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_COUNT()</strong></dt>
<dd>
<p>Create a new RSL_COUNT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_DIRECTORY()</strong></dt>
<dd>
<p>Create a new RSL_DIRECTORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_DRYRUN()</strong></dt>
<dd>
<p>Create a new RSL_DRYRUN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_ENVIRONMENT()</strong></dt>
<dd>
<p>Create a new RSL_ENVIRONMENT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_EXECUTABLE()</strong></dt>
<dd>
<p>Create a new RSL_EXECUTABLE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_HOST_COUNT()</strong></dt>
<dd>
<p>Create a new RSL_HOST_COUNT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_JOBTYPE()</strong></dt>
<dd>
<p>Create a new RSL_JOBTYPE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MAXTIME()</strong></dt>
<dd>
<p>Create a new RSL_MAXTIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MYJOB()</strong></dt>
<dd>
<p>Create a new RSL_MYJOB GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_PARADYN()</strong></dt>
<dd>
<p>Create a new RSL_PARADYN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_PROJECT()</strong></dt>
<dd>
<p>Create a new RSL_PROJECT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_QUEUE()</strong></dt>
<dd>
<p>Create a new RSL_QUEUE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_STDERR()</strong></dt>
<dd>
<p>Create a new RSL_STDERR GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_STDIN()</strong></dt>
<dd>
<p>Create a new RSL_STDIN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_STDOUT()</strong></dt>
<dd>
<p>Create a new RSL_STDOUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_JOBMANAGER_SCRIPT()</strong></dt>
<dd>
<p>Create a new OPENING_JOBMANAGER_SCRIPT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CREATING_PIPE()</strong></dt>
<dd>
<p>Create a new CREATING_PIPE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::FCNTL_FAILED()</strong></dt>
<dd>
<p>Create a new FCNTL_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STDOUT_FILENAME_FAILED()</strong></dt>
<dd>
<p>Create a new STDOUT_FILENAME_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STDERR_FILENAME_FAILED()</strong></dt>
<dd>
<p>Create a new STDERR_FILENAME_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::FORKING_EXECUTABLE()</strong></dt>
<dd>
<p>Create a new FORKING_EXECUTABLE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::EXECUTABLE_PERMISSIONS()</strong></dt>
<dd>
<p>Create a new EXECUTABLE_PERMISSIONS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_STDOUT()</strong></dt>
<dd>
<p>Create a new OPENING_STDOUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_STDERR()</strong></dt>
<dd>
<p>Create a new OPENING_STDERR GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_CACHE_USER_PROXY()</strong></dt>
<dd>
<p>Create a new OPENING_CACHE_USER_PROXY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_CACHE()</strong></dt>
<dd>
<p>Create a new OPENING_CACHE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INSERTING_CLIENT_CONTACT()</strong></dt>
<dd>
<p>Create a new INSERTING_CLIENT_CONTACT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CLIENT_CONTACT_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new CLIENT_CONTACT_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CONTACTING_JOB_MANAGER()</strong></dt>
<dd>
<p>Create a new CONTACTING_JOB_MANAGER GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_JOB_CONTACT()</strong></dt>
<dd>
<p>Create a new INVALID_JOB_CONTACT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::UNDEFINED_EXE()</strong></dt>
<dd>
<p>Create a new UNDEFINED_EXE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CONDOR_ARCH()</strong></dt>
<dd>
<p>Create a new CONDOR_ARCH GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CONDOR_OS()</strong></dt>
<dd>
<p>Create a new CONDOR_OS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MIN_MEMORY()</strong></dt>
<dd>
<p>Create a new RSL_MIN_MEMORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MAX_MEMORY()</strong></dt>
<dd>
<p>Create a new RSL_MAX_MEMORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_MIN_MEMORY()</strong></dt>
<dd>
<p>Create a new INVALID_MIN_MEMORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_MAX_MEMORY()</strong></dt>
<dd>
<p>Create a new INVALID_MAX_MEMORY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::HTTP_FRAME_FAILED()</strong></dt>
<dd>
<p>Create a new HTTP_FRAME_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::HTTP_UNFRAME_FAILED()</strong></dt>
<dd>
<p>Create a new HTTP_UNFRAME_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::HTTP_PACK_FAILED()</strong></dt>
<dd>
<p>Create a new HTTP_PACK_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::HTTP_UNPACK_FAILED()</strong></dt>
<dd>
<p>Create a new HTTP_UNPACK_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_JOB_QUERY()</strong></dt>
<dd>
<p>Create a new INVALID_JOB_QUERY GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::SERVICE_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new SERVICE_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOB_QUERY_DENIAL()</strong></dt>
<dd>
<p>Create a new JOB_QUERY_DENIAL GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::CALLBACK_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new CALLBACK_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::BAD_GATEKEEPER_CONTACT()</strong></dt>
<dd>
<p>Create a new BAD_GATEKEEPER_CONTACT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::POE_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new POE_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::MPIRUN_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new MPIRUN_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_START_TIME()</strong></dt>
<dd>
<p>Create a new RSL_START_TIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_RESERVATION_HANDLE()</strong></dt>
<dd>
<p>Create a new RSL_RESERVATION_HANDLE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MAX_WALL_TIME()</strong></dt>
<dd>
<p>Create a new RSL_MAX_WALL_TIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_MAX_WALL_TIME()</strong></dt>
<dd>
<p>Create a new INVALID_MAX_WALL_TIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_MAX_CPU_TIME()</strong></dt>
<dd>
<p>Create a new RSL_MAX_CPU_TIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_MAX_CPU_TIME()</strong></dt>
<dd>
<p>Create a new INVALID_MAX_CPU_TIME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JM_SCRIPT_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new JM_SCRIPT_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JM_SCRIPT_PERMISSIONS()</strong></dt>
<dd>
<p>Create a new JM_SCRIPT_PERMISSIONS GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::SIGNALING_JOB()</strong></dt>
<dd>
<p>Create a new SIGNALING_JOB GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::UNKNOWN_SIGNAL_TYPE()</strong></dt>
<dd>
<p>Create a new UNKNOWN_SIGNAL_TYPE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::GETTING_JOBID()</strong></dt>
<dd>
<p>Create a new GETTING_JOBID GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::WAITING_FOR_COMMIT()</strong></dt>
<dd>
<p>Create a new WAITING_FOR_COMMIT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::COMMIT_TIMED_OUT()</strong></dt>
<dd>
<p>Create a new COMMIT_TIMED_OUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_SAVE_STATE()</strong></dt>
<dd>
<p>Create a new RSL_SAVE_STATE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_RESTART()</strong></dt>
<dd>
<p>Create a new RSL_RESTART GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_TWO_PHASE_COMMIT()</strong></dt>
<dd>
<p>Create a new RSL_TWO_PHASE_COMMIT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_TWO_PHASE_COMMIT()</strong></dt>
<dd>
<p>Create a new INVALID_TWO_PHASE_COMMIT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_STDOUT_POSITION()</strong></dt>
<dd>
<p>Create a new RSL_STDOUT_POSITION GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_STDOUT_POSITION()</strong></dt>
<dd>
<p>Create a new INVALID_STDOUT_POSITION GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_STDERR_POSITION()</strong></dt>
<dd>
<p>Create a new RSL_STDERR_POSITION GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_STDERR_POSITION()</strong></dt>
<dd>
<p>Create a new INVALID_STDERR_POSITION GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RESTART_FAILED()</strong></dt>
<dd>
<p>Create a new RESTART_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::NO_STATE_FILE()</strong></dt>
<dd>
<p>Create a new NO_STATE_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::READING_STATE_FILE()</strong></dt>
<dd>
<p>Create a new READING_STATE_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::WRITING_STATE_FILE()</strong></dt>
<dd>
<p>Create a new WRITING_STATE_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OLD_JM_ALIVE()</strong></dt>
<dd>
<p>Create a new OLD_JM_ALIVE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::TTL_EXPIRED()</strong></dt>
<dd>
<p>Create a new TTL_EXPIRED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::SUBMIT_UNKNOWN()</strong></dt>
<dd>
<p>Create a new SUBMIT_UNKNOWN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_REMOTE_IO_URL()</strong></dt>
<dd>
<p>Create a new RSL_REMOTE_IO_URL GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::WRITING_REMOTE_IO_URL()</strong></dt>
<dd>
<p>Create a new WRITING_REMOTE_IO_URL GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STDIO_SIZE()</strong></dt>
<dd>
<p>Create a new STDIO_SIZE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JM_STOPPED()</strong></dt>
<dd>
<p>Create a new JM_STOPPED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::USER_PROXY_EXPIRED()</strong></dt>
<dd>
<p>Create a new USER_PROXY_EXPIRED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOB_UNSUBMITTED()</strong></dt>
<dd>
<p>Create a new JOB_UNSUBMITTED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_COMMIT()</strong></dt>
<dd>
<p>Create a new INVALID_COMMIT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_SCHEDULER_SPECIFIC()</strong></dt>
<dd>
<p>Create a new RSL_SCHEDULER_SPECIFIC GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STAGE_IN_FAILED()</strong></dt>
<dd>
<p>Create a new STAGE_IN_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SCRATCH()</strong></dt>
<dd>
<p>Create a new INVALID_SCRATCH GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_CACHE()</strong></dt>
<dd>
<p>Create a new RSL_CACHE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SUBMIT_ATTRIBUTE()</strong></dt>
<dd>
<p>Create a new INVALID_SUBMIT_ATTRIBUTE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_STDIO_UPDATE_ATTRIBUTE()</strong></dt>
<dd>
<p>Create a new INVALID_STDIO_UPDATE_ATTRIBUTE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_RESTART_ATTRIBUTE()</strong></dt>
<dd>
<p>Create a new INVALID_RESTART_ATTRIBUTE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_FILE_STAGE_IN()</strong></dt>
<dd>
<p>Create a new RSL_FILE_STAGE_IN GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_FILE_STAGE_IN_SHARED()</strong></dt>
<dd>
<p>Create a new RSL_FILE_STAGE_IN_SHARED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_FILE_STAGE_OUT()</strong></dt>
<dd>
<p>Create a new RSL_FILE_STAGE_OUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_GASS_CACHE()</strong></dt>
<dd>
<p>Create a new RSL_GASS_CACHE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_FILE_CLEANUP()</strong></dt>
<dd>
<p>Create a new RSL_FILE_CLEANUP GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_SCRATCH()</strong></dt>
<dd>
<p>Create a new RSL_SCRATCH GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SCHEDULER_SPECIFIC()</strong></dt>
<dd>
<p>Create a new INVALID_SCHEDULER_SPECIFIC GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::UNDEFINED_ATTRIBUTE()</strong></dt>
<dd>
<p>Create a new UNDEFINED_ATTRIBUTE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_CACHE()</strong></dt>
<dd>
<p>Create a new INVALID_CACHE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_SAVE_STATE()</strong></dt>
<dd>
<p>Create a new INVALID_SAVE_STATE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::OPENING_VALIDATION_FILE()</strong></dt>
<dd>
<p>Create a new OPENING_VALIDATION_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::READING_VALIDATION_FILE()</strong></dt>
<dd>
<p>Create a new READING_VALIDATION_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_PROXY_TIMEOUT()</strong></dt>
<dd>
<p>Create a new RSL_PROXY_TIMEOUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_PROXY_TIMEOUT()</strong></dt>
<dd>
<p>Create a new INVALID_PROXY_TIMEOUT GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STAGE_OUT_FAILED()</strong></dt>
<dd>
<p>Create a new STAGE_OUT_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::JOB_CONTACT_NOT_FOUND()</strong></dt>
<dd>
<p>Create a new JOB_CONTACT_NOT_FOUND GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::DELEGATION_FAILED()</strong></dt>
<dd>
<p>Create a new DELEGATION_FAILED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::LOCKING_STATE_LOCK_FILE()</strong></dt>
<dd>
<p>Create a new LOCKING_STATE_LOCK_FILE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_ATTR()</strong></dt>
<dd>
<p>Create a new INVALID_ATTR GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::NULL_PARAMETER()</strong></dt>
<dd>
<p>Create a new NULL_PARAMETER GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::STILL_STREAMING()</strong></dt>
<dd>
<p>Create a new STILL_STREAMING GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::AUTHORIZATION_DENIED()</strong></dt>
<dd>
<p>Create a new AUTHORIZATION_DENIED GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::AUTHORIZATION_SYSTEM_FAILURE()</strong></dt>
<dd>
<p>Create a new AUTHORIZATION_SYSTEM_FAILURE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::AUTHORIZATION_DENIED_JOB_ID()</strong></dt>
<dd>
<p>Create a new AUTHORIZATION_DENIED_JOB_ID GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::AUTHORIZATION_DENIED_EXECUTABLE()</strong></dt>
<dd>
<p>Create a new AUTHORIZATION_DENIED_EXECUTABLE GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::RSL_USER_NAME()</strong></dt>
<dd>
<p>Create a new RSL_USER_NAME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::INVALID_USER_NAME()</strong></dt>
<dd>
<p>Create a new INVALID_USER_NAME GRAM error.</p>
</dd>
<dt class="hdlist1"><strong>$error = Globus::GRAM::Error::LAST()</strong></dt>
<dd>
<p>Create a new LAST GRAM error.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Globus::GRAM::JobDescription">GLOBUS::GRAM::JOBDESCRIPTION(3pm)</h4>
<div class="sect4">
<h5 id="_name_2">NAME</h5>
<div class="paragraph">
<p>Globus::GRAM::JobDescription - GRAM Job Description</p>
</div>
</div>
<div class="sect4">
<h5 id="_name_3">NAME</h5>
<div class="literalblock">
<div class="content">
<pre>-</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ID-0438a8e2a51c2613b43085fb482b3c22">DESCRIPTION</h5>
<div class="paragraph">
<p>This object contains the parameters of a job request in a simple object
wrapper. The object may be queried to determine the value of any RSL
parameter, may be updated with new parameters, and may be saved in the
filesystem for later use.</p>
</div>
<div class="sect5">
<h6 id="ID-2f6bf008e67124e4a12aa84b09ebfce3">Methods</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>new Globus::GRAM::JobDescription(</strong>$filename<strong>)</strong></dt>
<dd>
<p>     A JobDescription is constructed from a file consisting of a Perl hash of
parameter &#8658; array mappings. Every value in the Job Description is
stored internally as an array, even single literals, similar to the way
an RSL tree is parsed in C. An example of such a file is</p>
<div class="listingblock">
<div class="content">
<pre>$description =
{
    executable  =&gt; [ '/bin/echo' ],
    arguments   =&gt; [ 'hello', 'world' ],
    environment =&gt; [
                       [
                           'GLOBUS_GRAM_JOB_CONTACT',
                           'https://globus.org:1234/2345/4332'
                       ]
                   ]
};</pre>
</div>
</div>
<div class="paragraph">
<p>which corresponds to the rsl fragment</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&amp;(executable  = /bin/echo)
 (arguments   = hello world)
 (environment =
     (GLOBUS_GRAM_JOB_CONTACT 'https://globus.org:1234/2345/4332')
 )</pre>
</div>
</div>
<div class="paragraph">
<p>When the library_path RSL attribute is specified, this object modifies
the environment RSL attribute value to append its value to any system
specific variables.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$description&#8594;</strong>add<strong>(<em>name</em>, </strong>$value<strong>);</strong></dt>
<dd>
<p>     Add a parameter to a job description. The parameter will be normalized
internally so that the access methods described below will work with
this new parameter. As an example,</p>
<div class="listingblock">
<div class="content">
<pre>$description-&gt;add('new_attribute', $new_value)</pre>
</div>
</div>
<div class="paragraph">
<p>will create a new attribute in the JobDescription, which can be accessed
by calling the <strong>$description-</strong>new_attribute&gt;() method.</p>
</div>
</dd>
<dt class="hdlist1"><strong><strong>*$value</strong> $description&#8594;<strong>get</strong>(<em>name</em>);</strong>*</dt>
<dd>
<p>Get a parameter from a job description. As an example,</p>
<div class="listingblock">
<div class="content">
<pre>$description-&gt;get('attribute')</pre>
</div>
</div>
<div class="paragraph">
<p>will return the appropriate attribute in the JobDescription by name.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$description&#8594;</strong>save<strong>([$filename])</strong></dt>
<dd>
<p>     Save the JobDescription, including any added parameters, to the file
named by $filename if present, or replacing the file used in
constructing the object.</p>
</dd>
<dt class="hdlist1"><strong>$description&#8594;</strong>print_recursive<strong>($file_handle)</strong></dt>
<dd>
<p>     Write the value of the job description object to the file handle
specified in the argument list.</p>
</dd>
<dt class="hdlist1"><strong>$description&#8594;</strong>parameter<strong>()</strong></dt>
<dd>
<p>     For any parameter defined in the JobDescription can be accessed by
calling the method named by the parameter. The method names are
automatically created when the JobDescription is created, and may be
invoked with arbitrary SillyCaps or underscores. That is, the parameter
gram_myjob may be accessed by the GramMyJob, grammyjob, or gram_my_job
method names (and others).</p>
<div class="paragraph">
<p>If the attributes does not in this object, then undef will be returned.</p>
</div>
<div class="paragraph">
<p>In a list context, this returns the list of values associated with an
attribute.</p>
</div>
<div class="paragraph">
<p>In a scalar context, if the attribute&#8217;s value consist of a single
literal, then that literal will be returned, otherwise undef will be
returned.</p>
</div>
<div class="paragraph">
<p>For example, from a JobDescription called $d constructed from a
description file containing</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    executable =&gt; [ '/bin/echo' ],
    arguments  =&gt; [ 'hello', 'world' ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>The following will hold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$executable = $d-&gt;executable()    # '/bin/echo'
$arguments = $d-&gt;arguments()      # undef
@executable = $d-&gt;executable()    # ('/bin/echo')
@arguments = $d-&gt;arguments()      # ('hello', 'world')
$not_present = $d-&gt;not_present()  # undef
@not_present = $d-&gt;not_present()  # ()</pre>
</div>
</div>
<div class="paragraph">
<p>To test for existence of a value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@not_present = $d-&gt;not_present()
print "Not defined\n" if(!defined($not_present[0]));</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Globus::GRAM::JobManager">GLOBUS::GRAM::JOBMANAGER(3pm)</h4>
<div class="sect4">
<h5 id="_name_4">NAME</h5>
<div class="paragraph">
<p>Globus::GRAM::JobManager - Base class for all Job Manager scripts</p>
</div>
</div>
<div class="sect4">
<h5 id="_name_5">NAME</h5>
<div class="literalblock">
<div class="content">
<pre>-</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ID-e96f19759006b55f2a0d9c05142531b8">DESCRIPTION</h5>
<div class="paragraph">
<p>The Globus::GRAM::JobManager module implements the base behavior for a
Job Manager script interface. Scheduler-specific job manager scripts
must inherit from this module in order to be used by the job manager.</p>
</div>
<div class="sect5">
<h6 id="ID-68252c34977081809bd73a304acda1f6">Methods</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>$manager = Globus::GRAM::JobManager&#8594;new($JobDescription)</strong></dt>
<dd>
<p>     Each Globus::GRAM::JobManager object is created by calling the
constructor with a single argument, a Globus::GRAM::JobDescription
object containing the information about the job request which the script
will be modifying. Modules which subclass Globus::GRAM::JobManager MUST
call the super-class&#8217;s constructor, as in this code fragment:</p>
<div class="listingblock">
<div class="content">
<pre>my $proto = shift;
my $class = ref($proto) || $proto;
my $self = $class-&gt;SUPER::new(@_);

bless $self, $class;</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;log($string)</strong></dt>
<dd>
<p>     Log a message to the job manager log file. The message is preceded by a
timestamp.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;nfssync($object,$create)</strong></dt>
<dd>
<p>     Send an NFS update by touching the file (or directory) in question. If
the $create is true, a file will be created. If it is false, the $object
will not be created.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;respond($message)</strong></dt>
<dd>
<p>     Send a response to the job manager program. The response may either be a
hash reference consisting of a hash of (variable, value) pairs, which
will be returned to the job manager, or an already formatted string.
This only needs to be directly called by a job manager implementation
when the script wants to send a partial response while processing one of
the scheduler interface methods (for example, to indicate that a file
has been staged).</p>
<div class="paragraph">
<p>The valid keys for a response are defined in the RESPONSES section.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;submit()</strong></dt>
<dd>
<p>     Submit a job request to the scheduler. The default implementation
returns with the Globus::GRAM::Error::UNIMPLEMENTED error. Scheduler
specific subclasses should reimplement this method to submit the job to
the scheduler.</p>
<div class="paragraph">
<p>A scheduler which implements this method should return a hash reference
containing a scheduler-specific job identifier as the value of the
hash&#8217;s JOB_ID key, and optionally, the a GRAM job state as the value of
the hash&#8217;s JOB_STATE key if the job submission was successful; otherwise
a Globus::GRAM::Error value should be returned. The job state values are
defined in the Globus::GRAM::JobState module. The job parameters (as
found in the job rsl) are defined in Globus::GRAM::Jobdescription object
in $self&#8594;{JobDescription}.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>return {JOB_STATE =&gt; Globus::GRAM::JobState::PENDING,
        JOB_ID =&gt; $job_id};</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;poll()</strong></dt>
<dd>
<p>     Poll a job&#8217;s status. The default implementation returns with the
Globus::GRAM::Error::UNIMPLEMENTED error. Scheduler specific subclasses
should reimplement this method to poll the scheduler.</p>
<div class="paragraph">
<p>A scheduler which implements this method should return a hash reference
containing the JOB_STATE value. The job&#8217;s ID can be accessed by calling
the $self&#8594;{JobDescription}&#8594;jobid() method.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;cancel()</strong></dt>
<dd>
<p>     Cancel a job. The default implementation returns with the
Globus::GRAM::Error::UNIMPLEMENTED error. Scheduler specific subclasses
should reimplement this method to remove the job from the scheduler.</p>
<div class="paragraph">
<p>A scheduler which implements this method should return a hash reference
containing the JOB_STATE value. The job&#8217;s ID can be accessed by calling
the $self&#8594;{JobDescription}&#8594;jobid() method.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;signal()</strong></dt>
<dd>
<p>     Signal a job. The default implementation returns with the
Globus::GRAM::Error::UNIMPLEMENTED error. Scheduler specific subclasses
should reimplement this method to remove the job from the scheduler. The
JobManager module can determine the job&#8217;s ID, the signal number, and the
(optional) signal arguments from the Job Description by calling it&#8217;s
job_id(), signal(), and and signal_arg() methods, respectively.</p>
<div class="paragraph">
<p>Depending on the signal, it may be appropriate for the JobManager object
to return a hash reference containing a JOB_STATE update.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;make_scratchdir()</strong></dt>
<dd>
<p>     Create a scratch directory for a job. The scratch directory location is
based on the JobDescription&#8217;s scratch_dir_base() and scratch_dir()
methods.</p>
<div class="paragraph">
<p>If the scratch_dir() value is a relative path, then a directory will be
created as a subdirectory of scratch_dir_base()/scratch_dir(),
otherwise, it will be created as a subdirectory of scratch_dir(). This
method will return a hash reference containing mapping SCRATCH_DIR to
the absolute path of newly created scratch directory if successful.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;remove_scratchdir()</strong></dt>
<dd>
<p>     Delete a job&#8217;s scratch directory. All files and subdirectories of the
JobDescription&#8217;s scratch_directory() will be deleted.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;file_cleanup()</strong></dt>
<dd>
<p>     Delete some job-related files. All files listed in the JobDescription&#8217;s
file_cleanup() array will be deleted.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;rewrite_urls()</strong></dt>
<dd>
<p>     Looks up URLs listed in the JobDescription&#8217;s stdin() and executable(),
and replaces them with paths to locally cached copies.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;stage_in()</strong></dt>
<dd>
<p>     Stage input files need for the job from remote storage. The files to be
staged are defined by the array of [URL, path] pairs in the job
description&#8217;s file_stage_in() and file_stage_in_shared() methods. The
Globus::GRAM::JobManager module provides an implementation of this
functionality using the globus-url-copy and globus-gass-cache programs.
Files which are staged in are not automatically removed when the job
terminates.</p>
<div class="paragraph">
<p>This function returns intermediate responses using the
Globus::GRAM::JobManager::response() method to let the job manager know
when each individual file has been staged.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;stage_out()</strong></dt>
<dd>
<p>     Stage output files generated by this job to remote storage. The files to
be staged are defined by the array of [URL, destination] pairs in the
job description&#8217;s file_stage_out() method. The Globus::GRAM::JobManager
module provides an implementation of this functionality using the
globus-url-copy program. Files which are staged out are not removed by
this method.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;cache_cleanup()</strong></dt>
<dd>
<p>Clean up cache references in the GASS which match this job&#8217;s cache tag .</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;remote_io_file_create()</strong></dt>
<dd>
<p>     Create the remote I/O file in the job dir which will contain the
remote_io_url RSL attribute&#8217;s value.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;proxy_relocate()</strong></dt>
<dd>
<p>     Relocate the delegated proxy for job execution. Job Managers need to
override the default if they intend to relocate the proxy into some
common file system other than the cache. The job manager program does
not depend on the new location of the proxy. Job Manager modules must
not remove the default proxy.</p>
</dd>
<dt class="hdlist1"><strong>$hashref = $manager&#8594;proxy_update();</strong></dt>
<dt class="hdlist1"><strong>$manager&#8594;append_path($ref, $var, $path)</strong></dt>
<dd>
<p>     Append $path to the value of $ref&#8594;{$var}, dealing with the case where
$ref&#8594;{$var} is not yet defined.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;pipe_out_cmd(@arg)</strong></dt>
<dd>
<p>     Create a new process to run the first argument application with the
remaining arguments (which may be empty). No shell metacharacter will be
evaluated, avoiding a shell invocation. Stderr is redirected to
/dev/null and stdout is being captured by the parent process, which is
also the result returned. In list mode, all lines are returned, in
scalar mode, only the first line is being returned. The line termination
character is already cut off. Use this function as more efficient
backticks, if you do not need shell metacharacter evaluation.</p>
<div class="paragraph">
<p>Caution: This function deviates in two manners from regular backticks.
Firstly, it chomps the line terminator from the output. Secondly, it
returns only the first line in scalar context instead of a multiline
concatinated string. As with regular backticks, the result may be
undefined in scalar context, if no result exists.</p>
</div>
<div class="paragraph">
<p>A child error code with an exit code of 127 indicates that the
application could not be run. The scalar result returned by this
function is usually undef&#8217;ed in this case.</p>
</div>
</dd>
<dt class="hdlist1"><strong>($stder, $rc) = $manager&#8594;pipe_err_cmd(@arg)</strong></dt>
<dd>
<p>     Create a new process to run the first argument application with the
remaining arguments (which may be empty). No shell metacharacter will be
evaluated, avoiding a shell invocation.</p>
<div class="paragraph">
<p>This method returns a list of two items, the standard error of the
program, and the exit code of the program. If the error code is 127,
then the application could not be run. Standard output is discarded.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;fork_and_exec_cmd(@arg)</strong></dt>
<dd>
<p>     Fork off a child to run the first argument in the list. Remaining
arguments will be passed, but shell interpolation is avoided. Signals
SIGINT and SIGQUIT are ignored in the child process. Stdout is appended
to /dev/null, and stderr is dup2 from stdout. The parent waits for the
child to finish, and returns the value for the CHILD_ERROR variable as
result. Use this function as more efficient system() call, if you can do
not need shell metacharacter evaluation.</p>
<div class="paragraph">
<p>Note that the inability to execute the program will result in a status
code of 127.</p>
</div>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;job_dir()</strong></dt>
<dd>
<p>     Return the temporary directory to store job-related files, which have no
need for file caching.</p>
</dd>
<dt class="hdlist1"><strong>$manager&#8594;setup_softenv()</strong></dt>
<dd>
<p>     Either add a line to the specified command script file handle to load
the user&#8217;s default SoftEnv configuration, or create a custom SoftEnv
script and add commands to the specified command script file handle to
load it.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ID-bcb5fd9dba9a920db0007cc56619dab1">RESPONSES</h5>
<div class="paragraph">
<p>When returning from a job interface method, or when sending an
intermediate response via the <strong>response</strong>() method, the following hash
keys are valid:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JOB_STATE**::
     An integer job state value. These are enumerated in the
Globus::GRAM::JobState module.</p>
</li>
<li>
<p>ERROR**::
     An integer error code. These are enumerated in the Globus::GRAM::Error
module.</p>
</li>
<li>
<p>JOB_ID<strong>::
     A string containing a job identifier, which can be used to poll, cancel,
or signal a job in progress. This response should only be returned by
the </strong>submit** method.</p>
</li>
<li>
<p>SCRATCH_DIR<strong>::
     A string containing the path to a newly-created scratch directory. This
response should only be returned by the </strong>make_scratchdir** method.</p>
</li>
<li>
<p>STAGED_IN<strong>::
     A string containing the (URL, path) pair for a file which has now been
staged in. This response should only be returned by the </strong>stage_in**
method.</p>
</li>
<li>
<p>STAGED_IN_SHARED<strong>::
     A string containing the (URL, path) pair for a file which has now been
staged in and symlinked from the cache. This response should only be
returned by the </strong>stage_in_shared** method.</p>
</li>
<li>
<p>STAGED_OUT<strong>::
     A string containing the (path, URL) pair for a file which has now been
staged out by the script. This response should only be returned by the
</strong>stage_out** method.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Globus::GRAM::JobSignal">GLOBUS::GRAM::JOBSIGNAL(3pm)</h4>
<div class="sect4">
<h5 id="_name_6">NAME</h5>
<div class="paragraph">
<p>Globus::GRAM::JobSignal - GRAM Protocol JobSignal Constants</p>
</div>
</div>
<div class="sect4">
<h5 id="ID-dde2a5ed0f147b3205232afefdde1cf6">DESCRIPTION</h5>
<div class="paragraph">
<p>The Globus::GRAM::JobSignal module defines symbolic names for the
JobSignal constants in the GRAM Protocol.</p>
</div>
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
<div class="sect5">
<h6 id="ID-0b9db17dce2bf5bf77e6e0e93adbbea3">Methods</h6>
<div class="sidebarblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>$value = Globus::GRAM::CANCEL()</strong></dt>
<dd>
<p>Return the value of the CANCEL constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::SUSPEND()</strong></dt>
<dd>
<p>Return the value of the SUSPEND constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::RESUME()</strong></dt>
<dd>
<p>Return the value of the RESUME constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::PRIORITY()</strong></dt>
<dd>
<p>Return the value of the PRIORITY constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::COMMIT_REQUEST()</strong></dt>
<dd>
<p>Return the value of the COMMIT_REQUEST constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::COMMIT_EXTEND()</strong></dt>
<dd>
<p>Return the value of the COMMIT_EXTEND constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::STDIO_UPDATE()</strong></dt>
<dd>
<p>Return the value of the STDIO_UPDATE constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::STDIO_SIZE()</strong></dt>
<dd>
<p>Return the value of the STDIO_SIZE constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::STOP_MANAGER()</strong></dt>
<dd>
<p>Return the value of the STOP_MANAGER constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::COMMIT_END()</strong></dt>
<dd>
<p>Return the value of the COMMIT_END constant.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Globus::GRAM::JobState">GLOBUS::GRAM::JOBSTATE(3pm)</h4>
<div class="sect4">
<h5 id="_name_7">NAME</h5>
<div class="paragraph">
<p>Globus::GRAM::JobState - GRAM Protocol JobState Constants</p>
</div>
</div>
<div class="sect4">
<h5 id="ID-419977e2b3d9757b513072e147336574">DESCRIPTION</h5>
<div class="paragraph">
<p>The Globus::GRAM::JobState module defines symbolic names for the
JobState constants in the GRAM Protocol.</p>
</div>
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
<div class="sect5">
<h6 id="ID-578427db2c7ceece9803b48cb0e9fe8c">Methods</h6>
<div class="sidebarblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>$value = Globus::GRAM::PENDING()</strong></dt>
<dd>
<p>Return the value of the PENDING constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::ACTIVE()</strong></dt>
<dd>
<p>Return the value of the ACTIVE constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::FAILED()</strong></dt>
<dd>
<p>Return the value of the FAILED constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::DONE()</strong></dt>
<dd>
<p>Return the value of the DONE constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::SUSPENDED()</strong></dt>
<dd>
<p>Return the value of the SUSPENDED constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::UNSUBMITTED()</strong></dt>
<dd>
<p>Return the value of the UNSUBMITTED constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::STAGE_IN()</strong></dt>
<dd>
<p>Return the value of the STAGE_IN constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::STAGE_OUT()</strong></dt>
<dd>
<p>Return the value of the STAGE_OUT constant.</p>
</dd>
<dt class="hdlist1"><strong>$value = Globus::GRAM::ALL()</strong></dt>
<dd>
<p>Return the value of the ALL constant.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-rsl">RSL Specification v1.1</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This is a document to specify the existing RSL v1.0 implementation and
interfaces, as they are provided in the GCT 6.0 release. This document
serves as a reference, and more introductory text.</p>
</div>
<div class="paragraph">
<p>The Globus Resource Specification Language (RSL) provides a common
interchange language to describe resources. The various components of
the Globus Resource Management architecture manipulate RSL strings to
perform their management functions in cooperation with the other
components in the system. The RSL provides the skeletal syntax used to
compose complicated resource descriptions, and the various resource
management components introduce specific <em>'ATTRIBUTE</em>',<em>'VALUE</em>'&gt;
pairings into this common structure. Each attribute in a resource
description serves as a parameter to control the behavior of one or more
components in the resource management system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-syntax-overview">RSL Syntax Overview</h3>
<div class="paragraph">
<p>The core syntax of the RSL syntax is the <strong>relation</strong>. Relations
associate an attribute name with a value, eg the relation
<code>executable=a.out</code> provides the name of an executable in a resource
request. There are two generative syntactic structures in the RSL that
are used to build more complicated resource descriptions out of the
basic relations: <strong>compound requests</strong> and <strong>value sequences</strong>. In
addition, the RSL syntax includes a facility to both introduce and
dereference string <strong>substitution variables</strong>.</p>
</div>
<div class="paragraph">
<p>The simplest form of compound request, utilized by all resource
management components, is the conjunct-request. The conjuct-request
expresses a conjunction of simple relations or compound requests (like a
boolean AND). The most common conjunct-request in Globus RSL strings is
the combination of multiple relations such as executable name, node
count, executable arguments, and output files for a basic GRAM job
request. Similarly, the core RSL syntax includes a disjunct-request form
to represent disjunctive relations (like a boolean OR). Currently,
however, no resource management component utilizes the disjunct-request
form.</p>
</div>
<div class="paragraph">
<p>The last form of compound request is the multi-request. The
multi-request expresses multiple parallel resources that make up a
resource description. The multi-request form differs from the
conjunction and disjunction in two ways: multi-requests introduce new
variable scope, meaning variables defined in one clause of a
multi-request are not visible to the other clauses, and multi-requests
introduce a non-reducible hierarchy to the resource description. Whereas
relations within a conjunct-request can be thought of as <strong>constraints</strong>
on the resource being described, the subclauses of a multi-request are
best thought of as individual resource descriptions that together
constitute an abstract resource collection; the same attributes may be
<strong>constrained</strong> in different ways in each subclause without causing a
logical contradiction. An example of a contradiction would be to
constrain the <code>executable</code> attribute to be two conflicting values
within a conjunction. Currently, however, no resource management
component utilizes the disjunct-request form.</p>
</div>
<div class="paragraph">
<p>The simplest form of value in the RSL syntax is the string literal. When
explicitly quoted, literals can contain any character, and many common
literals that don&#8217;t contain special characters can appear without
quotes. Values can also be variable references, in which case the
variable reference is in essence <strong>replaced</strong> with the string value
defined for that variable. RSL descriptions can also express
string-concatenation of values, especially useful to construct long
strings out of several variable references. String concatenation is
supported with both an explicit concatenation operator and implicit
concatenation for many idiomatic constructions involving variable
references and literals.</p>
</div>
<div class="paragraph">
<p>In addition to the simple value forms given above, the RSL syntax
includes the value sequence to express ordered sets of values. The value
sequence syntax is used primarily for defining variables and for
providing the argument list for a program.</p>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-tokenization-overview">RSL Tokenization Overview</h3>
<div class="paragraph">
<p>Each RSL string consists of a sequence of RSL tokens, whitespace, and
comments. The RSL tokens are either special syntax or regular unquoted
literals, where special syntax contains one or more of the following
listed special characters and unquoted literals are made of sequences of
characters excluding the special characters.</p>
</div>
<div class="paragraph">
<p>The complete set of special characters that cannot appear as part of an
unquoted literal is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>+</code> (plus)</p>
</li>
<li>
<p><code>&amp;</code> (ampersand)</p>
</li>
<li>
<p><code>|</code> (pipe)</p>
</li>
<li>
<p><code>(</code>(left paren)</p>
</li>
<li>
<p><code>)</code> (right paren)</p>
</li>
<li>
<p><code>=</code> (equal)</p>
</li>
<li>
<p><code>&lt;</code> (left angle)</p>
</li>
<li>
<p><code>&gt;</code> (right angle)</p>
</li>
<li>
<p><code>!</code> (exclamation)</p>
</li>
<li>
<p><code>"</code> (double quote)</p>
</li>
<li>
<p><code>'</code> (apostrophe)</p>
</li>
<li>
<p><code>^</code> (carat)</p>
</li>
<li>
<p><code>#</code> (pound)</p>
</li>
<li>
<p><code>$</code> (dollar)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These characters can only be used for the special syntactic forms
described in the section and in the section or as within quoted
literals.</p>
</div>
<div class="paragraph">
<p>Quoted literals are introduced with the <code>"</code> (double quote) or <code>'</code>
(single quote/apostrophe) and consist of all the characters up to (but
not including) the next solo double or single quote, respectively. To
escape a quote character within a quoted literal, the appearance of the
quote character twice in a row is converted to a single instance of the
character and the literal continues until the next solo quote character.
For any quoted literal, there is only one possible escape sequence, eg
within a literal delimited by the single quote character only the single
quote character uses the escape notation and the double quote character
can appear without escape.</p>
</div>
<div class="paragraph">
<p>Quoted literals can also be introduced with an alternate <strong>user
delimiter</strong> notation. User delimited literals are introduced with the
<code>^</code> (carat) character followed immediately by a user-provided
delimiter; the literal consists of all the characters after the user&#8217;s
delimiter up to (but not including) the next solo instance of the
delimiter. The delimiter itself may be escaped within the literal by
providing two instances in a row, just as the regular quote delimiters
are escaped in regular quoted literals.</p>
</div>
<div class="paragraph">
<p>RSL string comments use a notation similar to comments in the C
programming language. Comments are introduced by the prefix <code>(*</code>.
Comments continue to the first terminating suffix <code>*)</code> and cannot be
nested. Comments are stripped from the RSL string during processing and
are syntactically equivalent to whitespace.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Quoted Literal Examples</div>
<div class="content">
<div class="paragraph">
<p>Assign the value <code>Hello. Welcome to "The Grid"</code> to the attribute
<code>arguments</code>, using double-quote as the delimiter and the escaping
sequence.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>arguments = "Hello. Welcome to ""The Grid"""</pre>
</div>
</div>
<div class="paragraph">
<p>Assign the value <code>Hello. Welcome to "The Grid"</code> to the attribute
<code>arguments</code> using the single-quote delimiter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>arguments = 'Hello. Welcome to "The Grid'</pre>
</div>
</div>
<div class="paragraph">
<p>Assign the value <code>Hello. Welcome to "The Grid"</code> to the attribute
<code>arguments</code> using a user-defined quoting character <code>!</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>arguments = ^!Hello. Welcome to "The Grid"!</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-substitution-semantics">RSL Substitution Semantics</h3>
<div class="paragraph">
<p>RSL strings can introduce and reference string variables. String
substitution variables are defined in a special relation using the
<code>rsl_substitution</code> attribute, and the definitions affect variable
references made in the same conjunct-request (or disjunct-request), as
well as references made within any multi-request nested inside one of
the clauses of the conjunction (or disjunction). Each multi-request
introduces a new variable scope for each subrequest, and variable
definitions do not escape the closest enclosing scope.</p>
</div>
<div class="paragraph">
<p>Within any given scope, variable definitions are processed left-to-right
in the resource description. Outermost scopes are processed before inner
scopes, and the definitions in inner scopes augment the inherited
definitions with new and/or updated variable definitions.</p>
</div>
<div class="paragraph">
<p>Variable definitions and variable references are processed in a single
pass, with each definition updating the <strong>environment</strong> prior to
processing the next definition. The value provided in a variable
definition may include a reference to a previously-defined variable.
References to variables that are not yet provided with definitions in
the standard RSL variable processing order are replaced with an empty
literal string.</p>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-attribute-summary">RSL Attribute Summary</h3>
<div class="paragraph">
<p>The RSL syntax is extensible because it defines structure without too
many keywords. Each Globus resource management component introduces
additional attributes to the set recognized by RSL-aware components, so
it is difficult to provide a complete listing of attributes which might
appear in a resource description. Resource management components are
designed to utilize attributes they recognize and pass unrecongnized
relations through unchanged. This allows powerful compositions of
different resource management functions.</p>
</div>
<div class="paragraph">
<p>The following listing summarizes the attribute names utilized by
existing resource management components in the standard GCT release.
Please see the individual component documentation for discussion of the
attribute semantics.</p>
</div>
<div class="sect3">
<h4 id="_rsl_5">RSL(5)</h4>
<div class="sect4">
<h5 id="_name_8">NAME</h5>
<div class="paragraph">
<p>rsl - GRAM5 RSL Attributes</p>
</div>
</div>
<div class="sect4">
<h5 id="_description">Description</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><code>arguments</code></strong></dt>
<dd>
<p>The command line arguments for the executable. Use quotes, if a space is required in a single argument.</p>
</dd>
<dt class="hdlist1"><strong><code>count</code></strong></dt>
<dd>
<p>The number of executions of the executable. [Default: <code>1</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>directory</code></strong></dt>
<dd>
<p>Specifies the path of the directory the jobmanager will use as the default directory for the requested job. [Default: <code>$(HOME)</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>dry_run</code></strong></dt>
<dd>
<p>If dryrun = yes then the jobmanager will not submit the job for execution and will return success. [Default: <code>no</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>environment</code></strong></dt>
<dd>
<p>The environment variables that will be defined for the executable in addition to default set that is given to the job by the jobmanager.</p>
</dd>
<dt class="hdlist1"><strong><code>executable</code></strong></dt>
<dd>
<p>The name of the executable file to run on the remote machine. If the value is a GASS URL, the file is transferred to the remote gass cache before executing the job and removed after the job has terminated.</p>
</dd>
<dt class="hdlist1"><strong><code>expiration</code></strong></dt>
<dd>
<p>Time (in seconds) after a a job fails to receive a two-phase commit end signal before it is cleaned up. [Default: <code>14400</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>file_clean_up</code></strong></dt>
<dd>
<p>Specifies a list of files which will be removed after the job is completed.</p>
</dd>
<dt class="hdlist1"><strong><code>file_stage_in</code></strong></dt>
<dd>
<p>Specifies a list of ("remote URL" "local file") pairs which indicate files to be staged to the nodes which will run the job.</p>
</dd>
<dt class="hdlist1"><strong><code>file_stage_in_shared</code></strong></dt>
<dd>
<p>Specifies a list of ("remote URL" "local file") pairs which indicate files to be staged into the cache. A symlink from the cache to the "local file" path will be made.</p>
</dd>
<dt class="hdlist1"><strong><code>file_stage_out</code></strong></dt>
<dd>
<p>Specifies a list of ("local file" "remote URL") pairs which indicate files to be staged from the job to a GASS-compatible file server.</p>
</dd>
<dt class="hdlist1"><strong><code>gass_cache</code></strong></dt>
<dd>
<p>Specifies location to override the GASS cache location.</p>
</dd>
<dt class="hdlist1"><strong><code>gram_my_job</code></strong></dt>
<dd>
<p>Obsolete and ignored. [Default: <code>collective</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>host_count</code></strong></dt>
<dd>
<p>Only applies to clusters of SMP computers, such as newer IBM SP systems. Defines the number of nodes ("pizza boxes") to distribute the "count" processes across.</p>
</dd>
<dt class="hdlist1"><strong><code>job_type</code></strong></dt>
<dd>
<p>This specifies how the jobmanager should start the job. Possible values are single (even if the count &gt; 1, only start 1 process or thread), multiple (start count processes or threads), mpi (use the appropriate method (e.g. mpirun) to start a program compiled with a vendor-provided MPI library. Program is started with count nodes), and condor (starts condor jobs in the "condor" universe.) [Default: <code>multiple</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>library_path</code></strong></dt>
<dd>
<p>Specifies a list of paths to be appended to the system-specific library path environment variables. [Default: <code>$(GLOBUS_LOCATION)/lib</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>loglevel</code></strong></dt>
<dd>
<p>Override the default log level for this job. The value of this attribute consists of a combination of the strings FATAL, ERROR, WARN, INFO, DEBUG, TRACE joined by the | character</p>
</dd>
<dt class="hdlist1"><strong><code>logpattern</code></strong></dt>
<dd>
<p>Override the default log path pattern for this job. The value of this attribute is a string (potentially containing RSL substitutions) that is evaluated to the path to write the log to. If the resulting string contains the string $(DATE) (or any other RSL substitution), it will be reevaluated at log time.</p>
</dd>
<dt class="hdlist1"><strong><code>max_cpu_time</code></strong></dt>
<dd>
<p>Explicitly set the maximum cputime for a single execution of the executable. The units is in minutes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set cputime, then an error will be returned.</p>
</dd>
<dt class="hdlist1"><strong><code>max_memory</code></strong></dt>
<dd>
<p>Explicitly set the maximum amount of memory for a single execution of the executable. The units is in Megabytes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set maxMemory, then an error will be returned.</p>
</dd>
<dt class="hdlist1"><strong><code>max_time</code></strong></dt>
<dd>
<p>The maximum walltime or cputime for a single execution of the executable. Walltime or cputime is selected by the GRAM scheduler being interfaced. The units is in minutes. The value will go through an atoi() conversion in order to get an integer.</p>
</dd>
<dt class="hdlist1"><strong><code>max_wall_time</code></strong></dt>
<dd>
<p>Explicitly set the maximum walltime for a single execution of the executable. The units is in minutes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set walltime, then an error will be returned.</p>
</dd>
<dt class="hdlist1"><strong><code>min_memory</code></strong></dt>
<dd>
<p>Explicitly set the minimum amount of memory for a single execution of the executable. The units is in Megabytes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set minMemory, then an error will be returned.</p>
</dd>
<dt class="hdlist1"><strong><code>project</code></strong></dt>
<dd>
<p>Target the job to be allocated to a project account as defined by the scheduler at the defined (remote) resource.</p>
</dd>
<dt class="hdlist1"><strong><code>proxy_timeout</code></strong></dt>
<dd>
<p>Obsolete and ignored. Now a job-manager-wide setting.</p>
</dd>
<dt class="hdlist1"><strong><code>queue</code></strong></dt>
<dd>
<p>Target the job to a queue (class) name as defined by the scheduler at the defined (remote) resource.</p>
</dd>
<dt class="hdlist1"><strong><code>remote_io_url</code></strong></dt>
<dd>
<p>Writes the given value (a URL base string) to a file, and adds the path to that file to the environment throught the GLOBUS_REMOTE_IO_URL environment variable. If this is specified as part of a job restart RSL, the job manager will update the file&#8217;s contents. This is intended for jobs that want to access files via GASS, but the URL of the GASS server has changed due to a GASS server restart.</p>
</dd>
<dt class="hdlist1"><strong><code>restart</code></strong></dt>
<dd>
<p>Start a new job manager, but instead of submitting a new job, start managing an existing job. The job manager will search for the job state file created by the original job manager. If it finds the file and successfully reads it, it will become the new manager of the job, sending callbacks on status and streaming stdout/err if appropriate. It will fail if it detects that the old jobmanager is still alive (via a timestamp in the state file). If stdout or stderr was being streamed over the network, new stdout and stderr attributes can be specified in the restart RSL and the jobmanager will stream to the new locations (useful when output is going to a GASS server started by the client that&#8217;s listening on a dynamic port, and the client was restarted). The new job manager will return a new contact string that should be used to communicate with it. If a jobmanager is restarted multiple times, any of the previous contact strings can be given for the restart attribute.</p>
</dd>
<dt class="hdlist1"><strong><code>rsl_substitution</code></strong></dt>
<dd>
<p>Specifies a list of values which can be substituted into other rsl attributes' values through the $(SUBSTITUTION) mechanism.</p>
</dd>
<dt class="hdlist1"><strong><code>save_state</code></strong></dt>
<dd>
<p>Causes the jobmanager to save it&#8217;s job state information to a persistent file on disk. If the job manager exits or is suspended, the client can later start up a new job manager which can continue monitoring the job.</p>
</dd>
<dt class="hdlist1"><strong><code>savejobdescription</code></strong></dt>
<dd>
<p>Save a copy of the job description to $HOME [Default: <code>no</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>scratch_dir</code></strong></dt>
<dd>
<p>Specifies the location to create a scratch subdirectory in. A SCRATCH_DIRECTORY RSL substitution will be filled with the name of the directory which is created.</p>
</dd>
<dt class="hdlist1"><strong><code>stderr</code></strong></dt>
<dd>
<p>The name of the remote file to store the standard error from the job. If the value is a GASS URL, the standard error from the job is transferred dynamically during the execution of the job. There are two accepted forms of this value. It can consist of a single destination: stderr = URL, or a sequence of destinations: stderr = (DESTINATION) (DESTINATION). In the latter case, the DESTINATION may itself be a URL or a sequence of an x-gass-cache URL followed by a cache tag. [Default: <code>/dev/null</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>stderr_position</code></strong></dt>
<dd>
<p>Specifies where in the file remote standard error streaming should be restarted from. Must be 0.</p>
</dd>
<dt class="hdlist1"><strong><code>stdin</code></strong></dt>
<dd>
<p>The name of the file to be used as standard input for the executable on the remote machine. If the value is a GASS URL, the file is transferred to the remote gass cache before executing the job and removed after the job has terminated. [Default: <code>/dev/null</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>stdout</code></strong></dt>
<dd>
<p>The name of the remote file to store the standard output from the job. If the value is a GASS URL, the standard output from the job is transferred dynamically during the execution of the job. There are two accepted forms of this value. It can consist of a single destination: stdout = URL, or a sequence of destinations: stdout = (DESTINATION) (DESTINATION). In the latter case, the DESTINATION may itself be a URL or a sequence of an x-gass-cache URL followed by a cache tag. [Default: <code>/dev/null</code>]</p>
</dd>
<dt class="hdlist1"><strong><code>stdout_position</code></strong></dt>
<dd>
<p>Specifies where in the file remote output streaming should be restarted from. Must be 0.</p>
</dd>
<dt class="hdlist1"><strong><code>two_phase</code></strong></dt>
<dd>
<p>Use a two-phase commit for job submission and completion. The job manager will respond to the initial job request with a WAITING_FOR_COMMIT error. It will then wait for a signal from the client before doing the actual job submission. The integer supplied is the number of seconds the job manager should wait before timing out. If the job manager times out before receiving the commit signal, or if a client issues a cancel signal, the job manager will clean up the job&#8217;s files and exit, sending a callback with the job status as GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED. After the job manager sends a DONE or FAILED callback, it will wait for a commit signal from the client. If it receives one, it cleans up and exits as usual. If it times out and save_state was enabled, it will leave all of the job&#8217;s files in place and exit (assuming the client is down and will attempt a job restart later). The timeoutvalue can be extended via a signal. When one of the following errors occurs, the job manager does not delete the job state file when it exits: GLOBUS_GRAM_PROTOCOL_ERROR_COMMIT_TIMED_OUT, GLOBUS_GRAM_PROTOCOL_ERROR_TTL_EXPIRED, GLOBUS_GRAM_PROTOCOL_ERROR_JM_STOPPED, GLOBUS_GRAM_PROTOCOL_ERROR_USER_PROXY_EXPIRED. In these cases, it can not be restarted, so the job manager will not wait for the commit signal after sending the FAILED callback</p>
</dd>
<dt class="hdlist1"><strong><code>username</code></strong></dt>
<dd>
<p>Verify that the job is running as this user.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-examples">Simple RSL Examples</h3>
<div class="paragraph">
<p>The following are some simple example RSL strings to illustrate
idiomatic usage with existing tools and to make concrete some of the
more interesting cases of tokenization, concatenation, and variable
semantics. These are meant to illustrate the use of the RSL notation
without much regard for the specific details of a particular resource
management component.</p>
</div>
<div class="paragraph">
<p>Typical GRAM5 resource descriptions contain at least a few relations in
a conjunction:</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. GRAM5 Job Request Examples</div>
<div class="content">
<div class="paragraph">
<p>This example shows a conjunct request containing values that are
unquoted literals and ordered sequences of a mix of quoted and unquoted
literals.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(* this is a comment *)
&amp; (executable = a.out (* &lt;-- that is an unquoted literal *))
  (directory  = /home/nobody )
  (arguments  = arg1 "arg 2")
  (count = 1)</pre>
</div>
</div>
<div class="paragraph">
<p>This example demonstrates RSL substitutions, which can be used to make
sure a string is used consistently multiple times in a resource
description:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&amp; (rsl_substitution  = (TOPDIR  "/home/nobody")
                       (DATADIR $(TOPDIR)"/data")
                       (EXECDIR $(TOPDIR)/bin) )
  (executable = $(EXECDIR)/a.out
        (* ^-- implicit concatenation *))
  (directory  = $(TOPDIR) )
  (arguments  = $(DATADIR)/file1
        (* ^-- implicit concatenation *)
                $(DATADIR) # /file2
        (* ^-- explicit concatenation *)
                '$(FOO)'            (* &lt;-- a quoted literal *))
  (environment = (DATADIR $(DATADIR)))
  (count = 1)</pre>
</div>
</div>
<div class="paragraph">
<p>Performing all variable substitution and removing comments yields an
equivalent RSL string:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&amp; (rsl_substitution  = (TOPDIR "/home/nobody")
                       (DATADIR "/home/nobody/data")
                       (EXECDIR "/home/nobody/bin") )
  (executable = "/home/nobody/bin/a.out" )
  (directory  = "/home/nobody" )
  (arguments  = "/home/nobody/data/file1"
                "/home/nobody/data/file2"
                "$(FOO)" )
  (environment = (DATADIR "/home/nobody/data"))
  (count = 1)</pre>
</div>
</div>
<div class="paragraph">
<p>Note in the above variable-substitution example, the variable
substitution definitions are not automatically made a part of the job&#8217;s
environment. And explicit <code>environment</code> attribute must be used to add
environment variables for the job. Also note that the third value in the
arguments clause is not a variable reference but only quoted literal
that happens to contain one of the special characters.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-rsl-grammar-and-tokenization-rules">RSL grammar and tokenization rules</h3>
<div class="paragraph">
<p>The following is a modified BNF grammar for the Resource Specification
Language. Lexical rules are provided for the implicit concatenation
sequences in the form of conventional regular expressions; for the
<strong>implicit-concat</strong> non-terminal rules, whitespace is not allowed
between juxtaposed non-terminals. Grammar comments are provided in
square brackets in a column to the right of the productions, eg
<code>[comment]</code> to help relate productions in the grammar to the
terminology used in the above discussion.</p>
</div>
<div class="paragraph">
<p>Regular expressions are provided for the terminal class
<code>string-literal</code> and for RSL comments. These regular expression make
use of a common inverted character-class notation, as popularized by the
various <strong><code>lex</code></strong> tools. Comments are syntactically equivalent to
whitespace and can only appear where the comment prefix cannot be
mistaken for the trailing part of a multi-character unquoted literal.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. RSL Grammar</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Production</th>
<th class="tableblock halign-left valign-top">Rule</th>
<th class="tableblock halign-left valign-top">Annotations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>specification</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>relation</em><br>
| <code>'+'</code> <em>spec-list</em><br>
| <code>'&amp;'</code> <em>spec-list</em><br>
| <code>'|'</code> <em>spec-list</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">relation<br>
multi-request<br>
conjunct-request<br>
disjunct-request<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>spec-list</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'('</code>  <em>specification</em> <code>')'</code> <em>spec-list</em><br>
| <code>'('</code> <em>specification</em> <code>')'</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>relation</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'rsl_substitution'</code> <code>'='</code>  <em>binding-sequence</em><br>
| <em>attribute</em> <em>op</em> <em>value-sequence</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substitution variable definition<br>
Attribute binding relation<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>binding-sequence</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>binding</em> <em>binding-sequence</em><br>
| <em>binding</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>binding</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'('</code>  <em>string-literal</em> <em>simple-value</em> <code>')'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Substitution variable definition<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>attribute</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>op</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'='</code> <br>
|<code>'!='</code> <br>
|<code>'&gt;'</code> <br>
|<code>'&gt;='</code> <br>
|<code>'&lt;'</code> <br>
|<code>'&lt;='</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value-sequence</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em> <em>value-sequence</em><br>
| <em>value</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'('</code>  <em>value-sequence</em> <code>')'</code>  <code>|</code>  <em>simple-value</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>simple-value</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string-literal</em><br>
| <em>simple-value</em> <code>'#'</code> <em>simple-value</em><br>
| <em>implicit-concat</em><br>
| <em>variable-reference</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String<br>
Concatenation<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>variable-reference</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'$('</code>  <em>string-literal</em> <code>')'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable Reference<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>implicit-concat</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(</code>  <em>unquoted-literal</em> <code>)? (</code> <em>implicit-concat-core</em> <code>)+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit concatenation<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>implicit-concat-core</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>variable-reference</em><br>
| <code>(</code> <em>variable-reference</em> <code>) (</code> <em>unquoted-literal</em> <code>)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>string-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>quoted-literal</em><br>
| <em>unquoted-literal</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>quoted-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'''</code> <code>(([^'])</code> <br>
|<code>(''''))*</code> <code>'''</code> <br>
| <code>'"'</code>  <code>(([^"])</code>  <code>|</code>  <code>('""')*</code>  <code>'"'</code> <br>
| <code>'^' c(([^c]|(cc))* c</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Single-quote delimiter with
            escaping<br>
Double-quote delimiter with
            escaping<br>
User defined delimiter <br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unquoted-literal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>([^\t\v\n+&amp;|()=&lt;&gt;!"'^#$])+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-special characters<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>comment</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'(*'</code> <code>(([^*])|('*'[^)]))*</code> <code>'*)'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comment<br></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-debugging">Debugging</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Log output from GRAM5 is a useful tool for debugging issues. GRAM5 can
log to either local files or syslog. See the
<a href="../../gram5/admin/index.html#gram5-troubleshooting-admin">Admin
Guide</a> for information about how to configure logging.</p>
</div>
<div class="paragraph">
<p>In most cases, logging at the <code>INFO</code> level will produce enough
information to show progress of most operations. Adding <code>DEBUG</code> will
also allow log information from the GRAM LRM scripts.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_debugging_methods">Basic Debugging Methods</h3>
<div class="paragraph">
<p>The first thing to determine when debugging unexpected failures is to
determine whether the gatekeeper service is running, reachable from the
client, and properly configured.</p>
</div>
<div class="paragraph">
<p>First, determine that the gatekeeper is running by using a tool such as
<strong><code>telnet</code></strong> to connect to the TCP/IP port that the gatekeeper is
listening on. From the GRAM service node, using a default configuration,
use a command like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  telnet localhost 2119
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'</pre>
</div>
</div>
<div class="paragraph">
<p>An error message like the following indicates that the gatekeeper
service is not starting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>telnet: connect to address 127.0.0.1: Connection refused
telnet: Unable to connect to remote host</pre>
</div>
</div>
<div class="paragraph">
<p>If the telnet command exits immediately, then the gatekeeper service is
being started but not running. Check the gatekeeper log (by default
<code>$GLOBUS_LOCATION/var/globus-gatekeeper.log</code>) to see if there is an
error message. A common error is having a missing library path
environment variable in the gatekeeper&#8217;s environment or having a
malformed configuration file. See ) to see if there is an error message.
A common error is having a missing library path environment variable in
the gatekeeper&#8217;s environment or having a malformed configuration file.
See
<a href="../../gram5/pi/index.html#gram5-globus-gatekeeper">the<strong><code>globus-gatekeeper</code></strong></a>
for information on the configuration options.</p>
</div>
<div class="paragraph">
<p>The next recommended diagnostic is to run the same telnet command from
the machine which is acting as the GRAM client if it is distinct from
the GRAM service node. Be sure to replace <code>localhost</code> with the actual
host name of the GRAM service. Again, check for log entries in the case
of immediate exit or refused connection. If the connection does not
work, then there may be some network connectivity or firewall issues
preventing access.</p>
</div>
<div class="paragraph">
<p>Next use a tool like <strong><code>globusrun</code></strong> to diagnose whether the client is
authorized to contact the gatekeeper service. This is done by using the
<em>-a</em> command-line option. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globusrun -a -r grid.example.org

GRAM Authentication test successful</pre>
</div>
</div>
<div class="paragraph">
<p>If you do not get the success message above, then check the gatekeeper
log to see if there is a diagnostic message. A common problem is that
the identity of the client is not in the grid mapfile used by the
gatekeeper.</p>
</div>
<div class="paragraph">
<p>The next test is to use the <em>-dryrun</em> option to <strong><code>globusrun</code></strong> to
verify that the job manager service is properly configured. To do so,
try the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globusrun -dryrun -r grid.example.org "&amp;(executable=/bin/sh)"
globus_gram_client_callback_allow successful
Dryrun successful</pre>
</div>
</div>
<div class="paragraph">
<p>If you do not get the success message above, first check the error
number in the <a href="#gram5-error-codes">GRAM5 Error codes table</a> to
determine how to proceed. If the result is unclear, check the job
manager log (default <code>$HOME/gram_DATE.log</code>) to see if there are any
further details of the error. ) to see if there are any further details
of the error.</p>
</div>
<div class="paragraph">
<p>The final test is to submit a test job to the GRAM5 service and wait for
it to terminate, such as this example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/sh -c 'echo "hello, grid"'
hello, grid</pre>
</div>
</div>
<div class="paragraph">
<p>If the process appears to hang, it might be that the job manager is
unable to send state callbacks to the client. Check that there are no
firewalls or network issues that would prevent the job manager process
from connecting from the GRAM service node to the client node.</p>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_debugging_methods">Advanced Debugging Methods</h3>
<div class="paragraph">
<p>The methods described in this section are intended for debugging
problems in the GRAM code, not in the user environment.</p>
</div>
<div class="sect3">
<h4 id="_debugging_the_job_manager">Debugging the Job Manager</h4>
<div class="paragraph">
<p>To debug the GRAM5 job manager, run the command located in
<code>$GLOBUS_LOCATION/etc/grid-services/jobmnager-LRM</code> (ignoring the first
3 fields). For example:  (ignoring the first 3 fields). For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  $GLOBUS_LOCATION/libexec/globus-job-manager \
    -conf $GLOBUS_LOCATION/etc/globus-job-manager.conf -type fork</pre>
</div>
</div>
<div class="paragraph">
<p>When the job manager is started in this way, it will log messages to
standard error and will terminate 60 seconds after its last job has
completed. This only works if there are no job managers running for this
particular user. The job manager can be started in a debugger such as
<strong><code>gdb</code></strong> or <strong><code>valgrind</code></strong> using a similar command-line.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For a list of error codes generated by GRAM5, see
<a href="#gram5-error-codes">Errors</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-troubleshooting-client">GRAM Client Troubleshooting</h3>
<div class="sect3">
<h4 id="_credential_problems">Credential Problems</h4>
<div class="paragraph">
<p>GRAM requires a client certificate and private key in order authenticate
with the GRAM service. If these are not available, the GRAM client will
fail. In typical use, a user will create a temporary proxy certificate
either derived from their identity certificate issued by some
certificate authority, or from a service such as myproxy. If a GRAM
client command returns any error containing the string <code>GSS Major
Status</code> you&#8217;ve hit a credential problem. Look at the
<a href="../../gsic/user/index.html#security-credential-errors">Troubleshooting
Section</a> of the GSI manual for details about how to diagnose and correct
these errors. The  tool with the <em>-p</em> command-line option is especially
helpful for diagnosing some of these types of problems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connection_problems">Connection Problems</h4>
<div class="paragraph">
<p>There are a few things which can go wrong when trying to contact a GRAM
service. These have slightly different error types which can help
diagnose which problem is occurring.</p>
</div>
<div class="sect4">
<h5 id="_invalid_resource_name">Invalid Resource Name</h5>
<div class="paragraph">
<p>If the hostname or TCP port you are using for a GRAM resource name is
not correct, then the GRAM client will be unable to access the service.
Errors of this type will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org/jobmanager-fork /bin/hostname

GRAM Job submission failed because the connection to the server failed (check host and port) (error code 12)</pre>
</div>
</div>
<div class="paragraph">
<p>When this occurs, check with the resource administrator for correct
resource naming so that you can contact the service.</p>
</div>
</div>
<div class="sect4">
<h5 id="_mutual_authentication_failure">Mutual Authentication Failure</h5>
<div class="paragraph">
<p>GRAM performs mutual authentication, that is, both the client and
service provide certificates indicating who they are. The service uses
the client&#8217;s identity to map the user to a local unix account. The
client uses the server&#8217;s identity to verify that the service is running
with a host credential. The failure of the client to trust the server&#8217;s
certificate will generate an error message that looks like this:
<code>globus_gsi_gssapi: Authorization denied: The expected name for the
remote host (<a href="mailto:host@alias.example.org">host@alias.example.org</a>) does not match the authenticated
name of the remote host (<a href="mailto:host@grid.example.org">host@grid.example.org</a>). This happens when the
name in the host certificate does not match the information obtained
from DNS and is often a DNS configuration problem.</code></p>
</div>
<div class="paragraph">
<p>This mismatch can happen for a number of reasons: a site administrator
has multiple hosts sharing a certificate, a host has multiple DNS
aliases, and the client is not aware of which name the server is using
for its certificate, or a host&#8217;s name has changed since the certificate
was issued. The remedy for the client, after confirming with the GRAM
administrator that the name after "authenticated name of the remote
host" is the correct certificate name is to use a form of the GRAM
resource name which includes this name. For example, explicitly adding a
name to the abbreviated GRAM contact so that instead of
<code>alias.example.org</code>, you would use
<code>alias.example.org::host@grid.example.org</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_certificate_trust_issues">Certificate Trust Issues</h5>
<div class="paragraph">
<p>Because of the mutual authentication, both GRAM users and services can
hit problems if they do not trust their peer&#8217;s certificate or the
Certificate Authority which issued it. If the client doesn&#8217;t trust the
server&#8217;s certificate, it is easier to diagnose, because the GRAM service
doesn&#8217;t send much information back to the client if it doesn&#8217;t trust it.
However, working with the system administrator to get information from
the GRAM logs will usually fix these problems fairly easily.</p>
</div>
<div class="paragraph">
<p>If the service&#8217;s certificate is not trusted, the client will receive a
message like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/hostname
GRAM Job submission failed because an authentication operation failed
OpenSSL Error: s3_clnt.c:915: in library: SSL routines, function SSL3_GET_SERVER_CERTIFICATE: certificate verify failed
globus_gsi_callback_module: Could not verify credential
globus_gsi_callback_module: Can't get the local trusted CA certificate: Untrusted self-signed certificate in chain with hash bbfccedf</pre>
</div>
</div>
<div class="paragraph">
<p>This error indicates that certificate chain from the service certificate
to the client contained a self-signed certificate (usually an indication
that it&#8217;s a CA certificate), which the client doesn&#8217;t trust, and
includes the hash of the certificate name (<code>bbfccedf</code> in this case).
If you hit this particular type of error, you should send the
information to the GRAM administrator and determine which CA should be
trusted and what its signing policy is, to determine if you want to add
it to your local set of trust roots.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Different versions of OpenSSL produce different hashes for the same
certificate names. If you upgrade a system (or transfer CA certificates
between systems) to a different version of OpenSSL, you may hit this
problem even if you think you have the CA certificate in your trusted
certificate directory. If so, run the
<strong><code>globus-update-certificate-dir</code></strong> program to update your hashes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are other reasons why a certificate might not be trusted (it&#8217;s in
a revoked list, it has expired or was issued in the future, etc). For
more details look at the
<a href="../../gsic/user/index.html#gsic-user-troubleshooting">troubleshooting
information</a> in the GSI user&#8217;s guide.</p>
</div>
<div class="paragraph">
<p>If for some reason the service does not trust your certificate, you&#8217;ll
get a rather cryptic message from GRAM that looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/hostname
GRAM Job submission failed because an authentication operation failed
globus_gsi_gssapi: Unable to verify remote side's credentials
globus_gsi_gssapi: Unable to verify remote side's credentials: Couldn't verify the remote certificate
OpenSSL Error: s3_pkt.c:1086: in library: SSL routines, function SSL3_READ_BYTES: sslv3 alert bad certificate SSL alert number 42
 (error code 7)</pre>
</div>
</div>
<div class="paragraph">
<p>To remedy this, consult the GRAM administrator to get information from
the <code>/var/log/globus-gatekeeper.log</code> file to determine the reason why
the gatekeeper didn&#8217;t like your certificate. Again it could be CA trust
issues, clock skew, or a revoked certificate. The error in the
gatekeeper log would typically look like the client-side trust issue
above.  file to determine the reason why the gatekeeper didn&#8217;t like your
certificate. Again it could be CA trust issues, clock skew, or a revoked
certificate. The error in the gatekeeper log would typically look like
the client-side trust issue above.</p>
</div>
</div>
<div class="sect4">
<h5 id="_authentication_with_the_remote_server_failed">Authentication with the Remote Server Failed</h5>
<div class="paragraph">
<p>Once the GRAM service has authenticated the client, it maps the client&#8217;s
identity to a local user account using a grid-mapfile or other mapping
service. If this fails, the client will receive a message that looks
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/hostname
GRAM Job submission failed because authentication with the remote server failed (error code 7)</pre>
</div>
</div>
<div class="paragraph">
<p>To remedy this, consult the system administrator of the GRAM resource to
be added to the authorized user&#8217;s list. Be sure to send your credential
subject name to make it easier for them. To get that information, run
the command <strong><code>grid-cert-info -s</code></strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_unable_to_find_the_requested_service">Unable to Find the Requested Service</h5>
<div class="paragraph">
<p>Recall that a GRAM resource name includes a component called the
<code>service name</code>. The default if not specified is <code>jobmanager</code>, but
some sites may not use that name, or have a different LRM name than you
expect. If you specify an incorrect service name, or the default is not
present, you&#8217;ll get an error that looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/hostname
GRAM Job submission failed because the gatekeeper failed to find the requested service (error code 93)</pre>
</div>
</div>
<div class="paragraph">
<p>If you get this error, you&#8217;ll need to determine which services are
available on that GRAM resource, either by asking the admin or by
looking at the entries in <code>/etc/grid-services</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_failed_to_run_the_job_manager">Failed to Run the Job Manager</h5>
<div class="paragraph">
<p>The GRAM service is split between a priveleged process called the
<code>globus-gatekeeper</code> and a non-privileged process called the  and a
non-privileged process called the <code>globus-job-manager</code> which runs as a
user process. If the  which runs as a user process. If the
<code>globus-gatekeeper</code> is unable to locate the  is unable to locate the
<code>globus-job-manager</code> process, then this misconfiguration will show up
like this:  process, then this misconfiguration will show up like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-job-run grid.example.org /bin/hostname
GRAM Job submission failed because the gatekeeper failed to run the job manager (error code 47)</pre>
</div>
</div>
<div class="paragraph">
<p>This is an installation mistake, and the administrator of the GRAM
resource must fix this.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jobs_are_hanging">Jobs are Hanging</h4>
<div class="paragraph">
<p>One problem GRAM users sometimes encounter is that it looks like jobs
submitted to GRAM are not making any progress, even though the local
resource manager thinks they&#8217;ve run. There are a couple of reasons why
this might occur: GRAM is not getting the information it needs from the
local resource manager or the GRAM client is not getting the information
it needs. We&#8217;ll cover diagnosing and handling the latter case in this
document, as the other is an system administrator issue.</p>
</div>
<div class="paragraph">
<p>The way <strong><code>globus-job-run</code></strong> and <strong><code>globusrun</code></strong> determine that jobs
have completed is via GRAM job state callbacks. These are messages sent
by the GRAM service to the client node indicating that something
significant has happened in the lifecycle of the job. If for some reason
the GRAM service can not get those messages to the client, the client
will not be able to detect job state changes.</p>
</div>
<div class="paragraph">
<p>In order to determine if this is the case, submit a job using
<strong><code>globus-job-submit</code></strong>, and then use the <strong><code>globus-job-status</code></strong>
command to see if the job state changes. If it does not, then consult
the GRAM administrator---there might be some problem with the
installation. If it does, then for some reason the callbacks are not
happening. This might be firewall issues or host naming issues.</p>
</div>
<div class="paragraph">
<p>The GRAM client sends a "callback contact" to the GRAM service when it
submits a job, in order that it can receive notifications. This contact
is a reference to a https server embedded in the GRAM client which only
handles GRAM state callbacks. As with all web servers, it has a URL
which defines how to contact it, which in this case consists of the
client host name and the service port number. If the host name that is
used is not resolvable (such as a for a laptop with a dynamic address),
then the GRAM service will not be able to contact it. If that&#8217;s the
case, you can set the <code>GLOBUS_HOSTNAME </code> environment variable to the
IP address that your client can be reached at, and then submit your
jobs. This will cause GRAM to publish that address instead of what it
thinks the client&#8217;s host name is.</p>
</div>
<div class="paragraph">
<p>Another way that the GRAM service would be unable to send job state
updates to a client would be if there&#8217;s a firewall between the service
and the client. If that&#8217;s the case, you might need to set the
<code>GLOBUS_TCP_PORT_RANGE</code> environment variable to a comma-separated list
of numbers which represent a range of minimum and maximum TCP port
numbers to listen on. You might have to contact your site administrator
to determine what TCP ports are allowed. If there are none, you can
still use <strong><code>globus-job-submit</code></strong> and <strong><code>globus-job-status</code></strong> to
track your job&#8217;s state changes, or use another tool like those mentioned
in the <a href="../../gram5/user/index.html#gram5-user-client-tools">section
about client tools</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logs_and_debugging">Logs and Debugging</h4>
<div class="paragraph">
<p>The GRAM service has a log file which contains information about the job
as it is processed. These logs are located by default in
<code>/var/log/globus/gram_$USERNAME.log</code>. There are some different logging
levels available, as . There are some different logging levels
available, as
<a href="../../gram5/admin/index.html#gram5-log-levels">described in the GRAM
Adminstrator&#8217;s Guide</a>. These can be controlled on a per-job basis by
adding the <code>loglevel</code> RSL attribute to your job description. The
default is to log only <code>FATAL</code> and <code>ERROR</code> messages, but other
levels can sometimes help understand what is going on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_diagnosing_lrm_errors">Diagnosing LRM Errors</h4>
<div class="paragraph">
<p>Sometimes, bugs creep into the LRM adapter scripts. When that occurs,
the GRAM job will usually fail with an error like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GRAM Job failed because the job manager detected an invalid script status (error
code 25)</pre>
</div>
</div>
<div class="paragraph">
<p>If this occurs, you may have to work with a GRAM administrator to help
debug this problem. One helpful thing you can do when reporting it is to
save the GRAM internal script data so that it can be used outside of the
GRAM service to see what the low-level error looks like. To do this, add
the RSL fragment <code>(savejobdescription = yes)</code> to your job request.
This will cause GRAM to leave a file called something like
<code>$HOME/gram_[0-9]*.pl</code> in your home directory. You can use this with
the internal tool  in your home directory. You can use this with the
internal tool <code>/usr/share/globus/globus-job-manager-script.pl</code> to try
to submit the job to the LRM without using the GRAM service. The command
line  to try to submit the job to the LRM without using the GRAM
service. The command line
<strong><code>/usr/share/globus/globus-job-manager-script.pl -m </code></strong> will attempt
to submit the job to the LRM. It will show all the information the LRM
script sends to the GRAM service, which might include some perl-language
error or badly formatted output from the script (which must only output
lines which begin with <code>GRAM_SCRIPT_</code>.</p>
</div>
<div class="paragraph">
<p>In some extreme cases, the savejobdescription option will not generate a
file. If that&#8217;s the case, pass <code>/dev/null</code> as the argument to the  as
the argument to the <em>-f</em> command-line option. The problem is likely a
perl syntax error which will be reached before the job description is
loaded.</p>
</div>
</div>
<div class="sect3">
<h4 id="_email_support">Email Support</h4>
<div class="paragraph">
<p>If all else fails, please send information about your problem to
<a href="mailto:gram-user@globus.org">gram-user@globus.org</a>. You&#8217;ll have to subscribe to a list before you can
send an e-mail to it. See
<a href="http://dev.globus.org/wiki/Mailing%5fLists">here</a> for general e-mail
lists and information on how to subscribe to a list and
<a href="http://dev.globus.org/wiki/GRAM#Mailing%5fLists">here</a> for GRAM specific
lists. Depending on the problem, you may be requested to file a bug
report to the globus project&#8217;s <a href="http://jira.globus.org">Issue
Tracker</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-troubleshooting-admin">Admin Troubleshooting</h3>
<div class="sect3">
<h4 id="_security">Security</h4>
<div class="paragraph">
<p>GRAM requires a host certificate and private key in order for the
<strong><code>globus-gatekeeeper</code></strong> service to run. These are typically located
in <code>/etc/grid-security/hostcert.pem</code> and  and
<code>/etc/grid-security/hostkey.pem</code>, but the path is configurable in the
, but the path is configurable in the
<a href="../../gram5/admin/index.html#gram5-configuring-gatekeeper">gatekeeper
configuration file</a>. The key must be protected by file permissions
allowing only the root user to read it.</p>
</div>
<div class="paragraph">
<p>GRAM also (by default) uses a <code>grid-mapfile</code> to authorize Grid users
as local users. This file is typically located in  to authorize Grid
users as local users. This file is typically located in
<code>/etc/grid-security/grid-mapfile</code>, but is configurable in the , but is
configurable in the
<a href="../../gram5/admin/index.html#gram5-configuring-gatekeeper">gatekeeper
configuration file</a>.</p>
</div>
<div class="paragraph">
<p>Problems in either of these configurations will show up in the
gatekeeper log described below. See the <a href="../../gsic/index.html">GSI</a>
documentation for
more detailed information about obtaining and installing host
certificates and maintaining a <code>grid-mapfile</code>. .</p>
</div>
</div>
<div class="sect3">
<h4 id="_verify_that_services_are_running">Verify that Services are Running</h4>
<div class="paragraph">
<p>GRAM relies on the <strong><code>globus-gatekeeper</code></strong> program and (in some cases)
the <strong><code>globus-scheduler-event-generator</code></strong> programs to process jobs.
If the former is not running, jobs requests will fail with a "connection
refused" error. If the latter is not running, GRAM jobs will appear to
"hang" in the <code>PENDING</code> state.</p>
</div>
<div class="paragraph">
<p>The <strong><code>globus-gatekeeper</code></strong> is typically started via an init script
installed in <code>/etc/init.d/globus-gatekeeper</code>. The command . The
command <strong><code>/etc/init.d/globus-gatekeeper status</code></strong> will indicate
whether the service is running. See
<a href="../../gram5/admin/index.html#gram5-admin-starting-and-stopping">Starting
and Stopping GRAM5 services</a> for
more information about starting and stopping the
<strong><code>globus-gatekeeper</code></strong> program.</p>
</div>
<div class="paragraph">
<p>If the <strong><code>globus-gatekeeper</code></strong> service fails to start, the output of
the command <strong><code>globus-gatekeeper -test</code></strong> will output information
describing some types of configuration problems.</p>
</div>
<div class="paragraph">
<p>The <strong><code>globus-scheduler-event-generator</code></strong> is typically started via an
init script installed in
<code>/etc/init.d/globus-scheduler-event-generator</code>. It is only needed when
the LRM-specific "setup-seg" package is installed. The command . It is
only needed when the LRM-specific "setup-seg" package is installed. The
command <strong><code>/etc/init.d/globus-scheduler-event-generator status</code></strong> will
indicate whether the service is running. See
<a href="../../gram5/admin/index.html#gram5-admin-starting-and-stopping">Starting
and Stopping GRAM5 services</a> for
more information about starting and stopping the
<strong><code>globus-scheduler-event-generator</code></strong> program.</p>
</div>
</div>
<div class="sect3">
<h4 id="_verify_that_lrm_packages_are_installed">Verify that LRM packages are installed</h4>
<div class="paragraph">
<p>The <strong><code>globus-gatekeeper</code></strong> program starts the
<strong><code>globus-job-manager</code></strong> service with different command-line
parameters depending on the LRM being used. Use the command
<strong><code>globus-gatekeeper-admin -l</code></strong> to list which LRMs the gatekeeper is
configured to use.</p>
</div>
<div class="paragraph">
<p>The <strong><code>globus-job-manager-script.pl</code></strong> is the interface between the
GRAM job manager process and the LRM adapter. The command
<strong><code>/usr/share/globus/globus-job-manager-script.pl -h</code></strong> will print the
list of available adapters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  /usr/share/globus/globus-job-manager-script.pl -h
USAGE: /usr/share/globus/globus-job-manager-script.pl -m MANAGER -f FILE -c COMMAND
Installed managers: condor fork</pre>
</div>
</div>
<div class="paragraph">
<p>The <strong><code>globus-scheduler-event-generator</code></strong> also uses an LRM-specific
module to generate scheduler events for GRAM to reduce the amount of
resources GRAM uses on the machine where it runs. To determine which
LRMs are installed and configured, use the command
<strong><code>globus-scheduler-event-generator-admin -l</code></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%  globus-scheduler-event-generator-admin -l
fork [DISABLED]</pre>
</div>
</div>
<div class="paragraph">
<p>If any of these do not show the LRM you are trying to use, install the
relevant packages related to that LRM and restart the GRAM services. See
the <a href="../../gram5/admin/index.html">GRAM Administrator&#8217;s Guide</a> for
more information about starting and stopping the GRAM services.</p>
</div>
</div>
<div class="sect3">
<h4 id="_verify_that_the_lrm_packages_are_configured">Verify that the LRM packages are configured</h4>
<div class="paragraph">
<p>All GRAM5 LRM adapters have a configuration file for site
customizations, such as queue names, paths to executables needed to
interface with the LRM, etc. Check that the values in these files are
correct. These files are described in
<a href="../../gram5/admin/index.html#gram5-configuring-lrm">LRM Adapter
Configuration</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="gram5-troubleshooting-gatekeeper-log">Check the Gatekeeper Log</h4>
<div class="paragraph">
<p>The <code>/var/log/globus-gatekeeper.log</code> file contains information about
service requests from clients, and will be useful when diagnosing
service startup failures, authentication failures, and authorization
failures.  file contains information about service requests from
clients, and will be useful when diagnosing service startup failures,
authentication failures, and authorization failures.</p>
</div>
<div class="sect4">
<h5 id="_authorization_failures">Authorization failures</h5>
<div class="paragraph">
<p>GRAM uses GSI to authenticate client job requests. If there is a problem
with the GSI configuration for your host, or a client is trying to
connect with a certificate signed by a CA your host does not trust, the
job request will fail. This will show up in the log as a "GSS
authentication failure". See the <a href="../../gsic/admin/index.html">GSI
Administrator&#8217;s Guide</a> for information about diagnosing authentication
failures.</p>
</div>
</div>
<div class="sect4">
<h5 id="_gridmap_failures">Gridmap failures</h5>
<div class="paragraph">
<p>After authentication is complete, GRAM maps the Grid identity to a local
user prior to starting the <strong><code>globus-job-manager</code></strong> process. If this
fails, an error will show up in the log as "globus_gss_assist_gridmap()
failed authorization". See the <a href="../../gsic/admin/index.html">GSI
Administrator&#8217;s Guide</a> for information about managing gridmap files.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-troubleshooting-jobmanager-log">Job Manager Logs</h4>
<div class="paragraph">
<p>A per-user job manager log is typically located in
<code>/var/log/globus/gram_$USERNAME.log</code>. This log contains information
from the job manager as it attempts to execute GRAM jobs via a local
resource manager. The logs can be fairly verbose. Sometimes looking for
log entries near those containing the string . This log contains
information from the job manager as it attempts to execute GRAM jobs via
a local resource manager. The logs can be fairly verbose. Sometimes
looking for log entries near those containing the string <code>level=ERROR</code>
will show more information about what caused a particular failure.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve found an error in the log, it is generally useful to find
log entries related to the job which hit that error. There are two job
IDs associated with each job, one a GRAM-specific ID, and one an
LRM-specific ID. To determine the GRAM ID associated with a job, look
for the attribute <code>gramid</code> in the log message. Finding that, looking
for all other log messages which contain that <code>gramid</code> value will give
a better picture of what the job manager is doing. To determine the
LRM-specific ID, look for a message at <code>TRACE</code> level with the matching
GRAM ID found above with the <code>response</code> value matching
<code>GRAM_SCRIPT_JOB_ID:</code><em>LRM-ID</em>. You can then find follow the state of
the <em>LRM-ID</em> as well as the GRAM ID in the log, and correlate the
<em>LRM-ID</em> information with local resource manager logs and administrative
tools.</p>
</div>
</div>
<div class="sect3">
<h4 id="_email_support_2">Email Support</h4>
<div class="paragraph">
<p>If all else fails, please send information about your problem to
<a href="mailto:gram-user@globus.org">gram-user@globus.org</a>. You&#8217;ll have to subscribe to a list before you can
send an e-mail to it. See
<a href="http://dev.globus.org/wiki/Mailing%5fLists">here</a> for general e-mail
lists and information on how to subscribe to a list and
<a href="http://dev.globus.org/wiki/GRAM#Mailing%5fLists">here</a> for GRAM-specific
lists. Depending on the problem, you may be requested to file a bug
report to the Globus project&#8217;s <a href="http://jira.globus.org">Issue
Tracker</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gram5-error-codes">Errors</h3>
<div class="paragraph">
<p></p>
</div>
<table id="gram5-errors-table" class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. GRAM5 Error Codes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Error Code</th>
<th class="tableblock halign-left valign-top">Reason</th>
<th class="tableblock halign-left valign-top">Possible Solutions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">one of the RSL parameters is not supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check RSL documentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL length is greater than the maximum allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use RSL substitutions to reduce length of RSL strings</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an I/O operation failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable trace logging and report to <a href="mailto:gram-dev@globus.org">gram-dev@globus.org</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobmanager unable to set default to the directory requested</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that RSL <code>directory</code> attribute refers to a directory that exists on the target system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the executable does not exist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>executable</code> attribute refers to an executable that exists on the target system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">of an unused INSUFFICIENT_FUNDS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unimplemented feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">authentication with the remote server failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the contact string contains the proper X.509 DN.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the user cancelled the job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don&#8217;t cancel jobs you want to complete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the system cancelled the job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check RSL requirements such as maximum time and memory are valid for the job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data transfer to the server failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check gatekeeper and/or job manager logs to see why the process failed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the stdin file does not exist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stdin</code> attribute refers to a file that exists on the target system or has a valid ftp, gsiftp, http, or https URL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the connection to the server failed (check host and port)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the service is running on the expected TCP/IP port.
       Check that no firewall prevents contacting that TCP/IP port.
       Check <code>$GLOBUS_LOCATION/var/globus-gatekeeper.log</code> for runtme configuration errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>maxtime</em> value is not an integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>maxtime</code> value evaluates to an integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>count</em> value is not an integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>count</code> value evaluates to an integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager received an invalid RSL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL string can be parsed by using <strong><code>globusrun -p RSL</code></strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed in allowing others to make contact</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job failed when the job manager attempted to run it</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify that the LRM is configured properly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an invalid paradyn was specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>jobtype</em> value is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The RSL <code>jobtype</code> attribute is not indicated as supported by the LRM. Valid <code>jobtype</code> values are <code>single</code>,  <code>multiple</code>, <code>mpi</code>, and <code>condor</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>myjob</em> value is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to locate an internal script argument file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that <code>$GLOBUS_LOCATION/libexec/globus-job-manager-script.pl</code> exists and is executable.
Check that the LRM-specific perl module is located in <code>$GLOBUS_LOCATION/lib/perl/Globus/GRAM/JobManager/</code> directory and is valid. The command <strong><code>perl -I$GLOBUS_LOCATION/lib/perl $GLOBUS_LOCATION/lib/perl/Globus/GRAM/JobManager/LRM.pm</code></strong> can be used to check if there are any syntax errors in the script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to create an internal script argument file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that your home directory is writable and not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager detected an invalid job state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager logs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager detected an invalid script response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager logs. This is likely a bug in the LRM script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager detected an invalid script status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager logs. This is likely a bug in the LRM script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>jobtype</em> value is not supported by this job manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>jobtype</code> attribute is implemented by the LRM script. Note that some job types require configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unused ERROR_UNIMPLEMENTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LRM does not support some feature included in the job request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to create an internal script submission file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home file system is not full. Check job manager log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager cannot find the user proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that client is delegating a proxy when authenticating with the gatekeeper.
Check that the user&#8217;s home filesystem and the <code>/tmp</code> file system are not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to open the user proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home filesystem and the <code>/tmp</code> file system are not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">31</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to cancel the job as requested</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home filesystem and the <code>/tmp</code> file system are not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system memory allocation failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">33</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the interprocess job communication initialization failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">34</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the interprocess job communication setup failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>host count</em> value is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>host_count</code> attribute evaluates to an integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">one of the provided RSL parameters is unsupported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log for details about invalid parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>queue</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>queue</code> attribute evaluates to a string that corresponds to an LRM-specific queue name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>project</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>project</code> attribute evaluates to a string that corresponds to an LRM-specific project name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL string includes variables that could not be identified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that all RSL substitutions are defined before being used in the job description.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>environment</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>environment</code> attribute contains a sequence of <em>VARIABLE</em> <em>VALUE</em> pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>dryrun</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove the RSL <code>dryrun</code> attribute from the job description.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL is invalid (an empty string)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include a non-empty RSL string in your job submission request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to stage the executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the file service hosting the executable is reachable from the GRAM5 service node.
Check that the executable exists on the file service node.
Check that there is sufficient disk space in the user&#8217;s home directory on the service node to store the executable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">44</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to stage the stdin file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the file service hosting the standard input file is reachable from the GRAM5 service node.
Check that the standard input file exists on the file service node.
Check that there is sufficient disk space in the user&#8217;s home directory on the service node to store the standard input file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the requested job manager type is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">46</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>arguments</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the gatekeeper failed to run the job manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the gatekeeper or job manager logs for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL could not be properly parsed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL string can be parsed by using <strong><code>globusrun -p RSL</code></strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">there is a version mismatch between GRAM components</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ask system administrator to upgrade GRAM service to GRAM2 or GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>arguments</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>arguments</code> attribute evaluates to a sequence of strings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">51</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>count</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>count</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">52</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>directory</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>directory</code> attribute evaluates to a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>dryrun</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>dryrun</code> attribute evaluates to either <code>yes</code> or <code>no</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">54</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>environment</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>environment</code> attribute evaluates to a sequence of VARIABLE, VALUE pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">55</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>executable</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>executable</code> attribute evaluates to a string value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>host_count</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>host_count</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">57</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>jobtype</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>jobtype</code> attribute evaluates to one of <code>single</code>, <code>multiple</code>, <code>mpi</code>, or <code>condor</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">58</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>maxtime</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>maxtime</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">59</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>myjob</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>paradyn</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">61</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>project</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>project</code> attribute evaluates to a string value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">62</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>queue</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>queue</code> attribute evaluates to a string value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>stderr</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stderr</code> attribute evaluates to a string value or a sequence of DESTINATION URLs with optional CACHE_TAG string parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>stdin</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stdin</code> attribute evaluates to a string value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>stdout</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stdout</code> attribute evaluates to a string value or a sequence of DESTINATION URLs with optional CACHE_TAG string parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">66</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to locate an internal script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">67</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed on the system call pipe()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed on the system call fcntl()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to create the temporary stdout filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">70</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to create the temporary stderr filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">71</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed on the system call fork()</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">72</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the executable file permissions do not allow execution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>executable</code> attribute refers to an executable program or script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">73</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to open stdout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stdout</code> attribute refers to one or more valid destination files or URLs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">74</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to open stderr</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>stderr</code> attribute refers to one or more valid destination files or URLs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">75</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the cache file could not be opened in order to relocate the user proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home directory is writable and not full on the GRAM5 service node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">76</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cannot access cache files in ~/.globus/.gass_cache, check permissions, quota, and disk space</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home directory is writable and not full on the GRAM5 service node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">77</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to insert the contact in the client contact list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">78</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the contact was not found in the job manager&#8217;s client contact list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don&#8217;t attempt to unregister callback contacts that are not registered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">79</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">connecting to the job manager failed.  Possible reasons: job terminated, invalid job contact, network problems, &#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the job manager process is running.
Check that the job manager credential has not expired.
Check that the job manager contact refers to the correct TCP/IP host and port.
Check that the job manager contact is not blocked by a firewall.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the syntax of the job contact is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the syntax of job contact string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">81</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the executable parameter in the RSL is undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include the RSL <code>executable</code> in all job requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">82</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager service is misconfigured.  condor arch undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the <em>-condor-arch</em> to the command-line or configuration file for a job manager configured to use the <code>condor</code> LRM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">83</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager service is misconfigured.  condor os undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the <em>-condor-os</em> to the command-line or configuration file for a job manager configured to use the <code>condor</code> LRM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">84</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>min_memory</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>min_memory</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">85</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>max_memory</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_memory</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">86</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>min_memory</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>min_memory</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">87</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>max_memory</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_memory</code> attribute evaluates to a positive integer value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">88</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the creation of a HTTP message failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">89</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">parsing incoming HTTP message failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">90</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the packing of information into a HTTP message failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">91</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an incoming HTTP message did not contain the expected information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">92</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager does not support the service that the client requested</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the client is talking to the correct servce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">93</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the gatekeeper failed to find the requested service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">94</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the jobmanager does not accept any new requests (shutting down)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execute queries before the job has been cleaned up.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">95</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the client failed to close the listener associated with the callback URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Call <code>globus_gram_client_callback_disallow()</code> with a valid the callback contact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">96</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the gatekeeper contact cannot be parsed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the syntax of the gatekeeper contact string you are attempting to contact.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">97</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not find the <em>poe</em> command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">98</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not find the <em>mpirun</em> command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure the LRM script with <code>mpirun</code> in your path.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>start_time</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>reservation_handle</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">101</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>max_wall_time</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_wall_time</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">102</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>max_wall_time</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_wall_time</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">103</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>max_cpu_time</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_cpu_time</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">104</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>max_cpu_time</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>max_cpu_time</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">105</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager is misconfigured, a scheduler script is missing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the adminstrator has configured the LRM by running its setup script.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">106</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager is misconfigured, a scheduler script has invalid permissions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the adminstrator has installed the <code>GLOBUS_LOCATION/libexec/globus-job-manager-script.pl</code> script.
Check that the file system containing that script allows file execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">107</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to signal the job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">108</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager did not recognize/support the signal type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that your signal operation is using the correct signal constant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">109</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager failed to get the job id from the local scheduler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager is waiting for a commit signal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a two-phase commit signal to the job manager to acknowledge receiving the job contact from the job manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">111</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager timed out while waiting for a commit signal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a two-phase commit signal to the job manager to acknowledge receiving the job contact from the job manager.
Increase the two-phase commit time out for your job.
Check that the job manager contact TCP/IP port is reachable from your client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">112</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>save_state</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>save_state</code> attribute is set to <code>yes</code> or <code>no</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">113</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>restart</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>restart</code> attribute evaluates to a string containing a job contact string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">114</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>two_phase</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>two_phase</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">115</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>two_phase</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>two_phase</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">116</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>stdout_position</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">117</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>stdout_position</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">118</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>stderr_position</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>stderr_position</em> value is not zero or greater</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager restart attempt failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">121</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job state file doesn&#8217;t exist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the job contact you are trying to restart matches one that the job manager returned to you.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">122</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">could not read the job state file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the state file directory is not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">could not write the job state file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the state file directory is not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">124</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">old job manager is still alive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contact the returned job manager contact to manage the job you are trying to restart.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">125</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">job manager state file TTL expired</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE in GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">126</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">it is unknown if the job was submitted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check job manager log.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">127</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>remote_io_url</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>remote_io_url</code> attribute evaluates to a string value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">could not write the remote io url file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the user&#8217;s home file system on the job manager service node is writable and not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">129</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the standard output/error size is different</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Send a stdio update signal to redirect the job manager output to a new URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">130</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager was sent a stop signal (job is still running)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Submit a restart request to monitor the job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">131</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the user proxy expired (job is still running)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generate a new proxy and then submit a restart request to monitor the job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">132</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job was not submitted by original jobmanager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">133</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager is not waiting for that commit signal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not send a commit signal to a job that is not waiting for a commit signal.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">134</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL scheduler specific parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the LRM-specific documentation to determine what values are legal for the RSL extensions implemented by the LRM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">135</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not stage in a file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the file service hosting the file to stage is reachable from the GRAM5 service node.
Check that the file to stage exists on the file service node.
Check that there is sufficient disk space in the user&#8217;s home directory on the service node to store the file to stage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">136</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the scratch directory could not be created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the directory named by the RSL <code>scratch_dir</code> attribute exists and is writable.
Check that the directory named by the RSL <code>scratch_dir</code> attribute is not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">137</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided <em>gass_cache</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>gass_cache</code> attribute evaluates to a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">138</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL contains attributes which are not valid for job submission</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not use restart- or signal-only RSL attributes when submitting a job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">139</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL contains attributes which are not valid for stdio update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not use submit- or restart-only RSL attributes when sending a stdio update signal to a job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">140</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL contains attributes which are not valid for job restart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not use submit- or signal-only RSL attributes when restarting a job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">141</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>file_stage_in</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>file_stage_in</code> attribute evaluates to a sequence of SOURCE DESTINATION pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">142</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>file_stage_in_shared</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>file_stage_in_shared</code> attribute evaluates to a sequence of SOURCE DESTINATION pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">143</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>file_stage_out</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>file_stage_out</code> attribute evaluates to a sequence of SOURCE DESTINATION pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">144</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>gass_cache</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>gass_cache</code> attribute evaluates to a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">145</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>file_cleanup</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>file_clean_up</code> attribute evaluates to a sequence of strings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">146</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>scratch_dir</em> parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>scratch_dir</code> attribute evaluates to a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">147</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided scheduler-specific RSL parameter is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check the LRM-specific documentation to determine what values are legal for the RSL extensions implemented by the LRM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">148</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a required RSL attribute was not defined in the RSL spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>executable</code> attribute is present in your job request RSL.
Check that the RSL <code>restart</code> attributes is present in your restart RSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">149</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the gass_cache attribute points to an invalid cache directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>gass_cache</code> attributes evaluates to a directory that exists or can be created.
Check that the user&#8217;s home file system is writable and not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">150</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>save_state</em> parameter has an invalid value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>save_state</code> attribute has a value of <code>yes</code> or <code>no</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">151</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not open the RSL attribute validation file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that <code>$GLOBUS_LOCATION/share/globus_gram_job_manager/globus-gram-job-manager.rvf</code> is present and readable on the job manager service node.
Check that <code>$GLOBUS_LOCATION/share/globus_gram_job_manager/</code><em>LRM</em><code>.rvf</code> is readable on the job manager service node if present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">152</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the  job manager could not read the RSL attribute validation file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that <code>$GLOBUS_LOCATION/share/globus_gram_job_manager/globus-gram-job-manager.rvf</code> is valid.
Check that <code>$GLOBUS_LOCATION/share/globus_gram_job_manager/</code><em>LRM</em><code>.rvf</code> is valid if present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">153</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>proxy_timeout</em> is invalid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that RSL <code>proxy_timeout</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">154</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the RSL <em>proxy_timeout</em> value is not greater than zero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that RSL <code>proxy_timeout</code> attribute evaluates to a positive integer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">155</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not stage out a file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the source file being staged exists on the job manager service node.
Check that the directory of the destination file being staged exists on the file service node.
Check that the directory of the destination file being staged is writable by the user.
Check that the destination file service is reachable by the job manager service node.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">156</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job contact string does not match any which the job manager is handling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the job contact string matches one returned from a job request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">157</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proxy delegation failed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the job manager service node trusts the signer of your credential.
Check that you trust the signer of the job manager service node&#8217;s credential.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">158</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager could not lock the state lock file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the file system holding the job state directory supports POSIX advisory locking.
Check that the job state directory is writable by the user on the service node.
Check that the job state directory is not full.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">159</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an invalid globus_io_clientattr_t was used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that you have initialized the <code>globus_io_clientattr_t</code> attribute prior to using it with the GRAM client API.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">160</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an null parameter was passed to the gram library</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that you are passing legal values to all GRAM API calls.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">161</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job manager is still streaming output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBSOLETE IN GRAM5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">162</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the authorization system denied the request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check with your GRAM system administrator to allow a particular certificate to be authorized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">163</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the authorization system reported a failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check with your system administrator to verify that the authorization system is configured properly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">164</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the authorization system denied the request - invalid job id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check with your system administrator to verify that the authorization system is configured properly.
Use a credential which is authorized to interact with a particular GRAM job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">165</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the authorization system denied the request - not authorized to run the specified executable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check with your system administrator to verify that the authorization system is configured properly.
Use a credential which is authorized to interact with a particular GRAM job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">166</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the provided RSL <em>user_name</em> parameter is invalid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the RSL <code>user_name</code> attribute evaluates to a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">167</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the job is not running in the account named by the <em>user_name</em> parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ask with the GRAM system administrator to add an authorization entry to allow your credential to run jobs as the specified user account.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-protocols">Semantics and syntax of protocols</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="gram5-interface-protocol">GRAM5 Protocol</h3>
<div class="paragraph">
<p>The GRAM Protocol is used to handle communication between the
Gatekeeper, Job Manager, and GRAM Clients. The protocol is based on a
subset of the HTTP/1.1 protocol, with a small set of message types and
responses sent as the body of the HTTP requests and responses. This
document describes GRAM Protocol version 2 as used by GRAM5. This is
compatible with with the GRAM Protocol parsers in GRAM2 with extensions.</p>
</div>
<div class="sect3">
<h4 id="_framing">Framing</h4>
<div class="paragraph">
<p>GRAM messages are framed in HTTP/1.1 messages. However, only a small
subset of the HTTP specification is used or understood by the GRAM
system. All GRAM requests are HTTP POST messages. Only the following
HTTP headers are understood:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Host</p>
</li>
<li>
<p>Content-Type (set to "application/x-globus-gram" in all cases)</p>
</li>
<li>
<p>Content-Length</p>
</li>
<li>
<p>Connection (set to "close" in all HTTP responses)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Only the following status codes are supported in response&#8217;s HTTP
Status-Line:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>200 OK</p>
</li>
<li>
<p>403 Forbidden</p>
</li>
<li>
<p>404 Not Found</p>
</li>
<li>
<p>500 Internal Server Error</p>
</li>
<li>
<p>400 Bad Request</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_message_format">Message Format</h4>
<div class="paragraph">
<p>All messages use the carriage return (ASCII value 13) followed by line
feed (ASCII value 10) sequence to delimit lines. In all cases, a blank
line separates the HTTP header from the message body. All
<code>application/x-globus-gram</code> message bodies consist of attribute names
followed by a colon, a space, and then the value of the attribute. When
the value may contain a newline or double-quote character, a special
escaping rule is used to encapsulate the complete string. This
encapsulation consists of surrounding the string with double-quotes, and
escaping all double-quote and backslash characters within the string
with a backslash. All other characters are sent without modification.
For example, the string</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rsl: &amp;( executable = "/bin/echo" )
 ( arguments = "hello" )</pre>
</div>
</div>
<div class="paragraph">
<p>becomes</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rsl: "&amp;( executable = \"bin/echo\" )
  (arguments = \"hello\" )"</pre>
</div>
</div>
<div class="paragraph">
<p>In GRAM5, protocol extensions are supported in the status update
messages. These extensions are implemented as extra attribute names
<strong>after</strong> all of the attributes defined in the messages below. Older
GRAM protocol parsers will ignore those extensions that occur after the
attributes in the messages defined below. In GRAM5, the following
extensions are used:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><code>exit-code</code></strong></dt>
<dd>
<p>Job exit code. Sent in job state callbacks and in job status replies when the job completes.</p>
</dd>
<dt class="hdlist1"><strong><code>gt3-failure-type</code></strong></dt>
<dd>
<p>Failure detail type for staging errors. Sent in job state callbacks and in job status replies when a job fails.</p>
</dd>
<dt class="hdlist1"><strong><code>gt3-failure-message</code></strong></dt>
<dd>
<p>Failure detail message for more context for errors. Sent in job state callbacks and in job status replies when a job fails.</p>
</dd>
<dt class="hdlist1"><strong><code>gt3-failure-source</code></strong></dt>
<dd>
<p>Failure detail message for the source of a failed file transfer. Sent in job state callbacks and in job status replies when a job fails.</p>
</dd>
<dt class="hdlist1"><strong><code>gt3-failure-destination</code></strong></dt>
<dd>
<p>Failure detail message for the destination of a failed file transfer. Sent in job state callbacks and in job status replies when a job fails.</p>
</dd>
<dt class="hdlist1"><strong><code>version</code></strong></dt>
<dd>
<p>Job manager package version. Sent in all messages from the job manager.</p>
</dd>
<dt class="hdlist1"><strong><code>toolkit-version</code></strong></dt>
<dd>
<p>Toolkit release that the job manager is running. Sent in all messages from the job manager.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is the only form of quoting which <code>application/x-globus-gram</code>
messages support. Use of <code>% HEX HEX</code> escapes (such as seen in URL
encodings) is not meaningful for this protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="_message_types">Message Types</h4>
<div class="sect4">
<h5 id="_ping_request">Ping Request</h5>
<div class="paragraph">
<p>A ping request is used to verify that the gatekeeper is configured
properly to handle a named service. The ping request consists of the
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST ping/job-manager-name HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the message-specific strings are</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-manager-name</em></strong></dt>
<dd>
<p>The name of the service to have the gatekeeper check. The service name corresponds to one of the gatekeeper&#8217;s configured grid-services, and is usually of the form "jobmanager-<em>LRM</em>".</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the gatekeeper is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string "2".</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_job_request">Job Request</h5>
<div class="paragraph">
<p>A job request is used to scheduler a job remotely using GRAM. The ping
request consists of the HTTP framing described above with the
request-URI consisting of <em>job-manager-name</em>, where <em>job-manager name</em>
is the name of the service to use to schedule the job. The format of a
job request message consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-manager-name[@user-name] HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
job-state-mask: mask
callback-url: callback-contact
rsl: rsl-description</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-manager-name</em></strong></dt>
<dd>
<p>The name of the service to submit the job request to. The service name corresponds to one of the gatekeeper&#8217;s configured grid-services, and is usually of the form jobmanager-<em>LRM</em>.</p>
</dd>
<dt class="hdlist1"><strong><em>user-name</em></strong></dt>
<dd>
<p>Starting with GT4.0, a client may request that a certain account by used by the gatekeeper to start the job manager. This is done optionally by appending the @ symbol and the local user name that the job should be run as to the <em>job-manager-name</em>. If the @ and username are not present, then the first grid map entry will be used. If the client credential is not authorized in the grid map to use the specified account, an authorization error will occur in the gatekeeper.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the gatekeeper is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
<dt class="hdlist1"><strong><em>mask</em></strong></dt>
<dd>
<p>An integer representation of the job state mask. This value is obtained from a bitwise-OR of the job state values which the client wishes to receive job status callbacks about. These meanings of the various job state values are defined in the GRAM Protocol API documentation.</p>
</dd>
<dt class="hdlist1"><strong><em>callback-contact</em></strong></dt>
<dd>
<p>A https URL which defines a GRAM protocol listener which will receive job state updates. The from a bitwise-OR of the job state values which the client wishes to receive job status callbacks about. The job status update messages are defined below.</p>
</dd>
<dt class="hdlist1"><strong><em>rsl-description</em></strong></dt>
<dd>
<p>A quoted string containing the RSL description of the job request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_status_request">Status Request</h5>
<div class="paragraph">
<p>A status request is used by a GRAM client to get the current job state
of a running job. This type of message can only be sent to a job
manager&#8217;s job-contact (as returned in the reply to a job request
message). The format of a job request message consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size
protocol-version: version

"status"</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact string returned in a response to a job request message, or determined by querying the MDS system.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the job manager is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_callback_register_request">Callback Register Request</h5>
<div class="paragraph">
<p>A callback register request is used by a GRAM client to register a new
callback contact to receive GRAM job state updates. This type of message
can only be sent to a job manager&#8217;s job-contact (as returned in the
reply to a job request message). The format of a job request message
consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
"register mask callback-contact"</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact string returned in a response to a job request message, or determined by querying the MDS system.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the job manager is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
<dt class="hdlist1"><strong><em>mask</em></strong></dt>
<dd>
<p>An integer representation of the job state mask. This value is obtained from a bitwise-OR of the job state values which the client wishes to receive job status callbacks about. These meanings of the various job state values are defined in the GRAM Protocol API documentation.</p>
</dd>
<dt class="hdlist1"><strong><em>callback-contact</em></strong></dt>
<dd>
<p>A https URL which defines a GRAM protocol listener which will receive job state updates. The from a bitwise-OR of the job state values which the client wishes to receive job status callbacks about. The job status update messages are defined below.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_callback_unregister_request">Callback Unregister Request</h5>
<div class="paragraph">
<p>A callback unregister request is used by a GRAM client to request that
the job manager no longer send job state updates to the specified
callback contact. This type of message can only be sent to a job
manager&#8217;s job-contact (as returned in the reply to a job request
message). The format of a job request message consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
"unregister callback-contact"</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact string returned in a response to a job request message, or determined by querying the MDS system.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the job manager is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string "2".</p>
</dd>
<dt class="hdlist1"><strong><em>callback-contact</em></strong></dt>
<dd>
<p>A https URL which defines a GRAM protocol listener which should no longer receive job state updates. The from a bitwise-OR of the job state values which the client wishes to receive job status callbacks about. The job status update messages are defined @ref globus_gram_protocol_job_state_updates "below".</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_job_cancel_request">Job Cancel Request</h5>
<div class="paragraph">
<p>A job cancel request is used by a GRAM client to request that the job
manager terminate a job. This type of message can only be sent to a job
manager&#8217;s job-contact (as returned in the reply to a job request
message). The format of a job request message consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
"cancel"</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact string returned in a response to a job request message, or determined by querying the MDS system.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the job manager is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_job_signal_request">Job Signal Request</h5>
<div class="paragraph">
<p>A job signal request is used by a GRAM client to request that the job
manager process a signal for a job. The arguments to the various signals
are discussed in the protocol library documentation. The format of a job
request message consists of the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST job-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
"signal"</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact string returned in a response to a job request message, or determined by querying the MDS system.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The name of the host on which the job manager is running. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
<dt class="hdlist1"><strong><em>signal</em></strong></dt>
<dd>
<p>A quoted string containing the signal number and its parameters.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_job_state_updates">Job State Updates</h5>
<div class="paragraph">
<p>A job status update message is sent by the job manager to all registered
callback contacts when the job&#8217;s status changes. The format of the job
status update messages is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST callback-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
job-manager-url: job-contact
status: status-code
failure-code: failure-code</pre>
</div>
</div>
<div class="paragraph">
<p>The values of the emphasized text items are as below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong><em>callback-contact</em></strong></dt>
<dd>
<p>The callback contact string registered with the job manager either by being passed as the <em>callback-contact</em> in a job request message or in a callback register message.</p>
</dd>
<dt class="hdlist1"><strong><em>host-name</em></strong></dt>
<dd>
<p>The host part of the callback-contact URL. This exists only for compatibility with the HTTP/1.1 protocol.</p>
</dd>
<dt class="hdlist1"><strong><em>message-size</em></strong></dt>
<dd>
<p>The length of the content of the message, not including the HTTP/1.1 header.</p>
</dd>
<dt class="hdlist1"><strong><em>version</em></strong></dt>
<dd>
<p>The version of the GRAM protocol which is being used. For the protocol defined in this document, the value must be the string <code>2</code>.</p>
</dd>
<dt class="hdlist1"><strong><em>job-contact</em></strong></dt>
<dd>
<p>The job contact of the job which has changed states.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_proxy_delegation">Proxy Delegation</h5>
<div class="paragraph">
<p>A proxy delegation message is sent by the client to the job manager to
initiate a delegation handshake to generate a new proxy credential for
the job manager. This credential is used by the job manager or the job
when making further secured connections. The format of the delegation
message is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST callback-contact HTTP/1.1
Host: host-name
Content-Type: application/x-globus-gram
Content-Length: message-size

protocol-version: version
"renew"</pre>
</div>
</div>
<div class="paragraph">
<p>If a successful (200) reply is sent in response to this message, then
the client will procede with a GSI delegation handshake. The tokens in
this handshake will be framed with a 4 byte big-endian token length
header. The framed tokens will then be wrapped using the
GLOBUS_IO_SECURE_CHANNEL_MODE_SSL_WRAP wrapping mode. The job manager
will frame response tokens in the same manner. After the job manager
receives its final delegation token, it will respond with another
response message that indicates whether the delegation was processed or
not. This response message is a standard GRAM response message.</p>
</div>
</div>
<div class="sect4">
<h5 id="_security_attributes">Security Attributes</h5>
<div class="paragraph">
<p>The following security attributes are needed to communicate with the
Gatekeeper:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication must be done using GSSAPI mutual authentication</p>
</li>
<li>
<p>Messages must be wrapped with support for the delegation message. When using Globus I/O, this is accomplished by using the the GLOBUS_IO_SECURE_CHANNEL_MODE_GSI_WRAP wrapping mode.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gram5-state-model">Job State Model</h4>
<div class="paragraph">
<p>As the GRAM service processes a job, the job undergoes a series of state
transitions. These states and their meanings follow:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED</code></dt>
<dd>
<p>Initial job state</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_IN</code></dt>
<dd>
<p>Job staging in progress</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</code></dt>
<dd>
<p>Job submitted to LRM, awaiting execution</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE</code></dt>
<dd>
<p>Job executing</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_SUSPENDED</code></dt>
<dd>
<p>Job made progress executing but is now suspended</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_OUT</code></dt>
<dd>
<p>Job staging in progress after job completed</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code></dt>
<dd>
<p>Job completed successfully</p>
</dd>
<dt class="hdlist1"><code>GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</code></dt>
<dd>
<p>Job was canceled or failed</p>
</dd>
</dl>
</div>
<div class="openblock">
<div class="title">GRAM State Transitions</div>
<div class="content">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../../gram5/GRAM5_states.png" alt="GRAM5 states">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-relateddocs">Related Documentation</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>No related documentation links have been determined at this time.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-internal-components">Internal Components</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><a href="internal-components.html">Internal Components</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gram5-developer-index">Index</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>
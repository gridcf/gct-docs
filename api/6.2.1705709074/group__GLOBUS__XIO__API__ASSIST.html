<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Grid Community Toolkit: XIO Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Grid Community Toolkit
   &#160;<span id="projectnumber">6.2.1705709074 (tag: v6.2.20240202)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">XIO Examples<div class="ingroups"><a class="el" href="group__globus__xio.html">Globus XIO</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>XIO Examples.  
<a href="#details">More...</a></p>
<p>XIO Examples. </p>
<p>Help understanding the globus_xio api.</p>
<h1><a class="anchor" id="globus_xio_stack_construction"></a>
Stack Construction</h1>
<p>The driver stack that is used for a given XIO handle is constructed using a globus_xio_stack_t. Each driver is loaded by name and pushed onto a stack.</p>
<p>Stack setup example: </p>
<div class="fragment"><div class="line"><span class="comment">// First load the drivers</span></div>
<div class="line">globus_xio_driver_load(<span class="stringliteral">&quot;tcp&quot;</span>, &amp;tcp_driver);</div>
<div class="line">globus_xio_driver_load(<span class="stringliteral">&quot;gsi&quot;</span>, &amp;gsi_driver);</div>
<div class="line"></div>
<div class="line"><span class="comment">//build the stack</span></div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga06a57120fc6575ab053943bc31f81d5e">globus_xio_stack_init</a>(&amp;stack);</div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga11af408bd72eed48b8424a1982baa4c9">globus_xio_stack_push_driver</a>(stack, tcp_driver, NULL);</div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga11af408bd72eed48b8424a1982baa4c9">globus_xio_stack_push_driver</a>(stack, gsi_driver, NULL);</div>
</div><!-- fragment --><h1><a class="anchor" id="globus_xio_servers"></a>
Servers</h1>
<p>A server data structure provides functionality for passive opens. A server is initialized and bound to a protocol stack and set of attributes with the function <a class="el" href="group__GLOBUS__XIO__API.html#ga0492f88d94b383e509ef7d47dd57f04c">globus_xio_server_create()</a>. Once a server is created many "connections" can be accepted. Each connection will result in an initialized handle which can later be opened.</p>
<div class="fragment"><div class="line">globus_xio_server_t             server;</div>
<div class="line">globus_xio_attr_t               attr;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#gacfc8e326972495c3279fc6cf5efa6d48">globus_xio_attr_init</a>(&amp;attr);</div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga0492f88d94b383e509ef7d47dd57f04c">globus_xio_server_create</a>(&amp;server_handle, attr, stack); </div>
<div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga1eba4203fae0656ab149c05448762a61">globus_xio_server_accept</a>(&amp;handle, server);</div>
</div><!-- fragment --><h1><a class="anchor" id="globus_xio_handle_construction"></a>
Handle Construction</h1>
<p>There are two ways to create a handle. The first is for use as a client (one that is doing an active open). The function: <a class="el" href="group__GLOBUS__XIO__API.html#ga463ecd19168069a6a80a9bdbb8595b51">globus_xio_handle_create()</a> is used to create such a handle and bind that handle to a protocol stack.</p>
<div class="fragment"><div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga463ecd19168069a6a80a9bdbb8595b51">globus_xio_handle_create</a>(&amp;handle, stack);</div>
</div><!-- fragment --><p>The second means of creating a handle is for use as a server (one that is doing a passive open). This is created by accepting a connection on a server_handle with the function <a class="el" href="group__GLOBUS__XIO__API.html#ga1eba4203fae0656ab149c05448762a61">globus_xio_server_accept()</a> or <a class="el" href="group__GLOBUS__XIO__API.html#gae23b637e3935d7dbf314dd813b5cb4e8">globus_xio_server_register_accept()</a>.</p>
<p>Mutable attrs can be altered via a call to <a class="el" href="group__globus__xio__file__driver__cntls.html#ga72b10018ade59a2fad6620ba4baf37ca">globus_xio_handle_cntl()</a> described later.</p>
<div class="fragment"><div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#ga1eba4203fae0656ab149c05448762a61">globus_xio_server_accept</a>(&amp;xio_handle, server_handle);</div>
</div><!-- fragment --><p>once a handle is initialized the user can call <a class="el" href="group__GLOBUS__XIO__API.html#ga7693561b629da2ff74e563df74850b6a">globus_xio_open()</a> to begin the open process.</p>
<h1><a class="anchor" id="globus_xio_timeouts"></a>
Timeouts</h1>
<p>A user can set a timeout value for any I/O operation. Each I/O operation (open close read write) can have its own timeout value. If no timeout is set the operation will be allowed to infinitely block.</p>
<p>When time expires the outstanding operation is canceled. If the timeout callback for the given operation is not NULL it is called first to notify the user that the operation timed out and give the user a chance to ignore that timeout. If canceled, the user will get the callback they registered for the operation as well, but it will come with an error indicating that it has been canceled.</p>
<p>It is possible that part of an I/O operation will complete before the timeout expires. In this case the operation can still be canceled. The user will receive there IO callback with and error set and the length value appropriately set to indicate how much of the operation completed.</p>
<p>Timeouts are registered by using the following handle_cntl values:</p>
<ul>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_ALL</li>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_OPEN</li>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_CLOSE</li>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_READ</li>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_WRITE</li>
<li>GLOBUS_XIO_ATTR_SET_TIMEOUT_ACCEPT</li>
</ul>
<p>Each of these cntls expect three parameters:</p>
<ul>
<li>globus_xio_timeout_callback_t callback_function</li>
<li>globus_reltime_t * delay_time</li>
<li>void * callback_arg</li>
</ul>
<h1><a class="anchor" id="data_descriptor"></a>
Data Descriptor</h1>
<p>The data descriptor ADT gives the user a means of attaching/extracting meta data to a read or write operation.<br/>
 Things like offset, out of band message, and other driver specific meta data are contained in the data descriptor.<br/>
 Data descriptors are passed to globus_xio in <a class="el" href="group__GLOBUS__XIO__API.html#gab6831b181270fef675056476ddc3141e">globus_xio_read()</a> and <a class="el" href="group__GLOBUS__XIO__API.html#ga151bb47631c7640729ad72648cd14ec2">globus_xio_write()</a>. Within the globus_xio framework it is acceptable to pass NULL instead of a valid data_descriptor,</p>
<p>Example: </p>
<div class="fragment"><div class="line"><a class="code" href="group__GLOBUS__XIO__API.html#gaaef9bf5e7bb565393877ed707777d9b8">globus_xio_data_descriptor_init</a>(&amp;desc);</div>
<div class="line"><a class="code" href="globus__xio__http_8h.html#a531f2dc9f391ca557d2a83d85ac4c2b2">globus_xio_data_descriptor_cntl</a>(desc, </div>
<div class="line">    tcp_driver,</div>
<div class="line">    <a class="code" href="group__globus__xio__tcp__driver__cntls.html#gga14104ee1d85be736f858714c1cf6cf78a6148444b33363edb16cfbf5e23895c11">GLOBUS_XIO_TCP_SET_SEND_FLAGS</a>,</div>
<div class="line">    <a class="code" href="group__globus__xio__tcp__driver__types.html#gga8f7a2aeb8f3996088abba4c6aac0d132a1cb3304e23f884d7046cf321e433c69d">GLOBUS_XIO_TCP_SEND_OOB</a>);</div>
</div><!-- fragment --><h1><a class="anchor" id="user_attributes"></a>
User Attributes</h1>
<p>Globus XIO uses a single attribute object for all of its functions. Attributes give the user an extensible mechanism to alter default values which control parameters in an operation.</p>
<p>In most of the Globus XIO user API functions a user passes an attribute as a parameter. In many cases the user may ignore the attribute parameter and just pass in NULL. However at times the user will wish to tweak the operation. The attribute structure is used for this tweaking.</p>
<p>There are only three attribute functions. <a class="el" href="group__GLOBUS__XIO__API.html#gacfc8e326972495c3279fc6cf5efa6d48">globus_xio_attr_init</a> <a class="el" href="group__globus__xio__net__manager__driver.html#ga0f703c8fcc208e9d0289e35a91412b80">globus_xio_attr_cntl</a> and <a class="el" href="group__GLOBUS__XIO__API.html#ga17b64bb07d47281d0494e4cb3c9c89bd">globus_xio_attr_destroy</a>. The init and destroy functions are very simple and require little explanation. Before an attribute can be used it must be initialized, and to clean up all memory associated with it the user must call destroy on it.</p>
<p>The function <a class="el" href="group__globus__xio__net__manager__driver.html#ga0f703c8fcc208e9d0289e35a91412b80">globus_xio_attr_cntl</a> manipulates values in the attribute. For more info on it see <a class="el" href="group__globus__xio__net__manager__driver.html#ga0f703c8fcc208e9d0289e35a91412b80">globus_xio_attr_cntl</a>. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>

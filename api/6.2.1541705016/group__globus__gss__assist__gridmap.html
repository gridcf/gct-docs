<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Grid Community Toolkit: Gridmap Authorization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Grid Community Toolkit
   &#160;<span id="projectnumber">6.2.1541705016</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Gridmap Authorization<div class="ingroups"><a class="el" href="group__globus__gss__assist.html">Globus GSS Assist</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Gridmap Authorization and Local User Mapping.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaec4343ae029aad696c125f311a54d380"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#gaec4343ae029aad696c125f311a54d380">GlobusGssAssistFreeDNArray</a>(dn_a)</td></tr>
<tr class="memdesc:gaec4343ae029aad696c125f311a54d380"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free array of distinguished names.  <a href="#gaec4343ae029aad696c125f311a54d380">More...</a><br /></td></tr>
<tr class="separator:gaec4343ae029aad696c125f311a54d380"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8cb7da6808b720b5185d67d858e78fec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#ga8cb7da6808b720b5185d67d858e78fec">globus_gss_assist_gridmap</a> (char *globusidp, char **useridp)</td></tr>
<tr class="memdesc:ga8cb7da6808b720b5185d67d858e78fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up the default mapping for a Grid identity in a gridmap file.  <a href="#ga8cb7da6808b720b5185d67d858e78fec">More...</a><br /></td></tr>
<tr class="separator:ga8cb7da6808b720b5185d67d858e78fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bfda92b7cb95813557688b7bdc8cea7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#ga6bfda92b7cb95813557688b7bdc8cea7">globus_gss_assist_userok</a> (char *globusid, char *userid)</td></tr>
<tr class="memdesc:ga6bfda92b7cb95813557688b7bdc8cea7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gridmap entry existence check.  <a href="#ga6bfda92b7cb95813557688b7bdc8cea7">More...</a><br /></td></tr>
<tr class="separator:ga6bfda92b7cb95813557688b7bdc8cea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e73fcdc1c36dde30c06721f80e9250e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#ga5e73fcdc1c36dde30c06721f80e9250e">globus_gss_assist_map_local_user</a> (char *local_user, char **globusidp)</td></tr>
<tr class="memdesc:ga5e73fcdc1c36dde30c06721f80e9250e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up the default Grid identity associated with a local user name.  <a href="#ga5e73fcdc1c36dde30c06721f80e9250e">More...</a><br /></td></tr>
<tr class="separator:ga5e73fcdc1c36dde30c06721f80e9250e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbc4240d6e2722a82785ed74b718f4d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3">globus_gss_assist_lookup_all_globusid</a> (char *username, char **dns[], int *dn_count)</td></tr>
<tr class="memdesc:gacbc4240d6e2722a82785ed74b718f4d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up all Grid IDs associated with a local user ID.  <a href="#gacbc4240d6e2722a82785ed74b718f4d3">More...</a><br /></td></tr>
<tr class="separator:gacbc4240d6e2722a82785ed74b718f4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4bbf706fc204783494ae6f1a29abac61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61">globus_gss_assist_map_and_authorize</a> (gss_ctx_id_t context, char *service, char *desired_identity, char *identity_buffer, unsigned int identity_buffer_length)</td></tr>
<tr class="memdesc:ga4bbf706fc204783494ae6f1a29abac61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authorize the peer of a security context to use a service.  <a href="#ga4bbf706fc204783494ae6f1a29abac61">More...</a><br /></td></tr>
<tr class="separator:ga4bbf706fc204783494ae6f1a29abac61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d93184b5e846618cd69ae7a3e3fc3fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc">globus_gss_assist_map_and_authorize_sharing</a> (char *shared_user_certificate, gss_ctx_id_t context, char *desired_identity, char *identity_buffer, unsigned int identity_buffer_length)</td></tr>
<tr class="memdesc:ga8d93184b5e846618cd69ae7a3e3fc3fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authorize a particular credential for shared access.  <a href="#ga8d93184b5e846618cd69ae7a3e3fc3fc">More...</a><br /></td></tr>
<tr class="separator:ga8d93184b5e846618cd69ae7a3e3fc3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Gridmap Authorization and Local User Mapping. </p>
<p>Functions in this group are used to authorize a GSSAPI credential to perform some action on the local machine. In addition to checking whether a credential is authorized, it can also be mapped to a local user name. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaec4343ae029aad696c125f311a54d380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec4343ae029aad696c125f311a54d380">&#9670;&nbsp;</a></span>GlobusGssAssistFreeDNArray</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GlobusGssAssistFreeDNArray</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dn_a</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free array of distinguished names. </p>
<p>Free the contents of a name array created during a successful call to <a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3" title="Look up all Grid IDs associated with a local user ID. ">globus_gss_assist_lookup_all_globusid()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dn_a</td><td>Array of names to free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8cb7da6808b720b5185d67d858e78fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8cb7da6808b720b5185d67d858e78fec">&#9670;&nbsp;</a></span>globus_gss_assist_gridmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int globus_gss_assist_gridmap </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>globusidp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>useridp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up the default mapping for a Grid identity in a gridmap file. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#ga8cb7da6808b720b5185d67d858e78fec" title="Look up the default mapping for a Grid identity in a gridmap file. ">globus_gss_assist_gridmap()</a> function parses the default gridmap file and modifies its <em>useridp</em> parameter to point to a copy of the string containing the default local identity that the grid identity is mapped to. If successful, the caller is responsible for freeing the string pointed to by <em>useridp</em>.</p>
<p>By default, <a class="el" href="group__globus__gss__assist__gridmap.html#ga8cb7da6808b720b5185d67d858e78fec" title="Look up the default mapping for a Grid identity in a gridmap file. ">globus_gss_assist_gridmap()</a> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">globusidp</td><td>The GSSAPI name string of the identity who requested authorization </td></tr>
    <tr><td class="paramname">useridp</td><td>A pointer to a string to be set to the default user ID for the local system. No validation is done to check that such a user exists.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, <a class="el" href="group__globus__gss__assist__gridmap.html#ga8cb7da6808b720b5185d67d858e78fec" title="Look up the default mapping for a Grid identity in a gridmap file. ">globus_gss_assist_gridmap()</a> returns 0 and modifies the the string pointed to by the <em>useridp</em> parameter. If an error occurs, a non-zero value is returned and the value pointed to by <em>useridp</em> is undefined.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gacbc4240d6e2722a82785ed74b718f4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacbc4240d6e2722a82785ed74b718f4d3">&#9670;&nbsp;</a></span>globus_gss_assist_lookup_all_globusid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a> globus_gss_assist_lookup_all_globusid </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>dns</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dn_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up all Grid IDs associated with a local user ID. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3" title="Look up all Grid IDs associated with a local user ID. ">globus_gss_assist_lookup_all_globusid()</a> function parses a gridmap file and finds all Grid IDs that map to a local user ID. The <em>dns</em> parameter is modified to point to an array of Grid ID strings from the gridmap file, and the <em>dn_count</em> parameter is modified to point to the number of Grid ID strings in the array. The caller is responsible for freeing the array using the macro <em><a class="el" href="group__globus__gss__assist__gridmap.html#gaec4343ae029aad696c125f311a54d380" title="Free array of distinguished names. ">GlobusGssAssistFreeDNArray()</a></em>.</p>
<p>By default, <a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3" title="Look up all Grid IDs associated with a local user ID. ">globus_gss_assist_lookup_all_globusid()</a> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>The local username to look up in the gridmap file. </td></tr>
    <tr><td class="paramname">dns</td><td>A pointer to an array of strings. This function modifies this to point to a newly allocated array of strings. The caller must use the macro <em><a class="el" href="group__globus__gss__assist__gridmap.html#gaec4343ae029aad696c125f311a54d380" title="Free array of distinguished names. ">GlobusGssAssistFreeDNArray()</a></em> to free this memory. </td></tr>
    <tr><td class="paramname">dn_count</td><td>A pointer to an integer that is modified to contain the number of entries in the array returned via the <em>dns</em> parameter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, <a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3" title="Look up all Grid IDs associated with a local user ID. ">globus_gss_assist_lookup_all_globusid()</a> returns GLOBUS_SUCCESS and modifies its <em>dns</em> and <em>dn_count</em> parameters as described above. If an error occurs, <a class="el" href="group__globus__gss__assist__gridmap.html#gacbc4240d6e2722a82785ed74b718f4d3" title="Look up all Grid IDs associated with a local user ID. ">globus_gss_assist_lookup_all_globusid()</a> returns a globus_result_t that can be resolved to an error object and the values pointed to by <em>dns</em> and <em>dn_count</em> are undefined.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_ARGUMENTS</td><td>Error with arguments </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_GRIDMAP</td><td>Invalid path to gridmap </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_ERROR_ERRNO</td><td>System error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4bbf706fc204783494ae6f1a29abac61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4bbf706fc204783494ae6f1a29abac61">&#9670;&nbsp;</a></span>globus_gss_assist_map_and_authorize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a> globus_gss_assist_map_and_authorize </td>
          <td>(</td>
          <td class="paramtype">gss_ctx_id_t&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>desired_identity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>identity_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>identity_buffer_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authorize the peer of a security context to use a service. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61" title="Authorize the peer of a security context to use a service. ">globus_gss_assist_map_and_authorize()</a> function attempts to authorize the peer of a security context to use a particular service. If the <em>desired_identity</em> parameter is non-NULL, the authorization will succeed only if the peer is authorized for that identity. Otherwise, any valid authorized local user name will be used. If authorized, the local user name will be copied to the string pointed to by the <em>identity_buffer</em> parameter, which must be at least as long as the value passed as the <em>identity_buffer_length</em> parameter.</p>
<p>If authorization callouts are defined in the callout configuration file, <a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61" title="Authorize the peer of a security context to use a service. ">globus_gss_assist_map_and_authorize()</a> will invoke both the GLOBUS_GENERIC_MAPPING_TYPE callout and the GLOBUS_GENERIC_AUTHZ_TYPE callout; otherwise the default gridmap file will be used for mapping and no service-specific authorization will be done.</p>
<p>If <a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61" title="Authorize the peer of a security context to use a service. ">globus_gss_assist_map_and_authorize()</a> uses a gridmap file, it first looks for a file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Security context to inspect for peer identity information. </td></tr>
    <tr><td class="paramname">service</td><td>A NULL-terminated string containing the name of the service that an authorization decision is being made for. </td></tr>
    <tr><td class="paramname">desired_identity</td><td>Optional. If non-NULL, perform an authorization to act as the local user named by this NULL-terminated string. </td></tr>
    <tr><td class="paramname">identity_buffer</td><td>A pointer to a string buffer into which will be copied the local user name that the peer of the context is authorized to act as. </td></tr>
    <tr><td class="paramname">identity_buffer_length</td><td>Length of the <em>identity_buffer</em> array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, <a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61" title="Authorize the peer of a security context to use a service. ">globus_gss_assist_map_and_authorize()</a> returns GLOBUS_SUCCESS and copies the authorized local identity to the <em>identity_buffer</em> parameter. If an error occurs, <a class="el" href="group__globus__gss__assist__gridmap.html#ga4bbf706fc204783494ae6f1a29abac61" title="Authorize the peer of a security context to use a service. ">globus_gss_assist_map_and_authorize()</a> returns a globus_result_t that can be resolved to an error object.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_CALLOUT_CONFIG</td><td>Invalid authorization configuration file </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_WITH_HASHTABLE</td><td><br />
 Hash table operation failed. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_CALLOUT_ERROR</td><td>The callout itself returned a error. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_WITH_DL</td><td>Dynamic library operation failed. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_OUT_OF_MEMORY</td><td>Out of memory </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_GSSAPI_ERROR</td><td>A GSSAPI function returned an error </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_GRIDMAP_LOOKUP_FAILED</td><td>Gridmap lookup failure </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_BUFFER_TOO_SMALL</td><td>Caller provided insufficient buffer space for local identity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8d93184b5e846618cd69ae7a3e3fc3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d93184b5e846618cd69ae7a3e3fc3fc">&#9670;&nbsp;</a></span>globus_gss_assist_map_and_authorize_sharing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__globus__common.html#gab3aa7be121bcab5daf208d5d99b4e8f2">globus_result_t</a> globus_gss_assist_map_and_authorize_sharing </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>shared_user_certificate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gss_ctx_id_t&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>desired_identity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>identity_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>identity_buffer_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authorize a particular credential for shared access. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc" title="Authorize a particular credential for shared access. ">globus_gss_assist_map_and_authorize_sharing()</a> function attempts to authorize a particular credential for shared access. the <em>desired_identity</em> parameter is non-NULL, the authorization will succeed only if the credential is authorized for that identity. Otherwise, any valid authorized local user name will be used. If authorized, the local user name will be copied to the string pointed to by the <em>identity_buffer</em> parameter, which must be at least as long as the value passed as the <em>identity_buffer_length</em> parameter.</p>
<p>If authorization callouts are defined in the callout configuration file, <a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc" title="Authorize a particular credential for shared access. ">globus_gss_assist_map_and_authorize_sharing()</a> will invoke both the GLOBUS_GENERIC_MAPPING_TYPE callout and the GLOBUS_GENERIC_AUTHZ_TYPE callout; otherwise the default gridmap file will be used for mapping and no service-specific authorization will be done.</p>
<p>If <a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc" title="Authorize a particular credential for shared access. ">globus_gss_assist_map_and_authorize_sharing()</a> uses a gridmap file, it first looks for a file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shared_user_certificate</td><td>cert and cert chain of user that owns the resources to be shared, in PEM format. This will be parsed to find the identity that should be mapped. </td></tr>
    <tr><td class="paramname">context</td><td>Security context of the underlying connection. This should generally be ignored. </td></tr>
    <tr><td class="paramname">desired_identity</td><td>Optional. If non-NULL, perform an authorization to act as the local user named by this NULL-terminated string. </td></tr>
    <tr><td class="paramname">identity_buffer</td><td>A pointer to a string buffer into which will be copied the local user name that the peer of the context is authorized to act as. </td></tr>
    <tr><td class="paramname">identity_buffer_length</td><td>Length of the <em>identity_buffer</em> array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, <a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc" title="Authorize a particular credential for shared access. ">globus_gss_assist_map_and_authorize_sharing()</a> returns GLOBUS_SUCCESS and copies the authorized local identity to the <em>identity_buffer</em> parameter. If an error occurs, <a class="el" href="group__globus__gss__assist__gridmap.html#ga8d93184b5e846618cd69ae7a3e3fc3fc" title="Authorize a particular credential for shared access. ">globus_gss_assist_map_and_authorize_sharing()</a> returns a globus_result_t that can be resolved to an error object.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_ERROR_WITH_CALLOUT_CONFIG</td><td>Invalid authorization configuration file </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_WITH_HASHTABLE</td><td><br />
 Hash table operation failed. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_CALLOUT_ERROR</td><td>The callout itself returned a error. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_WITH_DL</td><td>Dynamic library operation failed. </td></tr>
    <tr><td class="paramname">GLOBUS_CALLOUT_ERROR_OUT_OF_MEMORY</td><td>Out of memory </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_GSSAPI_ERROR</td><td>A GSSAPI function returned an error </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_GRIDMAP_LOOKUP_FAILED</td><td>Gridmap lookup failure </td></tr>
    <tr><td class="paramname">GLOBUS_GSI_GSS_ASSIST_BUFFER_TOO_SMALL</td><td>Caller provided insufficient buffer space for local identity </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5e73fcdc1c36dde30c06721f80e9250e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e73fcdc1c36dde30c06721f80e9250e">&#9670;&nbsp;</a></span>globus_gss_assist_map_local_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int globus_gss_assist_map_local_user </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>local_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>globusidp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up the default Grid identity associated with a local user name. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#ga5e73fcdc1c36dde30c06721f80e9250e" title="Look up the default Grid identity associated with a local user name. ">globus_gss_assist_map_local_user()</a> function parses the gridmap file to determine a if the user name passed as the <em>local_user</em> parameter is the default local user for a Grid ID in the gridmap file. If so, it modifies <em>globusidp</em> to point to a copy of that ID. Otherwise, it searches the gridmap file for a Grid ID that has a non-default mapping for <em>local_user</em> and modifies <em>globusidp</em> to point to a copy of that ID. If successful, the caller is responsible for freeing the string pointed to by the <em>globusidp</em> pointer.</p>
<p>By default, <a class="el" href="group__globus__gss__assist__gridmap.html#ga5e73fcdc1c36dde30c06721f80e9250e" title="Look up the default Grid identity associated with a local user name. ">globus_gss_assist_map_local_user()</a> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">local_user</td><td>The local username to find a Grid ID for </td></tr>
    <tr><td class="paramname">globusidp</td><td>A Grid ID that maps from the local_user.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, <a class="el" href="group__globus__gss__assist__gridmap.html#ga5e73fcdc1c36dde30c06721f80e9250e" title="Look up the default Grid identity associated with a local user name. ">globus_gss_assist_map_local_user()</a> returns 0 and modifies <em>globusidp</em> to point to a Grid ID that maps to <em>local_user</em>; otherwise, <a class="el" href="group__globus__gss__assist__gridmap.html#ga5e73fcdc1c36dde30c06721f80e9250e" title="Look up the default Grid identity associated with a local user name. ">globus_gss_assist_map_local_user()</a> returns 1 and the value pointed to by <em>globusidp</em> is undefined.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6bfda92b7cb95813557688b7bdc8cea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6bfda92b7cb95813557688b7bdc8cea7">&#9670;&nbsp;</a></span>globus_gss_assist_userok()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int globus_gss_assist_userok </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>globusid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>userid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gridmap entry existence check. </p>
<p>The <a class="el" href="group__globus__gss__assist__gridmap.html#ga6bfda92b7cb95813557688b7bdc8cea7" title="Gridmap entry existence check. ">globus_gss_assist_userok()</a> function parses the default gridmap file and checks whether any mapping exists for the grid identity passed as the <em>globusid</em> parameter and the local user identity passed as the @ userid parameter.</p>
<p>By default, <a class="el" href="group__globus__gss__assist__gridmap.html#ga6bfda92b7cb95813557688b7bdc8cea7" title="Gridmap entry existence check. ">globus_gss_assist_userok()</a> looks for the default gridmap file defined by the value of the GRIDMAP environment variable. If that is not set, it falls back to $HOME/.gridmap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">globusid</td><td>The GSSAPI name string of the identity who requested authorization </td></tr>
    <tr><td class="paramname">userid</td><td>The local account name that access is sought for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If <a class="el" href="group__globus__gss__assist__gridmap.html#ga6bfda92b7cb95813557688b7bdc8cea7" title="Gridmap entry existence check. ">globus_gss_assist_userok()</a> is able to find a mapping between <em>globusid</em> and <em>userid</em>, it returns 0; otherwise it returns 1.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GLOBUS_SUCCESS</td><td>Success </td></tr>
    <tr><td class="paramname">1</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
